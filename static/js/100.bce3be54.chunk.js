"use strict";(self.webpackChunkceo_assessment_app=self.webpackChunkceo_assessment_app||[]).push([[100],{41962:(e,t,a)=>{a.d(t,{CO:()=>s,Os:()=>r,y6:()=>i});const s=[{key:"interdependency",title:"Interdependency",description:"Cross-functional collaboration and dependency management",icon:"\ud83d\udd17",color:"#3B82F6",order:1},{key:"orchestration",title:"Orchestration",description:"Development cycles, sprint planning, and continuous improvement",icon:"\ud83d\udd04",color:"#10B981",order:2},{key:"investigation",title:"Investigation",description:"Data analysis, research, and discovery processes",icon:"\ud83d\udd0e",color:"#F59E0B",order:3},{key:"interpretation",title:"Interpretation",description:"Insight generation, decision-making, and strategic analysis",icon:"\ud83d\udca1",color:"#8B5CF6",order:4},{key:"illustration",title:"Illustration",description:"Communication, visualization, and knowledge sharing",icon:"\ud83d\udd04",color:"#EF4444",order:5},{key:"inlignment",title:"Inlignment",description:"Strategic coordination, goal setting, and organizational coherence",icon:"\ud83c\udfaf",color:"#06B6D4",order:6}],n={orchestration:"orchestration",inlignment:"inlignment",interdependency:"interdependency",orchestration:"orchestration",investigation:"investigation",interpretation:"interpretation",illustration:"illustration",inlignment:"inlignment",dependency:"interdependency",dependencies:"interdependency",analysis:"investigation",research:"investigation",insights:"interpretation",reporting:"illustration",visualization:"illustration",coordination:"inlignment",strategy:"inlignment"};function r(e){if(!e||"string"!==typeof e)return"investigation";const t=e.toLowerCase().trim();return n[t]||t}function i(){return s.sort((e,t)=>e.order-t.order).map(e=>({id:e.key,key:e.key,title:e.title,description:e.description,icon:e.icon,color:e.color}))}const o=Object.values({interdependency:.18,orchestration:.2,investigation:.16,interpretation:.18,illustration:.14,inlignment:.14}).reduce((e,t)=>e+t,0);Math.abs(o-1)>.001&&console.warn("[systems.js] System weights sum to ".concat(o.toFixed(3),", should be 1.0"))},85100:(e,t,a)=>{a.r(t),a.d(t,{default:()=>z});var s=a(89379),n=a(65043),r=a(23721),i=a(13204),o=a(35016),l=a(75431),c=a(41962);function d(e){return(e||"").toLowerCase().replace(/[^a-z0-9\s]/g," ").split(/\s+/).filter(Boolean)}function m(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(!e||!e.docs||0===e.docs.length)return[];const s=function(e,t){const a=d(t),s=Object.create(null);a.forEach(e=>{s[e]=(s[e]||0)+1});const n=Object.create(null);let r=0;return Object.entries(s).forEach(t=>{let[a,s]=t;const i=s*(e.idf[a]||0);n[a]=i,r+=i*i}),r=Math.sqrt(r)||1,e.docVectors.map((e,t)=>{let{vec:a,norm:s}=e,i=0;return Object.entries(n).forEach(e=>{let[t,s]=e;a[t]&&(i+=s*a[t])}),{i:t,sim:i/(s*r)}}).sort((e,t)=>t.sim-e.sim)}(e,t).filter(e=>e.sim>0);return s.slice(0,a).map(t=>({score:t.sim,doc:e.docs[t.i]}))}var g=a(86068),u=a(29285),h=a(97256);const x={strip:["script"],clobberPrefix:"user-content-",clobber:["name","id"],ancestors:{tbody:["table"],tfoot:["table"],thead:["table"],td:["table"],th:["table"],tr:["table"]},protocols:{href:["http","https","mailto","xmpp","irc","ircs"],cite:["http","https"],src:["http","https"],longDesc:["http","https"]},tagNames:["h1","h2","h3","h4","h5","h6","br","b","i","strong","em","a","pre","code","img","tt","div","ins","del","sup","sub","p","ol","ul","table","thead","tbody","tfoot","blockquote","dl","dt","dd","kbd","q","samp","var","hr","ruby","rt","rp","li","tr","td","th","s","strike","summary","details","caption","figure","figcaption","abbr","bdo","cite","dfn","mark","small","span","time","wbr","input"],attributes:{a:["href"],img:["src","longDesc"],input:[["type","checkbox"],["disabled",!0]],li:[["className","task-list-item"]],div:["itemScope","itemType"],blockquote:["cite"],del:["cite"],ins:["cite"],q:["cite"],"*":["abbr","accept","acceptCharset","accessKey","action","align","alt","ariaDescribedBy","ariaHidden","ariaLabel","ariaLabelledBy","axis","border","cellPadding","cellSpacing","char","charOff","charSet","checked","clear","cols","colSpan","color","compact","coords","dateTime","dir","disabled","encType","htmlFor","frame","headers","height","hrefLang","hSpace","isMap","id","label","lang","maxLength","media","method","multiple","name","noHref","noShade","noWrap","open","prompt","readOnly","rel","rev","rows","rowSpan","rules","scope","selected","shape","size","span","start","summary","tabIndex","target","title","type","useMap","vAlign","value","vSpace","width","itemProp"]},required:{input:{type:"checkbox",disabled:!0}}},p={}.hasOwnProperty,y={root:{children:v},doctype:function(e){return e.allowDoctypes?{name:f}:void 0},comment:function(e){return e.allowComments?{value:j}:void 0},element:{tagName:w,properties:function(e,t,a,s){const n=w(e,a.tagName,a,s),r=e.attributes||{},i=e.required||{},o=t||{},l=Object.assign({},k(r["*"]),k(n&&p.call(r,n)?r[n]:[])),c={};let d;for(d in o)if(p.call(o,d)){let t,a=o[d];if(p.call(l,d))t=l[d];else{if(!C(d)||!p.call(l,"data*"))continue;t=l["data*"]}a=Array.isArray(a)?S(e,a,d,t):A(e,a,d,t),void 0!==a&&null!==a&&(c[d]=a)}if(n&&p.call(i,n))for(d in i[n])p.call(c,d)||(c[d]=i[n][d]);return c},children:v},text:{value:function(e,t){return"string"===typeof t?t:""}},"*":{data:N,position:N}};function b(e,t,a){const s=t&&t.type,n={type:t.type};let r;if(p.call(y,s)){let i=y[s];if("function"===typeof i&&(i=i(e,t)),i){const s=Object.assign({},i,y["*"]);let o;for(o in r=!0,s)if(p.call(s,o)){const i=s[o](e,t[o],t,a);!1===i?(r=void 0,n[o]=t[o]):void 0!==i&&null!==i&&(n[o]=i)}}}return r?n:"element"===n.type&&e.strip&&!e.strip.includes(n.tagName)?n.children:void 0}function v(e,t,a,s){const n=[];if(Array.isArray(t)){let r=-1;for("element"===a.type&&s.push(a.tagName);++r<t.length;){const a=b(e,t[r],s);a&&(Array.isArray(a)?n.push(...a):n.push(a))}"element"===a.type&&s.pop()}return n}function f(){return"html"}function w(e,t,a,s){const n="string"===typeof t?t:"";let r=-1;if(!n||"*"===n||e.tagNames&&!e.tagNames.includes(n))return!1;if(e.ancestors&&p.call(e.ancestors,n)){for(;++r<e.ancestors[n].length;)if(s.includes(e.ancestors[n][r]))return n;return!1}return n}function j(e,t){const a="string"===typeof t?t:"",s=a.indexOf("--\x3e");return s<0?a:a.slice(0,s)}function N(e,t){return t}function S(e,t,a,s){let n=-1;const r=[];for(;++n<t.length;){const i=A(e,t[n],a,s);void 0!==i&&null!==i&&r.push(i)}return r}function A(e,t,a,s){if(("boolean"===typeof t||"number"===typeof t||"string"===typeof t)&&function(e,t,a){const s=String(t),n=s.indexOf(":"),r=s.indexOf("?"),i=s.indexOf("#"),o=s.indexOf("/"),l=e.protocols&&p.call(e.protocols,a)?e.protocols[a].concat():[];let c=-1;if(0===l.length||n<0||o>-1&&n>o||r>-1&&n>r||i>-1&&n>i)return!0;for(;++c<l.length;)if(n===l[c].length&&s.slice(0,l[c].length)===l[c])return!0;return!1}(e,t,a)&&(0===s.length||s.some(e=>e&&"object"===typeof e&&"flags"in e?e.test(String(t)):e===t)))return e.clobberPrefix&&e.clobber&&e.clobber.includes(a)?e.clobberPrefix+t:t}function k(e){const t={};let a=-1;for(;++a<e.length;){const s=e[a];Array.isArray(s)?t[s[0]]=s.slice(1):t[s]=[]}return t}function C(e){return e.length>4&&"data"===e.slice(0,4).toLowerCase()}function I(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x;return t=>function(e,t){let a={type:"root",children:[]};if(e&&"object"===typeof e&&e.type){const s=b(Object.assign({},x,t||{}),e,[]);s&&(Array.isArray(s)?1===s.length?a=s[0]:a.children=s:a=s)}return a}(t,e)}var D=a(70579);const O="\n  .chart-3d-container {\n    perspective: 1200px;\n    perspective-origin: center center;\n    transform-style: preserve-3d;\n  }\n  \n  .chart-3d-surface {\n    transform: rotateX(15deg) rotateY(-8deg) translateZ(20px);\n    box-shadow: \n      0 25px 50px -12px rgba(0, 0, 0, 0.4),\n      0 0 0 1px rgba(255, 255, 255, 0.1),\n      inset 0 1px 0 rgba(255, 255, 255, 0.2);\n    border-radius: 12px;\n    background: linear-gradient(145deg, \n      rgba(255, 255, 255, 0.1), \n      rgba(255, 255, 255, 0.05));\n    backdrop-filter: blur(10px);\n    border: 1px solid rgba(255, 255, 255, 0.2);\n    transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);\n  }\n  \n  .chart-3d-surface:hover {\n    transform: rotateX(10deg) rotateY(-5deg) translateZ(40px) scale(1.02);\n    box-shadow: \n      0 35px 70px -12px rgba(0, 0, 0, 0.5),\n      0 0 0 1px rgba(255, 255, 255, 0.15),\n      inset 0 1px 0 rgba(255, 255, 255, 0.3);\n  }\n  \n  .chart-hologram {\n    position: relative;\n    overflow: hidden;\n  }\n  \n  .chart-hologram::before {\n    content: '';\n    position: absolute;\n    top: -50%;\n    left: -50%;\n    width: 200%;\n    height: 200%;\n    background: linear-gradient(\n      45deg,\n      transparent,\n      rgba(0, 255, 255, 0.1),\n      transparent,\n      rgba(255, 0, 255, 0.1),\n      transparent\n    );\n    animation: hologram-scan 4s linear infinite;\n    pointer-events: none;\n    z-index: 1;\n  }\n  \n  @keyframes hologram-scan {\n    0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }\n    100% { transform: translateX(100%) translateY(100%) rotate(45deg); }\n  }\n  \n  .metric-cube {\n    transform-style: preserve-3d;\n    animation: rotate-cube 8s linear infinite;\n  }\n  \n  @keyframes rotate-cube {\n    0% { transform: rotateX(0deg) rotateY(0deg); }\n    25% { transform: rotateX(90deg) rotateY(0deg); }\n    50% { transform: rotateX(90deg) rotateY(90deg); }\n    75% { transform: rotateX(0deg) rotateY(90deg); }\n    100% { transform: rotateX(0deg) rotateY(0deg); }\n  }\n  \n  .neural-network {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    pointer-events: none;\n    opacity: 0.3;\n  }\n  \n  .neural-node {\n    position: absolute;\n    width: 8px;\n    height: 8px;\n    border-radius: 50%;\n    background: radial-gradient(circle, #00ff88, #0066ff);\n    animation: pulse-node 2s ease-in-out infinite;\n  }\n  \n  @keyframes pulse-node {\n    0%, 100% { transform: scale(1); opacity: 0.7; }\n    50% { transform: scale(1.5); opacity: 1; }\n  }\n  \n  .data-stream {\n    position: absolute;\n    width: 2px;\n    height: 100px;\n    background: linear-gradient(to bottom, #00ff88, transparent);\n    animation: data-flow 1.5s linear infinite;\n  }\n  \n  @keyframes data-flow {\n    0% { transform: translateY(-100px); opacity: 0; }\n    50% { opacity: 1; }\n    100% { transform: translateY(100px); opacity: 0; }\n  }\n";function E(e){var t;let{data:a,darkMode:s}=e;const r=(0,n.useRef)(null);return(0,n.useEffect)(()=>{r.current&&(r.current.style.animation="rotate-globe 20s linear infinite")},[]),(0,D.jsxs)("div",{className:"relative w-full h-64 flex items-center justify-center",children:[(0,D.jsx)("style",{children:"\n        @keyframes rotate-globe {\n          0% { transform: rotateY(0deg) rotateX(10deg); }\n          100% { transform: rotateY(360deg) rotateX(10deg); }\n        }\n        .globe-sphere {\n          width: 200px;\n          height: 200px;\n          border-radius: 50%;\n          background: radial-gradient(circle at 30% 30%, \n            rgba(0, 255, 136, 0.8), \n            rgba(0, 102, 255, 0.6), \n            rgba(128, 0, 255, 0.4));\n          position: relative;\n          transform-style: preserve-3d;\n          box-shadow: \n            inset -20px -20px 50px rgba(0, 0, 0, 0.5),\n            0 0 50px rgba(0, 255, 136, 0.3);\n        }\n        .globe-overlay {\n          position: absolute;\n          inset: 0;\n          border-radius: 50%;\n          background: \n            repeating-conic-gradient(from 0deg, \n              transparent 0deg, \n              rgba(255, 255, 255, 0.1) 15deg, \n              transparent 30deg),\n            repeating-linear-gradient(0deg, \n              transparent 0px, \n              rgba(255, 255, 255, 0.05) 10px, \n              transparent 20px);\n        }\n      "}),(0,D.jsxs)("div",{ref:r,className:"globe-sphere",children:[(0,D.jsx)("div",{className:"globe-overlay"}),null===(t=a.systems)||void 0===t?void 0:t.map((e,t)=>(0,D.jsx)("div",{className:"absolute w-4 h-4 rounded-full",style:{background:e.score>70?"#00ff88":e.score>40?"#ffaa00":"#ff4444",top:"".concat(20+25*t,"%"),left:"".concat(30+30*Math.sin(t),"%"),boxShadow:"0 0 15px ".concat(e.score>70?"#00ff88":e.score>40?"#ffaa00":"#ff4444"),animation:"pulse-node ".concat(1+.3*t,"s ease-in-out infinite")},title:"".concat(e.name,": ").concat(e.score,"%")},e.name))]}),(0,D.jsxs)("div",{className:"absolute bottom-4 text-center text-sm ".concat(s?"text-gray-300":"text-gray-600"),children:[(0,D.jsx)("div",{className:"font-semibold",children:"Organizational Health Universe"}),(0,D.jsx)("div",{className:"text-xs",children:"Real-time system interconnections"})]})]})}function _(e){var t;let{data:a,darkMode:s}=e;return(0,D.jsxs)("div",{className:"relative w-full h-80",children:[(0,D.jsx)("style",{children:"\n        .matrix-grid {\n          perspective: 1000px;\n          transform-style: preserve-3d;\n        }\n        .matrix-cell {\n          transform-style: preserve-3d;\n          transition: all 0.3s ease;\n        }\n        .matrix-cell:hover {\n          transform: translateZ(20px) scale(1.1);\n        }\n      "}),(0,D.jsx)("div",{className:"matrix-grid h-full grid grid-cols-3 gap-4 p-4",children:null===(t=a.systems)||void 0===t?void 0:t.slice(0,6).map((e,t)=>(0,D.jsxs)("div",{className:"matrix-cell relative rounded-lg p-4 ".concat(s?"bg-gray-800/50":"bg-white/50"," backdrop-blur-sm border border-white/20"),style:{transform:"rotateX(".concat(10+5*t,"deg) rotateY(").concat(3*t-5,"deg) translateZ(").concat(10*t,"px)"),background:"linear-gradient(135deg, \n                hsla(".concat(120+2*e.score,", 70%, 50%, 0.2), \n                hsla(").concat(240-e.score,", 70%, 50%, 0.1))")},children:[(0,D.jsxs)("div",{className:"text-lg font-bold text-center mb-2",children:[e.score,"%"]}),(0,D.jsx)("div",{className:"text-xs text-center opacity-80",children:e.name}),(0,D.jsx)("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2",children:(0,D.jsx)("div",{className:"w-2 bg-gradient-to-t from-blue-500 to-cyan-400",style:{height:"".concat(e.score,"px"),transform:"rotateX(90deg)",transformOrigin:"bottom"}})})]},e.name))})]})}function T(e){let{data:t,darkMode:a}=e;return(0,D.jsxs)("div",{className:"relative w-full h-64 flex items-center justify-center",children:[(0,D.jsx)("style",{children:"\n        .pyramid {\n          width: 0;\n          height: 0;\n          border-left: 100px solid transparent;\n          border-right: 100px solid transparent;\n          border-bottom: 150px solid rgba(0, 255, 136, 0.6);\n          position: relative;\n          transform: rotateX(20deg) rotateY(20deg);\n          transform-style: preserve-3d;\n          animation: pyramid-rotate 10s linear infinite;\n        }\n        @keyframes pyramid-rotate {\n          0% { transform: rotateX(20deg) rotateY(0deg); }\n          100% { transform: rotateX(20deg) rotateY(360deg); }\n        }\n        .pyramid-level {\n          position: absolute;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-weight: bold;\n          color: white;\n          text-shadow: 0 0 10px rgba(0, 0, 0, 0.8);\n        }\n      "}),(0,D.jsxs)("div",{className:"pyramid",children:[(0,D.jsx)("div",{className:"pyramid-level",style:{width:"60px",height:"20px",background:"rgba(255, 68, 68, 0.8)",bottom:"120px",left:"50%",transform:"translateX(-50%)"},children:"Critical"}),(0,D.jsx)("div",{className:"pyramid-level",style:{width:"80px",height:"25px",background:"rgba(255, 170, 0, 0.8)",bottom:"80px",left:"50%",transform:"translateX(-50%)"},children:"Improving"}),(0,D.jsx)("div",{className:"pyramid-level",style:{width:"100px",height:"30px",background:"rgba(0, 255, 136, 0.8)",bottom:"40px",left:"50%",transform:"translateX(-50%)"},children:"Excellent"})]}),(0,D.jsxs)("div",{className:"absolute bottom-0 text-center text-sm ".concat(a?"text-gray-300":"text-gray-600"),children:[(0,D.jsx)("div",{className:"font-semibold",children:"Performance Hierarchy"}),(0,D.jsx)("div",{className:"text-xs",children:"System excellence distribution"})]})]})}function R(e){var t,a;let{visualType:r="globe",data:i={},darkMode:o=!1,title:l="3D Analysis",interactive:c=!0}=e;const[d,m]=(0,n.useState)(r),[g,u]=(0,n.useState)(i),h=(0,n.useRef)(null);(0,n.useEffect)(()=>{const e=e=>{e.detail&&e.detail.assessments&&u(e=>(0,s.A)((0,s.A)({},e),{},{lastUpdated:(new Date).toISOString(),isLive:!0}))};window.addEventListener("assessmentDataUpdated",e);const t=e=>{"conseqx_assessments_v1"!==e.key&&"conseqx_uploads_v1"!==e.key||u(e=>(0,s.A)((0,s.A)({},e),{},{lastUpdated:(new Date).toISOString(),isLive:!0}))};return window.addEventListener("storage",t),()=>{window.removeEventListener("assessmentDataUpdated",e),window.removeEventListener("storage",t)}},[]),(0,n.useEffect)(()=>{m(r)},[r]);const x={systems:[{name:"Interdependency",score:78,trend:"up",source:"assessment"},{name:"Iteration",score:65,trend:"stable",source:"upload"},{name:"Investigation",score:82,trend:"up",source:"assessment"},{name:"Interpretation",score:59,trend:"down",source:"estimated"},{name:"Illustration",score:74,trend:"up",source:"upload"},{name:"Alignment",score:68,trend:"stable",source:"assessment"}],overall_health:71,timestamp:(new Date).toISOString(),total_systems:6,critical_systems:1,excellent_systems:2,improving_systems:3,data_sources:{assessments:3,uploads:2,estimated:1,default:0}},p=(0,s.A)((0,s.A)((0,s.A)({},x),i),g);return(0,D.jsxs)("div",{className:"w-full my-4",children:[(0,D.jsx)("style",{children:O}),(0,D.jsxs)("div",{className:"chart-3d-container ".concat(o?"bg-gray-900/30":"bg-white/30"," rounded-xl p-4"),children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,D.jsx)("h3",{className:"text-lg font-semibold ".concat(o?"text-gray-100":"text-gray-900"),children:l}),c&&(0,D.jsxs)("div",{className:"flex gap-2",children:[(0,D.jsx)("button",{onClick:()=>m("globe"),className:"px-3 py-1 rounded text-xs ".concat("globe"===d?"bg-blue-500 text-white":o?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-600"),children:"Globe"}),(0,D.jsx)("button",{onClick:()=>m("matrix"),className:"px-3 py-1 rounded text-xs ".concat("matrix"===d?"bg-blue-500 text-white":o?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-600"),children:"Matrix"}),(0,D.jsx)("button",{onClick:()=>m("pyramid"),className:"px-3 py-1 rounded text-xs ".concat("pyramid"===d?"bg-blue-500 text-white":o?"bg-gray-700 text-gray-300":"bg-gray-200 text-gray-600"),children:"Pyramid"})]})]}),(0,D.jsxs)("div",{ref:h,className:"chart-3d-surface chart-hologram relative",children:[(()=>{switch(d){case"globe":default:return(0,D.jsx)(E,{data:p,darkMode:o});case"matrix":return(0,D.jsx)(_,{data:p,darkMode:o});case"pyramid":return(0,D.jsx)(T,{data:p,darkMode:o})}})(),(0,D.jsxs)("div",{className:"neural-network",children:[[...Array(8)].map((e,t)=>(0,D.jsx)("div",{className:"neural-node",style:{top:"".concat(80*Math.random()+10,"%"),left:"".concat(80*Math.random()+10,"%"),animationDelay:"".concat(.3*t,"s")}},t)),[...Array(4)].map((e,t)=>(0,D.jsx)("div",{className:"data-stream",style:{left:"".concat(20+20*t,"%"),animationDelay:"".concat(.5*t,"s")}},"stream-".concat(t)))]})]}),(0,D.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,D.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,D.jsxs)("div",{className:"text-center p-3 rounded-lg ".concat(o?"bg-gray-800/50":"bg-white/50"," backdrop-blur-sm border ").concat(o?"border-gray-700/30":"border-gray-200/30"),children:[(0,D.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-1",children:[(0,D.jsxs)("div",{className:"text-2xl font-bold text-green-400",children:[p.overall_health,"%"]}),p.isLive&&(0,D.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]}),(0,D.jsxs)("div",{className:"text-xs ".concat(o?"text-gray-400":"text-gray-600"),children:["Overall Health ",p.isLive?"\u2022 Live":""]})]}),(0,D.jsxs)("div",{className:"text-center p-3 rounded-lg ".concat(o?"bg-gray-800/50":"bg-white/50"," backdrop-blur-sm border ").concat(o?"border-gray-700/30":"border-gray-200/30"),children:[(0,D.jsx)("div",{className:"text-2xl font-bold text-blue-400",children:p.total_systems||(null===(t=p.systems)||void 0===t?void 0:t.length)||6}),(0,D.jsx)("div",{className:"text-xs ".concat(o?"text-gray-400":"text-gray-600"),children:"Systems Active"})]}),(0,D.jsxs)("div",{className:"text-center p-3 rounded-lg ".concat(o?"bg-gray-800/50":"bg-white/50"," backdrop-blur-sm border ").concat(o?"border-gray-700/30":"border-gray-200/30"),children:[(0,D.jsx)("div",{className:"text-2xl font-bold text-purple-400",children:p.improving_systems||(null===(a=p.systems)||void 0===a?void 0:a.filter(e=>"up"===e.trend).length)||3}),(0,D.jsx)("div",{className:"text-xs ".concat(o?"text-gray-400":"text-gray-600"),children:"Improving"})]})]}),p.data_sources&&(0,D.jsxs)("div",{className:"p-3 rounded-lg ".concat(o?"bg-gray-800/30":"bg-white/30"," backdrop-blur-sm border ").concat(o?"border-gray-700/30":"border-gray-200/30"),children:[(0,D.jsx)("div",{className:"text-xs font-medium mb-2 ".concat(o?"text-gray-300":"text-gray-600"),children:"Data Sources"}),(0,D.jsxs)("div",{className:"grid grid-cols-4 gap-2",children:[(0,D.jsxs)("div",{className:"text-center",children:[(0,D.jsx)("div",{className:"text-sm font-bold ".concat(o?"text-emerald-400":"text-emerald-600"),children:p.data_sources.assessments||0}),(0,D.jsx)("div",{className:"text-xs ".concat(o?"text-gray-400":"text-gray-500"),children:"Assessed"})]}),(0,D.jsxs)("div",{className:"text-center",children:[(0,D.jsx)("div",{className:"text-sm font-bold ".concat(o?"text-blue-400":"text-blue-600"),children:p.data_sources.uploads||0}),(0,D.jsx)("div",{className:"text-xs ".concat(o?"text-gray-400":"text-gray-500"),children:"Uploaded"})]}),(0,D.jsxs)("div",{className:"text-center",children:[(0,D.jsx)("div",{className:"text-sm font-bold ".concat(o?"text-amber-400":"text-amber-600"),children:p.data_sources.estimated||0}),(0,D.jsx)("div",{className:"text-xs ".concat(o?"text-gray-400":"text-gray-500"),children:"Estimated"})]}),(0,D.jsxs)("div",{className:"text-center",children:[(0,D.jsx)("div",{className:"text-sm font-bold ".concat(o?"text-purple-400":"text-purple-600"),children:(p.critical_systems||0)+(p.excellent_systems||0)}),(0,D.jsx)("div",{className:"text-xs ".concat(o?"text-gray-400":"text-gray-500"),children:"Key Systems"})]})]})]}),(0,D.jsx)("div",{className:"text-center",children:(0,D.jsxs)("div",{className:"text-xs ".concat(o?"text-gray-400":"text-gray-500"),children:["Last updated: ",p.lastUpdated?new Date(p.lastUpdated).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):new Date(p.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})})]})]})]})}function L(e){let{darkMode:t}=e;const a="h-2 w-2 rounded-full animate-pulse ".concat(t?"bg-gray-500":"bg-gray-400");return(0,D.jsxs)("div",{className:"flex items-center gap-2 text-sm ".concat(t?"text-gray-400":"text-gray-500"),children:[(0,D.jsx)("div",{className:a}),(0,D.jsx)("div",{className:"".concat(a," delay-75")}),(0,D.jsx)("div",{className:"".concat(a," delay-150")})]})}function P(e){let{m:t,darkMode:a}=e;const s="user"===t.role,n=!s&&(t.visualization3D||t.includeVisualization||t.text&&(t.text.toLowerCase().includes("3d")||t.text.toLowerCase().includes("visual")||t.text.toLowerCase().includes("chart")||t.text.toLowerCase().includes("analysis")||t.text.toLowerCase().includes("organizational health")||t.text.toLowerCase().includes("system scores")));!s&&t.text&&t.text.includes("3D Visual Analysis")&&console.log("3D Message Debug:",{messageId:t.id,visualization3D:t.visualization3D,visualData:t.visualData,visualType:t.visualType,shouldShow3D:n,textIncludes3D:t.text.toLowerCase().includes("3d")});return(0,D.jsx)("div",{className:"flex ".concat(s?"justify-end":"justify-start"," my-3"),children:(0,D.jsxs)("div",{className:"flex flex-col ".concat(s?"items-end":"items-start"," min-w-0 w-full"),children:[(0,D.jsxs)("div",{className:"".concat(s?"bg-blue-600 text-white rounded-xl max-w-[90%] px-4 py-2 shadow-md break-words":a?"bg-gray-700 text-gray-100 rounded-xl max-w-[95%] px-4 py-2 shadow-sm border border-gray-700 break-words":"bg-gradient-to-r from-gray-50 to-white border border-gray-100 text-gray-900 rounded-xl max-w-[95%] px-4 py-2 shadow-sm break-words"),children:[(0,D.jsx)("div",{className:"text-sm whitespace-pre-wrap",children:(0,D.jsx)(g.oz,{remarkPlugins:[u.A],rehypePlugins:[h.A,I],children:t.text})}),n&&(0,D.jsx)(R,{visualType:t.visualType||"globe",data:t.visualData||{},darkMode:a,title:t.visualTitle||"Real-time 3D Analysis",interactive:!0}),t.file&&(0,D.jsx)("div",{className:"mt-2 text-xs",children:(0,D.jsx)("a",{href:t.file.url,target:"_blank",rel:"noreferrer",className:"underline",children:t.file.name})})]}),(0,D.jsx)("div",{className:"text-[11px] mt-2 ".concat(a?"text-gray-400":"text-gray-500"),children:new Date(t.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})})}function M(e){let{onSend:t,darkMode:a,onAttachClick:s,textareaRef:r,textValue:o,setTextValue:l,uploadedFile:c,setUploadedFile:d,onTyping:m}=e;return(0,n.useEffect)(()=>{if(!r.current)return;const e=r.current;e.style.height="auto";const t=Math.min(e.scrollHeight,220);e.style.height="".concat(t,"px")},[o,r]),(0,D.jsxs)("div",{className:"p-3 border-t ".concat(a?"border-gray-700 bg-gray-800":"border-gray-200 bg-white"),style:{boxShadow:a?"0 -2px 8px rgba(0,0,0,0.6)":"0 -2px 8px rgba(0,0,0,0.04)"},children:[c&&(0,D.jsx)("div",{className:"mb-3 p-3 rounded-md border ".concat(a?"bg-gray-900 border-gray-700 text-gray-100":"bg-gray-50 border-gray-100 text-gray-900"),children:(0,D.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,D.jsxs)("div",{className:"min-w-0",children:[(0,D.jsx)("div",{className:"font-medium truncate",children:c.name}),(0,D.jsxs)("div",{className:"text-xs text-gray-400",children:[(c.size/1024).toFixed(1)," KB"]})]}),(0,D.jsx)("div",{className:"flex items-center gap-2",children:(0,D.jsx)("button",{className:"px-3 py-1 rounded-md border",onClick:()=>d(null),"aria-label":"Remove file",children:"x"})})]})}),(0,D.jsxs)("div",{className:"flex items-end gap-2 min-w-0",children:[(0,D.jsx)("textarea",{ref:r,value:o,onChange:e=>{l(e.target.value),m&&m()},onKeyDown:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),o&&o.trim()&&(t(o.trim()),l("")))},placeholder:"Ask X-ULTRA anything...",className:"flex-1 min-w-0 resize-none rounded-lg px-4 py-3 border hide-scrollbar ".concat(a?"border-gray-700 bg-gray-900 text-gray-100":"border-gray-200 bg-gray-50 text-gray-900"," outline-none focus:ring-2 focus:ring-indigo-200"),rows:1,"aria-label":"Chat input",style:{maxHeight:220}}),(0,D.jsx)("div",{className:"flex flex-col items-end",children:(0,D.jsx)("button",{onClick:()=>{o&&o.trim()&&(t(o.trim()),l(""))},"aria-label":"Send",className:"p-2 rounded-md ".concat(o.trim()?"bg-indigo-600 text-white":"bg-gray-200 text-gray-500"),style:{width:36,height:36},children:(0,D.jsx)(i.Cer,{size:14})})})]}),(0,D.jsxs)("div",{className:"mt-3 flex items-center gap-3 flex-wrap",children:[(0,D.jsxs)("button",{onClick:s,"aria-label":"Attach file",className:"flex items-center gap-2 px-3 py-2 rounded-md border ".concat(a?"border-gray-700 text-gray-100 bg-gray-800":"border-gray-200 text-gray-800 bg-white"),children:[(0,D.jsx)(i.EHs,{})," ",(0,D.jsx)("span",{className:"text-sm",children:"Upload Document"})]}),(0,D.jsxs)("button",{onClick:()=>{const e=["Show me a 3D visualization of our organizational health","Display a 3D matrix of system performance","Create a 3D pyramid view of our performance hierarchy"],t=e[Math.floor(Math.random()*e.length)];l(t)},"aria-label":"3D Visualization",className:"flex items-center gap-2 px-3 py-2 rounded-md border ".concat(a?"border-blue-600 text-blue-400 bg-blue-900/20":"border-blue-300 text-blue-600 bg-blue-50"),children:[(0,D.jsx)(i.$ZR,{})," ",(0,D.jsx)("span",{className:"text-sm",children:"3D Visual"})]}),(0,D.jsxs)("button",{onClick:()=>{l("Provide a comprehensive organizational health analysis with visual charts")},"aria-label":"Quick Analysis",className:"flex items-center gap-2 px-3 py-2 rounded-md border ".concat(a?"border-green-600 text-green-400 bg-green-900/20":"border-green-300 text-green-600 bg-green-50"),children:[(0,D.jsx)(i.YYR,{})," ",(0,D.jsx)("span",{className:"text-sm",children:"Analysis"})]}),(0,D.jsx)("div",{className:"text-xs ".concat(a?"text-gray-400":"text-gray-500"),children:"PDF, DOCX \u2022 3D Visualizations \u2022 Real-time Analytics"})]})]})}function z(){var e,t;const{darkMode:a}=(0,r.KC)(),x=(0,o.A)(),p=(0,l.hV)(),y=(0,r.Zp)();(0,n.useEffect)(()=>{console.log("\ud83d\udd0d ENVIRONMENT DEBUG:"),console.log("- process.env REACT_APP keys:",Object.keys({NODE_ENV:"production",PUBLIC_URL:"/ConseQ-X-landing",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OPENROUTER_KEY:"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"}).filter(e=>e.startsWith("REACT_APP"))),console.log("- API Key from env:","Present"),console.log("- API Key length:",73),console.log("- All REACT_APP vars:",Object.keys({NODE_ENV:"production",PUBLIC_URL:"/ConseQ-X-landing",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OPENROUTER_KEY:"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"}).filter(e=>e.startsWith("REACT_APP")).map(e=>({[e]:{NODE_ENV:"production",PUBLIC_URL:"/ConseQ-X-landing",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OPENROUTER_KEY:"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"}[e]?"SET":"UNSET"}))),window.testAPI=async()=>{const e="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";console.log("\ud83e\uddea MANUAL API TEST:"),console.log("- API Key available:",!0),console.log("- API Key value (first 10 chars):",e?e.substring(0,10)+"...":"None");try{const t=await fetch("https://openrouter.ai/api/v1/chat/completions",{method:"POST",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json","HTTP-Referer":window.location.origin,"X-Title":"CEO Assessment Chat"},body:JSON.stringify({model:"openai/gpt-3.5-turbo",messages:[{role:"user",content:"Test message"}],max_tokens:100})});console.log("\ud83d\udce1 API Response status:",t.status);const a=await t.json();console.log("\ud83d\udce1 API Response data:",a)}catch(t){console.log("\u274c API Test Error:",t)}},console.log("\ud83d\udca1 Run window.testAPI() in console to test API connection manually")},[]);const[b,v]=(0,n.useState)("c1"),[f,w]=(0,n.useState)([{id:"m0",role:"system",text:"Hello! I'm X-ULTRA, your premium Executive Intelligence Analyst. How can I assist you with strategic insights today?",timestamp:(new Date).toISOString()}]),[j,N]=(0,n.useState)(()=>{try{const e=localStorage.getItem("conseqx_conversations_v1");if(e)return JSON.parse(e)}catch(e){console.warn("Failed to load conversations from localStorage:",e)}return[{id:"c1",title:"Executive Summary Chat",lastMessage:"Show me a 3D visualization of our organizational health with predictive analytics for Q4 planning",timestamp:new Date(Date.now()-18e5).toISOString(),type:"executive",hasVisualization:!0,messageCount:12,lastActivity:new Date(Date.now()-9e5).toISOString()},{id:"c2",title:"Financial Health Review",lastMessage:"Create a 3D matrix analysis of revenue streams and cost optimization opportunities",timestamp:new Date(Date.now()-72e5).toISOString(),type:"financial",hasVisualization:!0,messageCount:8,lastActivity:new Date(Date.now()-27e5).toISOString()},{id:"c3",title:"System Performance Deep Dive",lastMessage:"Generate performance pyramid showing critical system interdependencies",timestamp:new Date(Date.now()-144e5).toISOString(),type:"analytics",hasVisualization:!0,messageCount:15,lastActivity:new Date(Date.now()-72e5).toISOString()},{id:"c4",title:"Strategic Planning Session",lastMessage:"What are the key organizational health metrics for board presentation?",timestamp:new Date(Date.now()-864e5).toISOString(),type:"strategic",hasVisualization:!1,messageCount:5,lastActivity:new Date(Date.now()-108e5).toISOString()}]});(0,n.useEffect)(()=>{f.length>1&&N(e=>e.map(e=>{if(e.id===b){const t=f[f.length-1],a=f.some(e=>e.visualization3D);return(0,s.A)((0,s.A)({},e),{},{lastActivity:(new Date).toISOString(),messageCount:f.length,lastMessage:"user"===(null===t||void 0===t?void 0:t.role)?t.text:e.lastMessage,hasVisualization:a||e.hasVisualization})}return e}))},[f,b]),(0,n.useEffect)(()=>{try{localStorage.setItem("conseqx_conversations_v1",JSON.stringify(j))}catch(e){console.warn("Failed to save conversations to localStorage:",e)}},[j]),(0,n.useEffect)(()=>{try{const e=localStorage.getItem("conseqx_messages_".concat(b,"_v1"));w(e?JSON.parse(e):[{id:"m0-".concat(b),role:"system",text:"Hello! I'm X-ULTRA, your premium Executive Intelligence Analyst. How can I assist you with strategic insights today?",timestamp:(new Date).toISOString()}])}catch(e){console.warn("Failed to load messages for conversation:",e),w([{id:"m0-".concat(b),role:"system",text:"Hello! I'm X-ULTRA, your premium Executive Intelligence Analyst. How can I assist you with strategic insights today?",timestamp:(new Date).toISOString()}])}},[b]),(0,n.useEffect)(()=>{try{localStorage.setItem("conseqx_messages_".concat(b,"_v1"),JSON.stringify(f))}catch(e){console.warn("Failed to save messages to localStorage:",e)}},[f,b]);const[S,A]=(0,n.useState)(!1),[k,C]=(0,n.useState)(!1),[O,E]=(0,n.useState)(()=>{try{const e=localStorage.getItem("conseqx_analysis_archive_v1");return e?JSON.parse(e):[]}catch(e){return console.warn("Failed to load analysis archive:",e),[]}}),[_,T]=(0,n.useState)("All"),R=(e,t)=>{if(!e||"assistant"!==e.role)return null;const a=e.text.toLowerCase(),s=(new Date).toISOString();return a.includes("revenue")||a.includes("financial")||a.includes("cost")||a.includes("profit")||a.includes("budget")||a.includes("roi")?{id:"analysis_".concat(t,"_").concat(Date.now()),title:"Financial Performance Analysis",category:"Financial",type:"critical",summary:z(e.text),content:e.text,timestamp:s,messageId:t,downloadable:!0,priority:Y(a)}:a.includes("strategic")||a.includes("planning")||a.includes("roadmap")||a.includes("objectives")||a.includes("goals")?{id:"analysis_".concat(t,"_").concat(Date.now()),title:"Strategic Planning Insights",category:"Strategic",type:"strategic",summary:U(e.text),content:e.text,timestamp:s,messageId:t,downloadable:!0,priority:Y(a)}:a.includes("3d")||a.includes("visualization")||a.includes("interactive")||e.visualization3D?{id:"analysis_".concat(t,"_").concat(Date.now()),title:"3D Interactive Analysis",category:"3D Reports",type:"interactive",summary:"3D visualization with interactive data exploration capabilities",content:e.text,timestamp:s,messageId:t,downloadable:!0,priority:"High",isInteractive:!0}:a.includes("operational")||a.includes("efficiency")||a.includes("process")||a.includes("performance")||a.includes("optimization")?{id:"analysis_".concat(t,"_").concat(Date.now()),title:"Operational Excellence Analysis",category:"Operational",type:"operational",summary:H(e.text),content:e.text,timestamp:s,messageId:t,downloadable:!0,priority:Y(a)}:a.includes("risk")||a.includes("compliance")||a.includes("security")||a.includes("threat")||a.includes("vulnerability")?{id:"analysis_".concat(t,"_").concat(Date.now()),title:"Risk Assessment Analysis",category:"Risk",type:"risk",summary:X(e.text),content:e.text,timestamp:s,messageId:t,downloadable:!0,priority:"High Priority"}:a.length>200&&(a.includes("analysis")||a.includes("insights")||a.includes("recommendations"))?{id:"analysis_".concat(t,"_").concat(Date.now()),title:"X-ULTRA Executive Intelligence Brief",category:"Strategic",type:"executive",summary:F(e.text),content:e.text,timestamp:s,messageId:t,downloadable:!0,priority:"Medium"}:null},z=e=>{const t=[];return e.toLowerCase().includes("revenue")&&t.push("Revenue analysis"),e.toLowerCase().includes("cost")&&t.push("Cost optimization"),e.toLowerCase().includes("profit")&&t.push("Profitability metrics"),e.toLowerCase().includes("roi")&&t.push("ROI calculations"),t.length>0?t.join(", ")+" identified":"Financial performance metrics and recommendations"},U=e=>{const t=[];return e.toLowerCase().includes("planning")&&t.push("Strategic planning"),e.toLowerCase().includes("roadmap")&&t.push("Roadmap development"),e.toLowerCase().includes("objectives")&&t.push("Objective alignment"),t.length>0?t.join(", ")+" covered":"Strategic direction and planning recommendations"},H=e=>{const t=[];return e.toLowerCase().includes("efficiency")&&t.push("Efficiency improvements"),e.toLowerCase().includes("process")&&t.push("Process optimization"),e.toLowerCase().includes("performance")&&t.push("Performance metrics"),t.length>0?t.join(", ")+" analyzed":"Operational excellence recommendations"},X=e=>{const t=[];return e.toLowerCase().includes("security")&&t.push("Security assessment"),e.toLowerCase().includes("compliance")&&t.push("Compliance review"),e.toLowerCase().includes("risk")&&t.push("Risk evaluation"),t.length>0?t.join(", ")+" completed":"Risk assessment and mitigation strategies"},F=e=>e.substring(0,120)+(e.length>120?"...":""),Y=e=>e.includes("critical")||e.includes("urgent")||e.includes("immediate")?"Critical":e.includes("important")||e.includes("significant")||e.includes("priority")?"High Priority":"Medium",V=e=>{e&&E(t=>{const a=[e,...t].slice(0,50);try{localStorage.setItem("conseqx_analysis_archive_v1",JSON.stringify(a))}catch(s){console.warn("Failed to save analysis archive:",s)}return a})},K=(0,n.useMemo)(()=>"All"===_?O:O.filter(e=>e.category===_),[O,_]),q=e=>({Financial:["financialHealth"],Strategic:["strategicAlignment"],Operational:["operationalEfficiency"],Risk:["riskLevel"],"3D Reports":["overallHealth"]}[e]||[]),B=e=>{const{category:t,priority:a,content:s}=e;if("Financial"===t){const e="Critical"===a?-2:"High Priority"===a?1:.5;p.updateMetricFromChat("financialHealth",{score:Math.min(100,p.sharedMetrics.financialHealth.score+e),trend:e>0?"+".concat(e,"%"):"".concat(e,"%")})}else if("Strategic"===t){const e="Critical"===a?-1:"High Priority"===a?1.5:1;p.updateMetricFromChat("strategicAlignment",{score:Math.min(100,p.sharedMetrics.strategicAlignment.score+e),trend:e>0?"+".concat(e,"%"):"".concat(e,"%")})}else if("Operational"===t){const e="Critical"===a?-1.5:"High Priority"===a?1:.8;p.updateMetricFromChat("operationalEfficiency",{score:Math.min(100,p.sharedMetrics.operationalEfficiency.score+e),trend:e>0?"+".concat(e,"%"):"".concat(e,"%")})}else if("Risk"===t){const e="Critical"===a?5:"High Priority"===a?-2:-1,t=p.sharedMetrics.riskLevel.score,s=Math.max(0,Math.min(100,t+e));p.updateMetricFromChat("riskLevel",{score:s,level:s<30?"Low":s<60?"Medium":"High",trend:e>0?"+".concat(e,"%"):"".concat(e,"%")})}},W=e=>{const t="\nX-ULTRA EXECUTIVE INTELLIGENCE REPORT\n=====================================\n\nTitle: ".concat(e.title,"\nCategory: ").concat(e.category,"\nPriority: ").concat(e.priority,"\nGenerated: ").concat(new Date(e.timestamp).toLocaleString(),"\n\nEXECUTIVE SUMMARY\n----------------\n").concat(e.summary,"\n\nDETAILED INTELLIGENCE ANALYSIS\n-----------------------------\n").concat(e.content,"\n\n---\nPowered by X-ULTRA Executive Intelligence\nConseQ-X CEO Assessment Platform\nReport ID: ").concat(e.id,"\n    ").trim(),a=new Blob([t],{type:"text/plain"}),s=URL.createObjectURL(a),n=document.createElement("a");n.href=s,n.download="".concat(e.title.replace(/[^a-zA-Z0-9]/g,"_"),"_").concat((new Date).toISOString().split("T")[0],".txt"),document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s)},G=(0,n.useRef)(null),J=(0,n.useRef)(null),Z=(0,n.useRef)(null),Q=(0,n.useRef)(null),[$,ee]=(0,n.useState)(""),[te,ae]=(0,n.useState)(null),se=(null===x||void 0===x||null===(e=x.org)||void 0===e?void 0:e.id)||"anon",[ne,re]=(0,n.useState)(()=>{try{const e=localStorage.getItem("conseqx_assessments_v1");return(e?JSON.parse(e):{})[se]||[]}catch(e){return[]}});(0,n.useEffect)(()=>{function e(){try{const e=localStorage.getItem("conseqx_assessments_v1"),t=e?JSON.parse(e):{};re(t[se]||[]);const a=new CustomEvent("assessmentDataUpdated",{detail:{assessments:t[se]||[],orgId:se}});window.dispatchEvent(a)}catch(e){}}const t=t=>{"conseqx_assessments_v1"!==t.key&&null!==t.key||e()};window.addEventListener("storage",t);const a=t=>{"conseqx_uploads_v1"!==t.key&&null!==t.key||e()};let s;window.addEventListener("storage",a);try{"BroadcastChannel"in window&&(s=new BroadcastChannel("conseqx_assessments"),s.addEventListener("message",t=>{var a,s;"assessments:update"===(null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.type)&&(null===t||void 0===t||null===(s=t.data)||void 0===s?void 0:s.orgId)===se&&e()}))}catch(r){}const n=setInterval(e,3e3);return e(),()=>{if(window.removeEventListener("storage",t),window.removeEventListener("storage",a),clearInterval(n),s)try{s.close()}catch(e){}}},[se]);const ie=(0,n.useMemo)(()=>{const e={};return ne.forEach(t=>{if(!t.systemId)return;const a=(0,c.Os)(t.systemId),n=e[a];(!n||(n.timestamp||0)<(t.timestamp||0))&&(e[a]=(0,s.A)((0,s.A)({},t),{},{systemId:a}))}),e},[ne]),oe=(0,n.useMemo)(()=>{const e={};return c.CO.forEach(t=>e[t.key]=t.title),e},[]),le=e=>{if(!e)return!1;return/\b(3d|visual|chart|graph|show|display|analyze|analysis|organizational health|system overview|dashboard|matrix|globe|pyramid)\b/i.test(e)},ce=()=>{const e={};Object.keys(ie).forEach(t=>{const a=ie[t],s=oe[t]||t;e[t]={name:s,score:(null===a||void 0===a?void 0:a.score)||0,trend:(null===a||void 0===a?void 0:a.score)>70?"up":(null===a||void 0===a?void 0:a.score)<40?"down":"stable",systemId:t,source:"assessment",timestamp:(null===a||void 0===a?void 0:a.timestamp)||(new Date).toISOString()}});try{const t=localStorage.getItem("conseqx_uploads_v1"),a=t?JSON.parse(t):[];if(a.length>0){const t=a[0];c.CO.forEach(a=>{if(!e[a.key]){const s=Array.isArray(t.analyzedSystems)&&t.analyzedSystems.includes(a.key);e[a.key]={name:a.title,score:s?Math.floor(60+30*Math.random()):Math.floor(30+40*Math.random()),trend:s?"up":"stable",systemId:a.key,source:s?"upload":"estimated",timestamp:t.timestamp||(new Date).toISOString()}}})}}catch(s){console.warn("Error loading upload data for 3D visualization:",s)}const t=c.CO.map(t=>e[t.key]||{name:t.title,score:Math.floor(40+30*Math.random()),trend:"stable",systemId:t.key,source:"default",timestamp:(new Date).toISOString()}),a=t.length>0?Math.round(t.reduce((e,t)=>e+t.score,0)/t.length):0;return{systems:t,overall_health:a,timestamp:(new Date).toISOString(),total_systems:t.length,critical_systems:t.filter(e=>e.score<40).length,excellent_systems:t.filter(e=>e.score>80).length,improving_systems:t.filter(e=>"up"===e.trend).length,data_sources:{assessments:t.filter(e=>"assessment"===e.source).length,uploads:t.filter(e=>"upload"===e.source).length,estimated:t.filter(e=>"estimated"===e.source).length,default:t.filter(e=>"default"===e.source).length}}};function de(e){A(!0);const t=e.toLowerCase(),a=Object.keys(ie),n=ce();let r=[];const i=["I'm here to help with your organizational health analysis! \ud83d\ude80","Let me analyze your current organizational performance...","Great question! Here's what I can see from your recent data:","Based on your organizational health metrics, here's my analysis:"];r.push(i[Math.floor(Math.random()*i.length)]),(t.includes("score")||t.includes("performance")||t.includes("health"))&&(r.push("\n\ud83d\udcca **Overall Organizational Health: ".concat(n.overall_health,"%**")),r.push("\u2022 Total Systems Analyzed: ".concat(n.total_systems)),r.push("\u2022 Critical Systems Needing Attention: ".concat(n.critical_systems)),r.push("\u2022 Systems Performing Excellently: ".concat(n.excellent_systems)),r.push("\u2022 Systems Currently Improving: ".concat(n.improving_systems))),(t.includes("system")||t.includes("department"))&&(r.push("\n\ud83c\udfe2 **Key System Performance:**"),n.systems.slice(0,5).forEach(e=>{const t=e.score>80?"\u2705":e.score>60?"\u26a0\ufe0f":"\ud83d\udea8",a="up"===e.trend?"\ud83d\udcc8":"down"===e.trend?"\ud83d\udcc9":"\u27a1\ufe0f";r.push("".concat(t," **").concat(e.name,"**: ").concat(e.score,"% ").concat(a))})),(t.includes("recommendation")||t.includes("action")||t.includes("plan"))&&(r.push("\n\ud83c\udfaf **Strategic Recommendations:**"),n.critical_systems>0&&(r.push("\u2022 **Priority 1**: Address ".concat(n.critical_systems," critical system(s) requiring immediate attention")),r.push("\u2022 **Timeline**: 2-4 weeks for critical system stabilization"),r.push("\u2022 **Owner**: Department heads with C-suite oversight")),r.push("\u2022 **Priority 2**: Leverage high-performing systems to support struggling areas"),r.push("\u2022 **Priority 3**: Implement continuous monitoring and predictive analytics"),r.push("\u2022 **KPIs**: System scores >75%, reduced critical incidents by 50%")),(t.includes("financial")||t.includes("revenue")||t.includes("cost"))&&(r.push("\n\ud83d\udcb0 **Financial Health Insights:**"),r.push("\u2022 Systems optimization can reduce operational costs by 15-25%"),r.push("\u2022 High-performing systems correlate with 20% higher revenue efficiency"),r.push("\u2022 Predictive maintenance saves an average of \u20a62-5M annually"),r.push("\u2022 ROI improvement expected within 6-12 months of system optimization"));const o=le(e);o&&(r.push("\n\ud83c\udf10 **3D Visual Analysis**"),r.push("I'm generating an interactive 3D visualization of your organizational health data with:"),r.push("\u2022 Real-time system performance matrices"),r.push("\u2022 Holographic organizational health globe"),r.push("\u2022 Performance hierarchy pyramids"),r.push("\u2022 Advanced CSS 3D transforms with neural network overlays")),0===a.length?r.push("\n\ud83d\udca1 **Next Steps**: Start by running system assessments to get personalized insights!"):(r.push("\n\ud83d\udca1 **Would you like me to:**"),r.push("\u2022 Generate a detailed 4-week action plan?"),r.push("\u2022 Create executive summary reports?"),r.push("\u2022 Show specific system deep-dive analysis?"),r.push("\u2022 Provide predictive analytics and forecasting?"));const l=r.join("\n"),c="m-assistant-".concat(Date.now()),d=o?n:null;let m="globe";e&&e.toLowerCase().includes("matrix")&&(m="matrix"),e&&e.toLowerCase().includes("pyramid")&&(m="pyramid");const g=(0,s.A)({id:c,role:"assistant",text:"",timestamp:(new Date).toISOString()},o&&{visualization3D:!0,visualData:d,visualType:m,visualTitle:"Organizational Health ".concat("matrix"===m?"Matrix":"pyramid"===m?"Performance Hierarchy":"Universe")});w(e=>[...e,g]);let u=0;const h=setInterval(()=>{u+=30;const e=l.slice(0,u),t=(0,s.A)({text:e},o&&{visualization3D:!0,visualData:d,visualType:m,visualTitle:"Organizational Health ".concat("matrix"===m?"Matrix":"pyramid"===m?"Performance Hierarchy":"Universe")});w(e=>e.map(e=>e.id===c?(0,s.A)((0,s.A)({},e),t):e)),u>=l.length&&(clearInterval(h),A(!1))},50)}async function me(e){const t={id:"m-user-".concat(Date.now()),role:"user",text:e,timestamp:(new Date).toISOString(),file:te?(0,s.A)({},te):void 0};w(e=>[...e,t]),ae(null);const a="m-assistant-".concat(Date.now());w(e=>[...e,{id:a,role:"assistant",text:"...",timestamp:(new Date).toISOString()}]),A(!0);const n={};Object.keys(ie).forEach(e=>{var t,a;n[e]=null!==(t=null===(a=ie[e])||void 0===a?void 0:a.score)&&void 0!==t?t:null});const r="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",i="https://openrouter.ai/api/v1/chat/completions";console.log("\ud83d\udd0c DETAILED API CONNECTION DEBUG:",{hasApiKey:!0,keyExists:!0,keyLength:r?73:0,keyPrefix:r?r.substring(0,15)+"...":"No key found",envVarSet:!0,modelUrl:i,userQuery:e,allEnvVars:Object.keys({NODE_ENV:"production",PUBLIC_URL:"/ConseQ-X-landing",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_OPENROUTER_KEY:"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"}).filter(e=>e.startsWith("REACT_APP"))});try{var o,l,c,g;A(!0);const t=a;if((N=e)&&/\b(link|url|navigate|go to|take me to|where|how do I|access|run|start)\b.*\b(assess|assessment|test|evaluation)\b/i.test(N)){const e='\ud83c\udfaf **Ready to run your organizational assessment?**\n\nHere are your assessment options:\n\n\ud83d\udd17 **Quick Access Links:**\n\u2022 **Systems Assessment**: Navigate to the "Assessments" tab in your dashboard\n\u2022 **Department Evaluation**: Click on "Systems" \u2192 "Run Assessment"  \n\u2022 **Comprehensive Analysis**: Use the main "Assessment" button in the top navigation\n\n\ud83d\udccb **Assessment Process:**\n1. Click on the "Assessments" tab in your left sidebar\n2. Select "New Assessment" or "Run Systems Analysis"\n3. Choose your organizational systems to evaluate\n4. Complete the assessment questionnaire\n5. Get instant results with actionable insights\n\n\ud83d\udca1 **Pro Tip**: After completing assessments, return here for AI-powered analysis and 3D visualizations of your results!\n\nWould you like me to guide you through the assessment process step-by-step?';return w(a=>a.map(a=>a.id===t?(0,s.A)((0,s.A)({},a),{},{text:e}):a)),void A(!1)}0,console.log("\u2705 API key confirmed, proceeding with API call");const S=Object.keys(n).length>0,k=(e=>!!e&&/\b(assess|assessment|score|scores|system|systems|results|report|priority|action plan|org|organization|company|revenue|metrics|kpi|kpis|how did we do|what is my score)\b/i.test(e))(e)&&S;if(k){var u,h,y,b,v,f,j;(null===x||void 0===x||null===(u=x.user)||void 0===u?void 0:u.name)||(null===x||void 0===x||null===(h=x.user)||void 0===h||h.email),null===x||void 0===x||null===(y=x.org)||void 0===y||y.name;const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=e.length,a=Object.create(null),s=e.map(e=>{const t=d(e.text),s=Object.create(null);return t.forEach(e=>{s[e]=(s[e]||0)+1}),Object.keys(s).forEach(e=>{a[e]=(a[e]||0)+1}),s}),n=Object.create(null);Object.keys(a).forEach(e=>{n[e]=Math.log(1+t/a[e])});const r=s.map(e=>{const t=Object.create(null);let a=0;return Object.entries(e).forEach(e=>{let[s,r]=e;const i=r*(n[s]||0);t[s]=i,a+=i*i}),a=Math.sqrt(a)||1,{vec:t,norm:a}});return{docs:e,idf:n,docVectors:r}}(Object.values(ie||{}).map(e=>({id:e.id||"".concat(e.systemId,"-").concat(e.timestamp),text:"System: ".concat(e.systemId,"\nScore: ").concat(e.score,"\nNotes: ").concat(JSON.stringify(e.meta||{})),meta:{systemId:e.systemId,score:e.score,timestamp:e.timestamp}}))),n=m(a,e,6),o=n.map(e=>"- [".concat(e.doc.meta.systemId,"] score: ").concat(e.doc.meta.score," \u2014 excerpt: ").concat(e.doc.text.slice(0,200))).join("\n"),l={model:"mistralai/mistral-7b-instruct",messages:[{role:"system",content:"You are an executive AI assistant with advanced 3D visualization capabilities. Use the following assessment report to answer the user's question precisely and with actionable recommendations. Use concise bullet points and suggested owners/KPIs when relevant. Always include African/Nigerian context where possible. \n\nWhen users request visual analysis, charts, graphs, or 3D views, mention that you're providing interactive 3D visualizations including organizational health globes, system matrices, and performance pyramids. These visualizations show real-time organizational health data with advanced CSS 3D transforms and holographic effects."},{role:"system",content:"AssessmentReport:\n".concat(o)},{role:"user",content:e}]},c=await fetch(i,{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify(l)});if(!c.ok){const t=await c.text();return console.error("\ud83d\udea8 API Call Failed (Assessment Context):",{status:c.status,statusText:c.statusText,error:t,fallbackMode:"Enhanced Simulation"}),void de(e)}const g=await c.json(),N=null!==(b=null===(v=g.choices)||void 0===v||null===(f=v[0])||void 0===f||null===(j=f.message)||void 0===j?void 0:j.content)&&void 0!==b?b:"";console.log("\u2705 API Call Successful (Assessment Context):",{responseLength:N.length,model:g.model,hasContent:!!N});const S=le(e),k=S?ce():null;let C="globe";e.toLowerCase().includes("matrix")||e.toLowerCase().includes("comparison")?C="matrix":(e.toLowerCase().includes("hierarchy")||e.toLowerCase().includes("performance"))&&(C="pyramid");let I=0;const D=N.length,O=setInterval(()=>{I=Math.min(D,I+Math.max(20,Math.round(D/30)));const e=N.slice(0,I),a=(0,s.A)({text:e},S&&I>=D&&{visualization3D:!0,visualData:k,visualType:C,visualTitle:"Organizational Health ".concat("matrix"===C?"Matrix":"pyramid"===C?"Performance Hierarchy":"Universe")});if(w(e=>e.map(e=>e.id===t?(0,s.A)((0,s.A)({},e),a):e)),I>=D){clearInterval(O),A(!1);const e=(0,s.A)({id:t,role:"assistant",text:N,timestamp:(new Date).toISOString()},S&&{visualization3D:!0,visualData:k,visualType:C}),a=R(e,t);a&&(console.log("\ud83d\udcca Intelligence Captured:",a.title,"-",a.category),V(a),p.addInsight({title:a.title,category:a.category,summary:a.summary,priority:a.priority,source:"x-ultra-chat",relatedMetrics:q(a.category)}),B(a))}},40);return}console.log("\ud83d\udcde Making API call for general conversation");const C=p.getContextualPrompt(),I={model:"mistralai/mistral-7b-instruct",messages:[{role:"system",content:'You are X-ULTRA, the premium executive intelligence AI assistant with cutting-edge 3D visualization capabilities. Always introduce yourself as "X-ULTRA" when greeting users. Be warm, professional, and concise while maintaining your elite brand identity. \n      \n      CURRENT ORGANIZATIONAL CONTEXT: '.concat(C,"\n      \n      Use this real-time organizational data to provide contextual, relevant responses. When users ask about organizational health, reference the actual metrics. Answer conversational questions naturally with executive-level intelligence. When users ask about visual analysis or want to see data, offer to show them interactive 3D organizational health visualizations including rotating globes, system matrices, and performance pyramids with real-time holographic effects. \n      \n      Remember: You are X-ULTRA - the pinnacle of executive AI intelligence with real-time organizational awareness.")},{role:"user",content:e}]},D=await fetch(i,{method:"POST",headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"},body:JSON.stringify(I)});if(!D.ok){const t=await D.text();return console.error("\ud83d\udea8 API Call Failed (Conversational):",{status:D.status,statusText:D.statusText,error:t,fallbackMode:"Enhanced Simulation"}),void de(e)}const O=await D.json(),E=null!==(o=null===(l=O.choices)||void 0===l||null===(c=l[0])||void 0===c||null===(g=c.message)||void 0===g?void 0:g.content)&&void 0!==o?o:"";console.log("\u2705 API Call Successful (Conversational):",{responseLength:E.length,model:O.model,hasContent:!!E});let _=0;const T=E.length,L=setInterval(()=>{_=Math.min(T,_+Math.max(20,Math.round(T/30)));const e=E.slice(0,_);if(w(a=>a.map(a=>a.id===t?(0,s.A)((0,s.A)({},a),{},{text:e}):a)),_>=T){clearInterval(L),A(!1);const e={id:t,role:"assistant",text:E,timestamp:(new Date).toISOString()},a=R(e,t);a&&(console.log("\ud83d\udcca Intelligence Captured:",a.title,"-",a.category),V(a),p.addInsight({title:a.title,category:a.category,summary:a.summary,priority:a.priority,source:"x-ultra-chat",relatedMetrics:q(a.category)}),B(a))}},40)}catch(S){console.error("\ud83d\udd25 API Connection Error:",{error:S.message,stack:S.stack,apiKey:r?"Present":"Missing",fallbackMode:"Enhanced Simulation"}),de(e)}var N}(0,n.useEffect)(()=>{Z.current&&(Z.current.scrollTop=Z.current.scrollHeight+200)},[f,S]);return(0,D.jsxs)("section",{children:[(0,D.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,D.jsxs)("div",{className:"md:col-span-1 rounded-2xl h-[62vh] overflow-hidden ".concat(a?"border border-gray-700/50 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900":"border border-gray-200/50 bg-gradient-to-br from-white via-gray-50 to-white"," backdrop-blur-xl shadow-2xl"),children:[(0,D.jsx)("div",{className:"p-4 border-b ".concat(a?"border-gray-700/50":"border-gray-200/50"," backdrop-blur-sm"),children:(0,D.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,D.jsxs)("div",{className:"flex items-center gap-3",children:[(0,D.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(a?"bg-gradient-to-r from-purple-600 to-blue-600":"bg-gradient-to-r from-purple-500 to-blue-500"," shadow-lg"),children:(0,D.jsx)(i.t69,{className:"text-white text-lg"})}),(0,D.jsxs)("div",{children:[(0,D.jsx)("h3",{className:"font-semibold ".concat(a?"text-white":"text-gray-900"),children:"Strategic Analysis Archive"}),(0,D.jsx)("p",{className:"text-xs ".concat(a?"text-gray-400":"text-gray-500"),children:"Generated insights & downloadable reports"})]})]}),(0,D.jsxs)("div",{className:"flex items-center gap-2",children:[(0,D.jsx)("div",{className:"w-2 h-2 bg-blue-400 rounded-full animate-pulse shadow-lg shadow-blue-400/50"}),(0,D.jsx)("span",{className:"text-xs ".concat(a?"text-gray-400":"text-gray-500"),children:"Auto-Saving"})]})]})}),(0,D.jsxs)("div",{className:"h-full overflow-auto hide-scrollbar",children:[(0,D.jsx)("div",{className:"px-4 py-2 border-b border-gray-200/20",children:(0,D.jsx)("div",{className:"flex gap-2 overflow-x-auto hide-scrollbar scroll-smooth",children:["All","Financial","Operational","Strategic","Risk","3D Reports"].map(e=>(0,D.jsxs)("button",{onClick:()=>T(e),className:"px-3 py-1.5 rounded-full text-xs font-medium whitespace-nowrap transition-all duration-200 ".concat(_===e?a?"bg-emerald-600 text-white shadow-md":"bg-emerald-500 text-white shadow-md":a?"bg-gray-700/50 text-gray-300 hover:bg-gray-600/50":"bg-gray-200/50 text-gray-600 hover:bg-gray-300/50"," hover:scale-105"),children:[e,"All"!==e&&(0,D.jsx)("span",{className:"ml-1 px-1.5 py-0.5 text-xs rounded-full ".concat(_===e?"bg-white/20":a?"bg-gray-600/50":"bg-gray-300/50"),children:O.filter(t=>t.category===e).length}),"All"===e&&(0,D.jsx)("span",{className:"ml-1 px-1.5 py-0.5 text-xs rounded-full ".concat(_===e?"bg-white/20":a?"bg-gray-600/50":"bg-gray-300/50"),children:O.length})]},e))})}),O.length>0&&(0,D.jsxs)("div",{className:"mx-4 mt-4 mb-3 p-3 rounded-lg border-l-4 border-emerald-500 ".concat(a?"bg-emerald-900/20":"bg-emerald-50"," relative overflow-hidden"),children:[(0,D.jsx)("div",{className:"absolute top-0 right-0 w-16 h-16 opacity-10",children:(0,D.jsx)(i.t69,{className:"w-full h-full text-emerald-500"})}),(0,D.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,D.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,D.jsx)("div",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),(0,D.jsx)("h4",{className:"font-semibold text-sm ".concat(a?"text-emerald-300":"text-emerald-700"),children:"Latest Analysis"})]}),(0,D.jsx)("span",{className:"text-xs ".concat(a?"text-emerald-400":"text-emerald-600"),children:new Date(O[0].timestamp).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",day:"numeric",month:"short"})})]}),(0,D.jsx)("p",{className:"text-xs ".concat(a?"text-emerald-200":"text-emerald-600"," mb-2 font-medium"),children:O[0].title}),(0,D.jsx)("p",{className:"text-xs ".concat(a?"text-emerald-200/80":"text-emerald-600/80"," mb-2"),children:O[0].summary}),(0,D.jsxs)("div",{className:"flex gap-2",children:[(0,D.jsx)("button",{onClick:()=>console.log("Viewing analysis:",O[0]),className:"px-3 py-1 text-xs rounded-md ".concat(a?"bg-emerald-700 hover:bg-emerald-600 text-white":"bg-emerald-600 hover:bg-emerald-700 text-white"," transition-all duration-200 font-medium"),children:"View Report"}),(0,D.jsx)("button",{onClick:()=>W(O[0]),className:"px-3 py-1 text-xs rounded-md ".concat(a?"bg-gray-600 hover:bg-gray-500 text-white":"bg-gray-500 hover:bg-gray-600 text-white"," transition-all duration-200"),children:"Download"})]})]}),p.sharedMetrics&&(0,D.jsx)("div",{className:"mx-4 mb-4",children:p.generateRecommendations().slice(0,2).map((e,t)=>(0,D.jsxs)("div",{className:"mb-3 p-3 rounded-lg border-l-4 ".concat("high"===e.priority?"border-red-500 bg-red-900/10":"border-yellow-500 bg-yellow-900/10"),children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,D.jsx)("h5",{className:"font-medium text-sm ".concat(a?"text-white":"text-gray-900"),children:e.title}),(0,D.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs ".concat("high"===e.priority?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"),children:e.priority})]}),(0,D.jsx)("p",{className:"text-xs ".concat(a?"text-gray-300":"text-gray-600"," mb-2"),children:e.description}),(0,D.jsx)("button",{onClick:()=>me("X-ULTRA, provide detailed analysis and action plan for ".concat(e.title.toLowerCase(),": ").concat(e.description)),className:"px-3 py-1 text-xs rounded ".concat(a?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"," transition-colors"),children:"Get Action Plan"})]},t))}),0===O.length&&(0,D.jsxs)("div",{className:"mx-4 mt-4 mb-3 p-4 rounded-lg border-2 border-dashed ".concat(a?"border-gray-600 bg-gray-800/30":"border-gray-300 bg-gray-50/30"," text-center"),children:[(0,D.jsx)(i.t69,{className:"w-8 h-8 mx-auto mb-2 ".concat(a?"text-gray-500":"text-gray-400")}),(0,D.jsx)("h4",{className:"font-medium text-sm ".concat(a?"text-gray-300":"text-gray-600"," mb-1"),children:"No Analysis Yet"}),(0,D.jsx)("p",{className:"text-xs ".concat(a?"text-gray-400":"text-gray-500"),children:"Start a conversation with X-ULTRA to build your Strategic Intelligence Archive"}),(0,D.jsx)("button",{onClick:()=>me("X-ULTRA, provide an executive overview of our current organizational health and key areas requiring immediate attention"),className:"mt-3 px-4 py-2 text-xs rounded ".concat(a?"bg-emerald-600 hover:bg-emerald-700 text-white":"bg-emerald-500 hover:bg-emerald-600 text-white"," transition-colors"),children:"Start Intelligence Analysis"})]}),O.length>0&&(0,D.jsxs)("div",{className:"mx-4 mb-4",children:[(0,D.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,D.jsx)("h4",{className:"font-semibold text-sm ".concat(a?"text-white":"text-gray-900"),children:"Analysis Archive"}),(0,D.jsxs)("div",{className:"flex items-center gap-2",children:[(0,D.jsxs)("span",{className:"text-xs ".concat(a?"text-gray-400":"text-gray-500"),children:[K.length," ","All"===_?"reports":_.toLowerCase()]}),(0,D.jsx)("button",{onClick:()=>{const e=K.map(e=>"".concat(e.title,"\n").concat("=".repeat(e.title.length),"\n").concat(e.content,"\n\n")).join(""),t=new Blob([e],{type:"text/plain"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="Strategic_Analysis_Archive_".concat((new Date).toISOString().split("T")[0],".txt"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a)},className:"p-1 rounded ".concat(a?"hover:bg-gray-700":"hover:bg-gray-100"," transition-colors"),children:(0,D.jsx)(i.WCW,{className:"w-3 h-3 ".concat(a?"text-gray-400":"text-gray-500")})})]})]}),(0,D.jsx)("div",{className:"space-y-3",children:K.length>0?K.slice(0,6).map(e=>{const{icon:t,color:s}=(e=>{switch(e){case"Financial":return{icon:i.YYR,color:"amber"};case"Strategic":return{icon:i.RBv,color:"blue"};case"Operational":case"3D Reports":return{icon:i.$ZR,color:"purple"};case"Risk":return{icon:i.SMR,color:"red"};default:return{icon:i.t69,color:"gray"}}})(e.category);return(0,D.jsxs)("div",{className:"p-3 rounded-lg border ".concat(a?"bg-gray-800/50 border-gray-700/30":"bg-white/50 border-gray-200/50"," hover:shadow-lg transition-all duration-200 group cursor-pointer backdrop-blur-sm"),children:[(0,D.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,D.jsxs)("div",{className:"flex items-center gap-3",children:[(0,D.jsxs)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat(a?"bg-".concat(s,"-600/20 border border-").concat(s,"-600/30"):"bg-".concat(s,"-100 border border-").concat(s,"-200")," ").concat(e.isInteractive?"relative":""),children:[(0,D.jsx)(t,{className:"w-4 h-4 ".concat("text-".concat(s,a?"-400":"-600"))}),e.isInteractive&&(0,D.jsx)("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full animate-pulse"})]}),(0,D.jsxs)("div",{children:[(0,D.jsx)("h5",{className:"font-medium text-sm ".concat(a?"text-white":"text-gray-900"),children:e.title}),(0,D.jsx)("p",{className:"text-xs ".concat(a?"text-gray-400":"text-gray-600"),children:e.summary})]})]}),(0,D.jsx)("div",{className:"flex items-center gap-1",children:(0,D.jsx)("div",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat("Critical"===e.priority?a?"bg-red-900/50 text-red-300":"bg-red-100 text-red-700":"High Priority"===e.priority||"High"===e.priority?a?"bg-orange-900/50 text-orange-300":"bg-orange-100 text-orange-700":a?"bg-".concat(s,"-900/50 text-").concat(s,"-300"):"bg-".concat(s,"-100 text-").concat(s,"-700")),children:e.isInteractive?"3D Interactive":e.priority})})]}),(0,D.jsxs)("div",{className:"flex items-center justify-between",children:[(0,D.jsxs)("span",{className:"text-xs ".concat(a?"text-gray-500":"text-gray-400"),children:[new Date(e.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})," \u2022 X-ULTRA Insight"]}),(0,D.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-all duration-200",children:[(0,D.jsx)("button",{onClick:()=>console.log("Viewing analysis:",e),className:"px-2 py-1 text-xs rounded-md ".concat(a?"bg-blue-600 hover:bg-blue-700 text-white":"bg-blue-500 hover:bg-blue-600 text-white"," transition-colors font-medium"),children:e.isInteractive?"Launch 3D":"View"}),(0,D.jsx)("button",{onClick:()=>W(e),className:"px-2 py-1 text-xs rounded-md ".concat(a?"bg-green-600 hover:bg-green-700 text-white":"bg-green-500 hover:bg-green-600 text-white"," transition-colors"),children:"Strategic"===e.category?"Board Copy":"Download"}),"Critical"===e.priority&&(0,D.jsx)("button",{onClick:()=>console.log("Urgent action for:",e),className:"px-2 py-1 text-xs rounded-md ".concat(a?"bg-red-600 hover:bg-red-700 text-white":"bg-red-500 hover:bg-red-600 text-white"," transition-colors"),children:"Urgent"})]})]})]},e.id)}):(0,D.jsxs)("div",{className:"p-6 text-center rounded-lg border-2 border-dashed ".concat(a?"border-gray-600 text-gray-400":"border-gray-300 text-gray-500"),children:[(0,D.jsx)(i.t69,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,D.jsx)("p",{className:"text-sm font-medium mb-1",children:"No Analysis Available"}),(0,D.jsx)("p",{className:"text-xs",children:"Generate some intelligence reports to populate your archive"})]})})]}),(0,D.jsxs)("div",{className:"mx-4 mb-4",children:[(0,D.jsx)("h4",{className:"font-semibold text-sm mb-3 ".concat(a?"text-white":"text-gray-900"),children:"Generate X-ULTRA Intelligence"}),(0,D.jsxs)("div",{className:"mb-3 p-3 rounded-lg border border-dashed border-blue-300/50",children:[(0,D.jsxs)("div",{className:"text-xs font-medium mb-2 ".concat(a?"text-blue-300":"text-blue-700"," flex items-center gap-1"),children:[(0,D.jsx)(i.qvi,{className:"w-3 h-3"}),"Partner Dashboard Actions"]}),(0,D.jsxs)("div",{className:"flex gap-2",children:[(0,D.jsx)("button",{onClick:()=>y("/ceo/partner-dashboard/overview"),className:"px-2 py-1 text-xs rounded ".concat(a?"bg-blue-700/50 hover:bg-blue-600/50 text-blue-200":"bg-blue-100 hover:bg-blue-200 text-blue-700"," transition-colors"),children:"View Dashboard"}),(0,D.jsx)("button",{onClick:()=>me("X-ULTRA, analyze the current Partner Dashboard data and provide strategic recommendations based on real-time metrics"),className:"px-2 py-1 text-xs rounded ".concat(a?"bg-green-700/50 hover:bg-green-600/50 text-green-200":"bg-green-100 hover:bg-green-200 text-green-700"," transition-colors"),children:"Analyze Dashboard"})]})]}),(0,D.jsxs)("div",{className:"grid grid-cols-1 gap-2",children:[(0,D.jsxs)("button",{onClick:()=>me("X-ULTRA, generate a comprehensive executive intelligence summary report with key metrics, financial analysis, operational insights, strategic recommendations, and 3D visualizations for the board presentation"),className:"w-full py-3 px-4 rounded-lg text-sm font-medium transition-all duration-200 ".concat(a?"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white":"bg-gradient-to-r from-indigo-500 to-purple-500 hover:from-indigo-600 hover:to-purple-600 text-white"," flex items-center justify-center space-x-2 hover:scale-105 shadow-lg border-2 border-transparent hover:border-white/20"),children:[(0,D.jsx)(i.t69,{className:"w-4 h-4"}),(0,D.jsx)("span",{children:"X-ULTRA Intelligence Report"})]}),(0,D.jsxs)("button",{onClick:()=>me("X-ULTRA, create a detailed 3D organizational health analysis with interactive visualizations, performance metrics, predictive insights, and strategic planning recommendations"),className:"w-full py-3 px-4 rounded-lg text-sm font-medium transition-all duration-200 ".concat(a?"bg-gradient-to-r from-emerald-600 to-teal-600 hover:from-emerald-700 hover:to-teal-700 text-white":"bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 text-white"," flex items-center justify-center space-x-2 hover:scale-105 shadow-lg border-2 border-transparent hover:border-white/20"),children:[(0,D.jsx)(i.$ZR,{className:"w-4 h-4"}),(0,D.jsx)("span",{children:"X-ULTRA 3D Analysis"})]})]})]}),(0,D.jsxs)("div",{className:"mx-4 mb-4 p-4 rounded-xl ".concat(a?"bg-gradient-to-r from-blue-900/20 to-purple-900/20 border border-blue-700/30":"bg-gradient-to-r from-blue-50/50 to-purple-50/50 border border-blue-200/30"," backdrop-blur-sm"),children:[(0,D.jsxs)("h4",{className:"text-xs font-semibold mb-3 ".concat(a?"text-blue-300":"text-blue-700"," uppercase tracking-wide flex items-center gap-2"),children:[(0,D.jsx)(i.YYR,{className:"w-3 h-3"}),"Live Dashboard Metrics"]}),(0,D.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,D.jsxs)("div",{className:"text-center",children:[(0,D.jsxs)("div",{className:"text-lg font-bold mb-1 ".concat(a?"text-green-400":"text-green-600"),children:[p.sharedMetrics.financialHealth.score,"%"]}),(0,D.jsx)("div",{className:"text-xs ".concat(a?"text-gray-400":"text-gray-500"," leading-tight"),children:"Financial Health"}),(0,D.jsx)("div",{className:"text-xs ".concat(p.sharedMetrics.financialHealth.trend.includes("+")?"text-green-500":"text-red-500"),children:p.sharedMetrics.financialHealth.trend})]}),(0,D.jsxs)("div",{className:"text-center",children:[(0,D.jsxs)("div",{className:"text-lg font-bold mb-1 ".concat(a?"text-blue-400":"text-blue-600"),children:[p.sharedMetrics.strategicAlignment.score,"%"]}),(0,D.jsx)("div",{className:"text-xs ".concat(a?"text-gray-400":"text-gray-500"," leading-tight"),children:"Strategic Alignment"}),(0,D.jsx)("div",{className:"text-xs ".concat(p.sharedMetrics.strategicAlignment.trend.includes("+")?"text-green-500":"text-red-500"),children:p.sharedMetrics.strategicAlignment.trend})]})]}),(0,D.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-700/30",children:(0,D.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,D.jsx)("span",{className:a?"text-gray-400":"text-gray-500",children:"Overall Health:"}),(0,D.jsxs)("span",{className:"font-medium ".concat(a?"text-white":"text-gray-700"),children:[p.sharedMetrics.overallHealth.score,"% (",p.sharedMetrics.overallHealth.grade,")"]})]})})]}),(0,D.jsxs)("div",{className:"mx-4 mb-4 p-4 rounded-xl ".concat(a?"bg-gradient-to-r from-gray-800/50 to-gray-900/50 border border-gray-700/30":"bg-gradient-to-r from-white/50 to-gray-50/50 border border-gray-200/30"," backdrop-blur-sm"),children:[(0,D.jsx)("h4",{className:"text-xs font-semibold mb-3 ".concat(a?"text-gray-300":"text-gray-600"," uppercase tracking-wide"),children:"X-ULTRA Intelligence Archive"}),(0,D.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,D.jsxs)("div",{className:"text-center",children:[(0,D.jsx)("div",{className:"text-xl font-bold mb-1 ".concat(a?"text-emerald-400":"text-emerald-600"),children:O.length}),(0,D.jsx)("div",{className:"text-xs ".concat(a?"text-gray-400":"text-gray-500"," leading-tight"),children:"Analysis Reports"})]}),(0,D.jsxs)("div",{className:"text-center",children:[(0,D.jsx)("div",{className:"text-xl font-bold mb-1 ".concat(a?"text-purple-400":"text-purple-600"),children:O.filter(e=>e.isInteractive||"3D Reports"===e.category).length}),(0,D.jsx)("div",{className:"text-xs ".concat(a?"text-gray-400":"text-gray-500"," leading-tight"),children:"3D Interactive"})]}),(0,D.jsxs)("div",{className:"text-center",children:[(0,D.jsx)("div",{className:"text-xl font-bold mb-1 ".concat(a?"text-blue-400":"text-blue-600"),children:3*O.length+42}),(0,D.jsx)("div",{className:"text-xs ".concat(a?"text-gray-400":"text-gray-500"," leading-tight"),children:"Downloads"})]})]}),O.length>0&&(0,D.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-700/30",children:(0,D.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,D.jsx)("span",{className:a?"text-gray-400":"text-gray-500",children:"Last Analysis:"}),(0,D.jsx)("span",{className:"font-medium ".concat(a?"text-white":"text-gray-700"),children:new Date(null===(t=O[0])||void 0===t?void 0:t.timestamp).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",month:"short",day:"numeric"})})]})})]})]})]}),(0,D.jsxs)("div",{className:"md:col-span-2 rounded-2xl p-0 md:p-4 h-[60vh] flex flex-col min-w-0 ".concat(a?"border border-gray-700 bg-gray-900 text-gray-100":"border border-gray-100 bg-white text-gray-900"),children:[(0,D.jsx)("div",{className:"flex items-center justify-between p-3 border-b",style:{borderColor:a?"rgba(255,255,255,0.04)":""},children:(0,D.jsxs)("div",{children:[(0,D.jsx)("div",{className:"font-semibold",children:"X-ULTRA Intelligence"}),(0,D.jsx)("div",{className:"text-xs ".concat("text-gray-400"),children:S?"X-ULTRA is analyzing...":"Ready for intelligence"})]})}),(0,D.jsxs)("div",{className:"flex-1 overflow-auto px-4 py-3 hide-scrollbar",ref:Z,style:{WebkitOverflowScrolling:"touch"},children:[f.map(e=>(0,D.jsx)("div",{className:"my-3",children:"assistant"===e.role?(0,D.jsx)("div",{className:"inline-block rounded-xl px-4 py-3 ".concat(a?"bg-gray-700 text-gray-100":"bg-gray-50 text-gray-900"),children:(0,D.jsx)(g.oz,{remarkPlugins:[u.A],rehypePlugins:[h.A,I],children:e.text})}):(0,D.jsx)(P,{m:e,darkMode:a})},e.id)),S&&(0,D.jsx)("div",{className:"mt-2",children:(0,D.jsx)("div",{className:"inline-block rounded-xl px-4 py-3 ".concat(a?"bg-gray-700 text-gray-100":"bg-gray-100 text-gray-900"),children:(0,D.jsx)(L,{darkMode:a})})}),k&&(0,D.jsx)("div",{className:"mt-2 text-xs italic text-gray-400",children:"You are typing..."})]}),(0,D.jsx)(M,{onSend:e=>me(e),darkMode:a,onAttachClick:()=>J.current&&J.current.click(),textareaRef:Q,textValue:$,setTextValue:ee,uploadedFile:te,setUploadedFile:ae,onTyping:()=>{C(!0),G.current&&clearTimeout(G.current),G.current=setTimeout(()=>C(!1),1200)}})]})]}),(0,D.jsx)("input",{ref:J,type:"file",className:"hidden",onChange:e=>{var t;const a=null===(t=e.target.files)||void 0===t?void 0:t[0];a&&function(e){if(!e)return;const t=URL.createObjectURL(e);ae({name:e.name,size:e.size,url:t})}(a),e.target.value=""}})]})}}}]);
//# sourceMappingURL=100.bce3be54.chunk.js.map