"use strict";(self.webpackChunkceo_assessment_app=self.webpackChunkceo_assessment_app||[]).push([[376],{8376:(e,t,s)=>{s.r(t),s.d(t,{default:()=>M});var n=s(89379),r=s(65043),a=s(23721),o=s(43199),i=s(13204),c=s(41962);const l={start:"conseqx:assessment:start",progress:"conseqx:assessment:progress",completed:"conseqx:assessment:completed",view:"conseqx:assessment:view"};function d(e){let{orgId:t,systemId:s}=e;try{window.dispatchEvent(new CustomEvent(l.start,{detail:{orgId:t,systemId:s}}))}catch(n){}}function m(e){let{orgId:t,systemId:s,progress:n,result:r}=e;try{window.dispatchEvent(new CustomEvent(l.progress,{detail:{orgId:t,systemId:s,progress:n,result:r}}))}catch(a){}}function u(e){try{window.dispatchEvent(new CustomEvent(l.completed,{detail:e}))}catch(t){}}var g=s(55255),x=s(59570),h=s(67519),y=s(52421),p=s(55805),v=s(70579);const w=(0,c.y6)();const f="conseqx_assessments_v1",b="conseqx_assessment_answers_v1",j="conseqx_assessment_progress_v1";function N(){try{const e=localStorage.getItem(f);return e?JSON.parse(e):{}}catch(e){return{}}}function I(e){try{localStorage.setItem(f,JSON.stringify(e))}catch(t){}}function A(){const e={};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(t=>{if(!t.systemId)return;const s=(0,c.Os)(t.systemId);(!e[s]||(e[s].timestamp||0)<(t.timestamp||0))&&(e[s]=(0,n.A)((0,n.A)({},t),{},{systemId:s}))}),Object.keys(e).map(t=>({systemId:t,score:e[t].score||0,result:e[t]}))}function C(e){try{const t=localStorage.getItem(j);return(t?JSON.parse(t):{})[e]||{}}catch(t){return{}}}function k(e,t){if(!e)return 0;let s=0;const n=y.n.find(e=>e.id===t);return n&&n.subAssessments?(n.subAssessments.forEach(t=>{const n=e[t.id]||{},r=Object.keys(n).filter(e=>{const t=n[e];return null!==t&&void 0!==t&&""!==t}).length;s+=r}),s):0}function E(e){let{pct:t=0,darkMode:s=!1}=e;const n=s?"bg-gray-800":"bg-gray-200",r=100===t?"bg-green-500":"bg-yellow-500";return(0,v.jsx)("div",{className:"w-full h-2 rounded-full ".concat(n," overflow-hidden"),children:(0,v.jsx)("div",{style:{width:"".concat(t,"%")},className:"h-full ".concat(r)})})}function S(e){var t,s;let{s:n,state:r,onStart:a,onView:o,onRemove:c,darkMode:l=!1}=e;const d=(r.answeredCount||0)>0,m=!d,u=null!==(t=null===(s=r.latestResult)||void 0===s?void 0:s.score)&&void 0!==t?t:null,g="completed"===r.status&&r.latestResult,x="completed"===r.status&&null!==u,h=l?"hover:bg-gray-800":"hover:bg-gray-50",p=l?"text-gray-100":"text-gray-900",w=l?"text-gray-400":"text-gray-500",f="in-progress"===r.status&&r.progress<100,b=f||!d,j="".concat(b?l?"bg-gray-800 text-gray-400 cursor-not-allowed":"bg-gray-200 text-gray-500 cursor-not-allowed":l?"bg-blue-800 text-blue-200 hover:bg-blue-700":"bg-blue-600 text-white hover:bg-blue-700"),N=!x,I="".concat(N?l?"bg-gray-900/20 text-gray-500 cursor-not-allowed":"bg-gray-50 text-gray-400 cursor-not-allowed":l?"bg-green-800 text-green-200 hover:bg-green-700":"bg-green-600 text-white hover:bg-green-700");let A=0;if("in-progress"===r.status)A=r.progress;else if(d&&!g){const e=y.n.find(e=>e.id===n.id),t=e?e.subAssessments.reduce((e,t)=>e+t.questions.length,0):0;A=t>0?Math.round(r.answeredCount/t*100):0}return(0,v.jsxs)("div",{className:"flex items-center justify-between gap-2 p-2 rounded-md ".concat(m?"opacity-60":""," ").concat(h," transition-all duration-200"),children:[(0,v.jsxs)("div",{className:"flex items-start gap-3 min-w-0",children:[(0,v.jsx)("div",{className:"w-10 h-10 rounded-md bg-gradient-to-br from-indigo-600 to-blue-500 flex items-center justify-center text-white font-semibold",children:n.icon}),(0,v.jsxs)("div",{className:"min-w-0",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)("div",{className:"font-medium truncate ".concat(p),children:n.title}),"completed"===r.status&&(0,v.jsxs)("div",{className:"text-xs px-2 py-0.5 rounded-full ".concat(l?"bg-green-900/30 text-green-300":"bg-green-100 text-green-700"),children:[u,"%"]}),"in-progress"===r.status&&(0,v.jsx)("div",{className:"text-xs px-2 py-0.5 rounded-full ".concat(l?"bg-yellow-900/20 text-yellow-300":"bg-yellow-100 text-yellow-700"),children:"In progress"})]}),(0,v.jsxs)("div",{className:"text-xs ".concat(w," mt-1"),children:[!d&&"Complete assessment questions first",d&&("not-started"===r.status||"ready-to-run"===r.status)&&"Ready to run analysis",d&&"in-progress"===r.status&&r.progress<100&&"Analyzing... ".concat(r.progress,"%"),d&&"in-progress"===r.status&&r.progress>=100&&"Analysis complete",g&&"Analysis completed ".concat(new Date(r.latestResult.timestamp).toLocaleString()),d&&!g&&"in-progress"!==r.status&&"".concat(r.answeredCount," questions answered")]}),A>0&&!g&&(0,v.jsx)("div",{className:"mt-2",children:(0,v.jsx)(E,{pct:A,darkMode:l})}),"in-progress"===r.status&&(0,v.jsx)("div",{className:"mt-2",children:(0,v.jsx)(E,{pct:r.progress,darkMode:l})})]})]}),(0,v.jsxs)("div",{className:"flex items-center gap-1",children:[(0,v.jsxs)("button",{onClick:()=>a(n.id),disabled:b,title:d?f?"Analysis in progress...":"Run AI analysis on assessment data":"Complete assessment questions first to unlock analysis",className:"px-2 py-1.5 rounded-md border text-xs font-medium transition-all duration-200 ".concat(j),children:[(0,v.jsx)(i.gSK,{className:"inline-block mr-1",size:10}),f?"Analyzing...":d?"\u25b6 Run":"\ud83d\udd12 Locked"]}),(0,v.jsx)("button",{onClick:()=>o(n.id),disabled:N,title:N?"Complete assessment to view results":"View detailed results",className:"px-2 py-1.5 rounded-md border text-xs transition-all duration-200 ".concat(I),children:(0,v.jsx)(i.Ny1,{size:10})}),r.latestResult&&(0,v.jsx)("button",{onClick:()=>c(r.latestResult.id),className:"px-2 py-1.5 rounded-md text-xs transition-all duration-200 ".concat(l?"text-gray-400 hover:text-gray-200 hover:bg-gray-800":"text-gray-500 hover:text-gray-700 hover:bg-gray-100"),title:"Remove assessment",children:(0,v.jsx)(i.qbC,{size:10})})]})]})}function M(){const{darkMode:e,org:t=null,user:s=null}=(0,a.KC)(),c=(null===t||void 0===t?void 0:t.id)||"anon";(0,r.useEffect)(()=>{try{window.dispatchEvent(new CustomEvent("conseqx:theme:changed",{detail:{darkMode:e}}))}catch(t){}},[e]);const[l,f]=(0,r.useState)(()=>{try{return N()[c]||[]}catch(e){return[]}}),[M,R]=(0,r.useState)(()=>{const e=function(e){try{const t=localStorage.getItem(b);return(t?JSON.parse(t):{})[e]||{}}catch(t){return{}}}(c),t={};w.forEach(s=>{const n=k(e,s.id);t[s.id]={status:"not-started",progress:0,latestResult:null,answeredCount:n}});return A(l).forEach(s=>{const n=k(e,s.systemId);t[s.systemId],t[s.systemId]={status:"completed",progress:100,latestResult:s.result,answeredCount:n}}),t}),[q,D]=(0,r.useState)({}),[O,L]=(0,r.useState)(null),[_,z]=(0,r.useState)(!1),[J,P]=(0,r.useState)(null),[B,H]=(0,r.useState)(()=>C(c)),K=(0,r.useCallback)(()=>{z(!1),setTimeout(()=>P(null),320)},[]),Q=(0,r.useRef)({}),V=()=>Object.keys(Q.current).length>0?Q.current:q;function T(e){const t=N();t[c]=e,I(t),f(e);const s=A(e),r=V();R(e=>{const t=(0,n.A)({},e);return w.forEach(e=>{const s=k(r,e.id);t[e.id]=t[e.id]||{status:"not-started",progress:0,latestResult:null,answeredCount:s},t[e.id].answeredCount=s}),s.forEach(e=>{const s=k(r,e.systemId);t[e.systemId]={status:"completed",progress:100,latestResult:e.result,answeredCount:s}}),t});try{window.dispatchEvent(new CustomEvent("conseqx:assessments:updated",{detail:{orgId:c,list:e}}))}catch(a){}try{if("BroadcastChannel"in window){const t=new BroadcastChannel("conseqx_assessments");t.postMessage({type:"assessments:update",orgId:c,payload:e}),t.close()}}catch(o){}}function U(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={id:e.id||"A-".concat(Date.now().toString(36)),systemId:e.systemId||e.system||"general",title:e.title||e.name||e.systemId||"Assessment",score:"number"===typeof e.score?e.score:e.score?Number(e.score):null,owner:e.owner||s&&s.name||"Unknown",meta:e.meta||{},timestamp:e.timestamp||Date.now(),orgId:c,notes:e.notes||""},r=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200;e||(e="anon");const r=N(),a=r[e]||[],o=[(0,n.A)((0,n.A)({},t),{},{timestamp:t.timestamp||Date.now()}),...a.filter(e=>e.id!==t.id)];return r[e]=o.slice(0,s),I(r),r[e]}(c,t,200);T(r);try{p.tB(t)}catch(a){console.error("Error ingesting assessment into orgHealth service",a)}}function X(e){const t=M[e];t&&"in-progress"===t.status&&t.progress<100||(d({systemId:e,orgId:c}),function(e){R(t=>(0,n.A)((0,n.A)({},t),{},{[e]:(0,n.A)((0,n.A)({},t[e]||{}),{},{status:"in-progress",progress:1})}));let t=1;const s=setInterval(()=>{t=Math.min(100,t+Math.round(5+12*Math.random())),m({orgId:c,systemId:e,progress:t}),t>=100&&(clearInterval(s),(async()=>{u(await g.Kk(c,e))})())},800)}(e))}function Y(e){const t=M[e];if(!t||!t.latestResult)return;const s=w.find(t=>t.id===e);if(s){var r,a,o;const i=V(),c=y.n.find(t=>t.id===e),l={};null===c||void 0===c||null===(r=c.subAssessments)||void 0===r||r.forEach(e=>{i[e.id]&&(l[e.id]=i[e.id])});const d=(null===c||void 0===c||null===(a=c.subAssessments)||void 0===a?void 0:a.map(e=>{const t=e.questions.length,s=l[e.id]?Object.keys(l[e.id]).filter(t=>{const s=l[e.id][t];return null!==s&&void 0!==s&&""!==s}).length:0;return{id:e.id,title:e.title,answered:s,total:t}}))||[],m=(0,n.A)((0,n.A)({},s),{},{result:t.latestResult,answers:l,subProgress:d});if(_&&J&&(null===(o=J.result)||void 0===o?void 0:o.id)===t.latestResult.id)return;P(m),z(!0)}try{window.dispatchEvent(new CustomEvent("conseqx:assessment:view",{detail:{result:t.latestResult}}))}catch(i){}}function G(e){const t=function(e,t){const s=N(),n=(s[e]||[]).filter(e=>e.id!==t);return s[e]=n,I(s),n}(c,e);T(t)}(0,r.useEffect)(()=>{function e(e){const t=null===e||void 0===e?void 0:e.detail;!t||t.orgId&&t.orgId!==c||U(t)}function t(e){const{systemId:t,progress:s}=(null===e||void 0===e?void 0:e.detail)||{};t&&R(r=>{var a;const o=r[t]||{status:"not-started",progress:0,latestResult:null},i=(0,n.A)((0,n.A)({},r),{},{[t]:(0,n.A)((0,n.A)({},o),{},{status:s>=100?"completed":"in-progress",progress:Math.max(0,Math.min(100,s))})});return s>=100&&null!==(a=e.detail)&&void 0!==a&&a.result&&U(e.detail.result),i})}function s(e){const{systemId:t}=(null===e||void 0===e?void 0:e.detail)||{};t&&L(t)}function r(e){const{systemId:t,questionId:s,answer:r,totalQuestions:a,answeredCount:o}=(null===e||void 0===e?void 0:e.detail)||{};if(!t)return;const i=o||0,l=a>0?Math.round(i/a*100):0;H(e=>{const s=(0,n.A)((0,n.A)({},e),{},{[t]:l});return function(e,t){try{const s=localStorage.getItem(j),n=s?JSON.parse(s):{};n[e]=t,localStorage.setItem(j,JSON.stringify(n))}catch(s){}}(c,s),s}),R(e=>{var s;return(0,n.A)((0,n.A)({},e),{},{[t]:(0,n.A)((0,n.A)({},e[t]||{}),{},{status:i>0?"ready-to-run":"not-started",progress:(null===(s=e[t])||void 0===s?void 0:s.progress)||0,answeredCount:i})})}),m({orgId:c,systemId:t,progress:l,answeredCount:i})}return window.addEventListener("conseqx:assessment:completed",e),window.addEventListener("conseqx:assessment:progress",t),window.addEventListener("conseqx:assessment:start",s),window.addEventListener("conseqx:assessment:question-answered",r),()=>{window.removeEventListener("conseqx:assessment:completed",e),window.removeEventListener("conseqx:assessment:progress",t),window.removeEventListener("conseqx:assessment:start",s),window.removeEventListener("conseqx:assessment:question-answered",r)}},[c]),(0,r.useEffect)(()=>{if(!("BroadcastChannel"in window))return;const e=new BroadcastChannel("conseqx_assessments");return e.addEventListener("message",e=>{try{const{type:t,orgId:s,payload:r}=e.data||{};if("assessments:update"===t&&s===c){f(r||[]);const e=A(r||[]),t=V();R(s=>{const r=(0,n.A)({},s);return w.forEach(e=>{const s=k(t,e.id);r[e.id]=r[e.id]||{status:"not-started",progress:0,latestResult:null,answeredCount:s},r[e.id].answeredCount=s}),e.forEach(e=>{const s=k(t,e.systemId);r[e.systemId]={status:"completed",progress:100,latestResult:e.result,answeredCount:s}}),r})}}catch(t){}}),()=>e.close()},[c]),(0,r.useEffect)(()=>{const e=()=>{const e=C(c);H(e);const t=V();R(e=>{const s=(0,n.A)({},e);return w.forEach(e=>{const r=k(t,e.id);s[e.id]&&(s[e.id]=(0,n.A)((0,n.A)({},s[e.id]),{},{answeredCount:r,status:s[e.id].latestResult?"completed":r>0?"ready-to-run":"not-started"}))}),s})},t=t=>{t.key!==b&&t.key!==j||e()};window.addEventListener("storage",t);const s=setInterval(e,1e3);return()=>{window.removeEventListener("storage",t),clearInterval(s)}},[c]),(0,r.useEffect)(()=>{const e=Object.values(M).some(e=>(e.answeredCount||0)>0&&!e.latestResult),t=t=>{if(e)return t.preventDefault(),t.returnValue="You have unsaved assessment progress. Are you sure you want to leave?","You have unsaved assessment progress. Are you sure you want to leave?"};return e&&window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}},[M]);const Z=(0,r.useMemo)(()=>{var e;const t=l.length;return{count:t,avgScore:t?Math.round(l.reduce((e,t)=>e+(Number(t.score)||0),0)/t):null,lastRun:(null===(e=l[0])||void 0===e?void 0:e.timestamp)||null}},[l]),F=t=>{var s;let{isOpen:n}=t;if(!J&&!n)return null;const{title:r,result:a,icon:o,answers:c,subProgress:l}=J||{},d=(null===a||void 0===a?void 0:a.score)||0,m=null===a||void 0===a?void 0:a.timestamp,u={company:"Dangote Group (Nigeria)",challenge:"Similar challenges in ".concat(r.toLowerCase()," across multiple business units"),solution:"Implemented centralized governance framework with decentralized execution",result:"35% improvement in operational efficiency within 18 months",keyLessons:["Standardized processes while maintaining local flexibility","Invested in technology infrastructure for real-time monitoring","Created cross-functional teams to break down silos"]};return(0,v.jsx)(x.N,{children:n&&J&&(0,v.jsx)(h.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:K,children:(0,v.jsxs)(h.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"max-w-4xl w-full max-h-[90vh] overflow-y-auto rounded-2xl ".concat(e?"bg-gray-900 border-gray-700":"bg-white border-gray-200"," border shadow-2xl"),onClick:e=>e.stopPropagation(),children:[(0,v.jsxs)("div",{className:"sticky top-0 ".concat(e?"bg-gray-900 border-gray-700":"bg-white border-gray-200"," border-b px-6 py-4 flex items-center justify-between"),children:[(0,v.jsxs)("div",{className:"flex items-center gap-3",children:[(0,v.jsx)("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-indigo-600 to-blue-500 flex items-center justify-center text-white text-xl font-bold",children:o}),(0,v.jsxs)("div",{children:[(0,v.jsxs)("h2",{className:"text-xl font-bold ".concat(e?"text-gray-100":"text-gray-900"),children:[r," Assessment Results"]}),(0,v.jsxs)("p",{className:"text-sm ".concat(e?"text-gray-400":"text-gray-500"),children:["Completed ",m?new Date(m).toLocaleString():"Recently"]})]})]}),(0,v.jsx)("button",{onClick:K,className:"p-2 rounded-lg ".concat(e?"hover:bg-gray-800 text-gray-400":"hover:bg-gray-100 text-gray-500"),children:(0,v.jsx)(i.QCr,{size:20})})]}),(0,v.jsxs)("div",{className:"p-6 space-y-6",children:[(0,v.jsxs)("div",{className:"rounded-xl p-4 ".concat(e?"bg-gray-800":"bg-gray-50"),children:[(0,v.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,v.jsx)("h3",{className:"font-semibold ".concat(e?"text-gray-100":"text-gray-900"),children:"Overall Score"}),(0,v.jsxs)("div",{className:"text-2xl font-bold ".concat(d>=80?"text-green-500":d>=60?"text-yellow-500":"text-red-500"),children:[d,"%"]})]}),(0,v.jsx)("div",{className:"w-full h-3 rounded-full ".concat(e?"bg-gray-700":"bg-gray-200"),children:(0,v.jsx)("div",{className:"h-full rounded-full transition-all duration-500 ".concat(d>=80?"bg-green-500":d>=60?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(d,"%")}})})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{className:"text-lg font-semibold mb-4 ".concat(e?"text-gray-100":"text-gray-900"),children:"Assessment Breakdown"}),(0,v.jsx)("div",{className:"space-y-3",children:l.map((t,s)=>(0,v.jsxs)("div",{className:"p-4 rounded-lg border ".concat(e?"bg-gray-800 border-gray-700":"bg-gray-50 border-gray-200"),children:[(0,v.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,v.jsx)("h4",{className:"font-medium ".concat(e?"text-gray-200":"text-gray-800"),children:t.title}),(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)(i.A7C,{className:"text-green-500",size:16}),(0,v.jsxs)("span",{className:"text-sm ".concat(e?"text-gray-400":"text-gray-600"),children:[t.answered," / ",t.total," answered"]})]})]}),(0,v.jsx)("div",{className:"w-full mb-2",children:(0,v.jsx)(E,{pct:t.total>0?Math.round(t.answered/t.total*100):0,darkMode:e})}),(0,v.jsx)("p",{className:"text-sm ".concat(e?"text-gray-400":"text-gray-600"),children:"Questions:"}),(0,v.jsx)("ul",{className:"list-disc list-inside ml-4",children:Object.entries(c[t.id]||{}).map(t=>{let[s,n]=t;return(0,v.jsxs)("li",{className:"text-xs ".concat(e?"text-gray-300":"text-gray-700"),children:["Q",s,": ",(0,v.jsx)("span",{className:"font-semibold",children:n})]},s)})})]},t.id))})]}),(0,v.jsxs)("div",{children:[(0,v.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 ".concat(e?"text-gray-100":"text-gray-900"),children:[(0,v.jsx)(i.ZPX,{className:"text-yellow-500"}),"AI Recommendations"]}),(0,v.jsx)("div",{className:"space-y-2",children:["Implement structured feedback loops to improve communication","Establish clear performance metrics and tracking systems","Develop cross-functional collaboration protocols","Create standardized training programs for consistency"].map((t,s)=>(0,v.jsx)("div",{className:"p-3 rounded-lg ".concat(e?"bg-blue-900/20 border-blue-500/30":"bg-blue-50 border-blue-200"," border"),children:(0,v.jsx)("p",{className:"text-sm ".concat(e?"text-blue-200":"text-blue-800"),children:t})},s))})]}),(0,v.jsxs)("div",{children:[(0,v.jsxs)("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2 ".concat(e?"text-gray-100":"text-gray-900"),children:[(0,v.jsx)(i.ymh,{className:"text-green-500"}),"African Success Story"]}),(0,v.jsx)("div",{className:"rounded-xl p-4 border ".concat(e?"bg-green-900/20 border-green-500/30":"bg-green-50 border-green-200"),children:(0,v.jsxs)("div",{className:"space-y-3",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h4",{className:"font-semibold ".concat(e?"text-green-200":"text-green-800"),children:u.company}),(0,v.jsx)("p",{className:"text-sm mt-1 ".concat(e?"text-green-300":"text-green-700"),children:u.challenge})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h5",{className:"font-medium ".concat(e?"text-green-200":"text-green-800"),children:"Solution:"}),(0,v.jsx)("p",{className:"text-sm ".concat(e?"text-green-300":"text-green-700"),children:u.solution})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h5",{className:"font-medium ".concat(e?"text-green-200":"text-green-800"),children:"Result:"}),(0,v.jsx)("p",{className:"text-sm ".concat(e?"text-green-300":"text-green-700"),children:u.result})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("h5",{className:"font-medium ".concat(e?"text-green-200":"text-green-800"),children:"Key Lessons:"}),(0,v.jsx)("ul",{className:"list-disc list-inside space-y-1 mt-1",children:u.keyLessons.map((t,s)=>(0,v.jsx)("li",{className:"text-sm ".concat(e?"text-green-300":"text-green-700"),children:t},s))})]})]})})]})]})]})},(null===(s=J.result)||void 0===s?void 0:s.id)||"detail-modal")})};return(0,v.jsxs)("section",{children:[(0,v.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,v.jsxs)("div",{children:[(0,v.jsx)("h2",{className:"".concat(e?"text-gray-100":"text-gray-900"," text-lg font-semibold"),children:"Assessments"}),(0,v.jsx)("p",{className:"mt-2 text-sm ".concat(e?"text-gray-300":"text-gray-600"),children:"Run or view system assessments. Systems update in real-time as runs progress and complete."})]}),(0,v.jsx)("div",{className:"flex items-center gap-3",children:(0,v.jsxs)("div",{className:"".concat(e?"text-gray-200":"text-sm text-gray-700"),children:[(0,v.jsxs)("div",{children:["Recent runs: ",(0,v.jsx)("span",{className:"font-semibold",children:Z.count})]}),(0,v.jsxs)("div",{className:"".concat(e?"text-gray-400":"text-xs text-gray-500"),children:["Avg score: ",null!==Z.avgScore?"".concat(Z.avgScore,"%"):"\u2014"]})]})})]}),(0,v.jsxs)("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-3 gap-4",children:[(0,v.jsx)("div",{className:"lg:col-span-2",children:(0,v.jsx)("div",{className:"rounded-xl p-3 border ".concat(e?"bg-gray-900 border-gray-700":"bg-white border-gray-100"," shadow-sm"),children:(0,v.jsx)(o.A,{darkMode:e,onComplete:e=>U(e),onAnswersChange:e=>{Q.current=e,D(e),R(t=>{const s=(0,n.A)({},t);return w.forEach(t=>{const r=k(e,t.id);s[t.id]?s[t.id]=(0,n.A)((0,n.A)({},s[t.id]),{},{answeredCount:r,status:s[t.id].latestResult?"completed":r>0?"ready-to-run":"not-started"}):s[t.id]={status:r>0?"ready-to-run":"not-started",progress:0,latestResult:null,answeredCount:r}}),s})},onQuestionAnswered:e=>{window.dispatchEvent(new CustomEvent("conseqx:assessment:question-answered",{detail:(0,n.A)((0,n.A)({},e),{},{orgId:c,timestamp:Date.now()})}))},onSystemStart:e=>{window.dispatchEvent(new CustomEvent("conseqx:assessment:start",{detail:{systemId:e,orgId:c,timestamp:Date.now()}}))},showClientInfo:!1,customSystems:y.n,ceoPartnerMode:!0,orgId:c,initialAnswers:q,enableRealTimeTracking:!0},e?"assessment-dark":"assessment-light")})}),(0,v.jsxs)("aside",{className:"rounded-xl p-3 border ".concat(e?"bg-gray-900 border-gray-700":"bg-white border-gray-100"," shadow-sm"),children:[(0,v.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,v.jsx)("div",{className:"text-sm font-semibold ".concat(e?"text-gray-100":"text-gray-900"),children:"Systems"}),(0,v.jsxs)("div",{className:"".concat(e?"text-xs text-gray-400":"text-xs text-gray-500"," flex items-center gap-2"),children:[(0,v.jsx)(i.OKX,{})," ",(0,v.jsx)("span",{children:l.length})]})]}),(0,v.jsx)("div",{className:"space-y-2",children:w.map(t=>{const s=M[t.id]||{status:"not-started",progress:0,latestResult:null,answeredCount:0};return(0,v.jsx)(S,{s:t,state:s,onStart:X,onView:Y,onRemove:G,darkMode:e},t.id)})}),(0,v.jsx)("div",{className:"mt-3 border-t pt-2 ".concat(e?"text-xs text-gray-400 border-gray-800":"text-xs text-gray-500 border-gray-200"),children:(0,v.jsxs)("div",{className:"flex items-center justify-between",children:[(0,v.jsxs)("div",{className:"flex items-center gap-2",children:[(0,v.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(e?"bg-blue-500":"bg-blue-600"," animate-pulse")}),(0,v.jsx)("span",{children:"Real-time assessment tracking with X-Ultra intelligence"})]}),(0,v.jsx)("div",{className:"flex items-center gap-1",children:Object.values(M).some(e=>(e.answeredCount||0)>0)&&(0,v.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs ".concat(e?"bg-green-900/30 text-green-300":"bg-green-100 text-green-700"),children:"Active"})})]})})]})]}),(0,v.jsx)(F,{isOpen:_})]})}},55805:(e,t,s)=>{s.d(t,{h1:()=>i,tB:()=>o});const n="conseqx_org_health_v1";function r(){try{const e=localStorage.getItem(n);return e?JSON.parse(e):{}}catch(e){return{}}}function a(e,t){e||(e="anon");const s=r(),a=s[e]||[];a.unshift(t),s[e]=a.slice(0,300),function(e){try{localStorage.setItem(n,JSON.stringify(e))}catch(t){}}(s);try{window.dispatchEvent(new CustomEvent("conseqx:orghealth:completed",{detail:{orgId:e,result:t}}))}catch(o){}}function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const s=e.orgId||"anon",n=e.systemId||e.system||"general",r=e.meta||{},o="number"===typeof r.networkDensity?Math.max(0,Math.min(1,r.networkDensity)):Number(e.score)?Math.min(1,e.score/100):.5,i="number"===typeof r.sentiment?r.sentiment:null,c=null!==i?Math.max(0,Math.min(1,(i+1)/2)):Math.min(1,(Number(e.score)||0)/100),l="number"===typeof r.operational?Math.max(0,Math.min(1,r.operational)):Math.min(1,(Number(e.score)||0)/100);let d={networkDensity:.4,sentiment:.3,operational:.3};const m={interdependency:{networkDensity:.6,sentiment:.2,operational:.2},investigation:{networkDensity:.2,sentiment:.2,operational:.6},inlignment:{networkDensity:.2,sentiment:.4,operational:.4},orchestration:{networkDensity:.3,sentiment:.2,operational:.5},illustration:{networkDensity:.2,sentiment:.5,operational:.3},interpretation:{networkDensity:.2,sentiment:.5,operational:.3}};m[n]&&(d=m[n]);const u={networkDensity:o,sentiment:c,operational:l},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=Object.keys(t);if(0===s.length){const t=Object.values(e);if(0===t.length)return 0;const s=t.reduce((e,t)=>e+(Number(t)||0),0)/t.length;return Math.round(100*s)}const n=s.reduce((e,s)=>e+(Number(t[s])||0),0)||1,r=s.reduce((s,n)=>s+(Number(e[n])||0)*(Number(t[n])||0),0)/n;return Math.round(100*Math.max(0,Math.min(1,r)))}(u,d),x={id:e.id||"oh-".concat(Date.now().toString(36)),orgId:s,systemId:n,score:g,breakdown:u,provenance:{sourceAssessmentId:e.id,algorithmVersion:"orghealth-v1",createdAt:Date.now()},timestamp:Date.now(),original:{title:e.title,owner:e.owner,meta:e.meta||{}}};a(s,x);const h={id:"rec-".concat(Date.now().toString(36)),title:"Investigate ".concat(n," - ").concat(g,"%"),summary:"System ".concat(n," received a score of ").concat(g,"%. Key drivers: ").concat(Object.entries(u).map(e=>{let[t,s]=e;return"".concat(t,"=").concat(Math.round(100*s),"%")}).join(", "),"."),impact:g<60?"High \u2014 potential risk":g<75?"Medium":"Low",severity:g<60?"warning":"improvement",predictions:{short:g<60?"Short term: Operational friction, delays.":"Short term: Stable",mid:g<60?"Mid term: Reduced throughput if unresolved.":"Mid term: Maintain improvements",long:"Long term: Monitor trends"},evidence:["Derived from assessment ".concat(e.id),...e.meta&&e.meta.notes?[e.meta.notes]:[]],comparables:[],recommendedMeeting:{title:"Cross-functional sync: ".concat(n),urgency:g<60?"Urgent":"High",attendees:["Head of Product","Head of Engineering","Ops Lead"],proposedDurationMin:45,agenda:["Review findings","Assign owners","Agree next steps"]},source:"Assessment: ".concat(n),createdAt:Date.now()};try{window.dispatchEvent(new CustomEvent("conseqx:orghealth:recommendation",{detail:{orgId:s,recommendations:[h]}}))}catch(t){}return x}catch(s){return console.error("orgHealth.ingestAssessment error",s),null}}function i(e){return r()[e]||[]}}}]);
//# sourceMappingURL=376.7bf5c019.chunk.js.map