{"version":3,"file":"static/js/961.c1257ea9.chunk.js","mappings":"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","sources":["pages/CEO_Dashboard/services/notificationService.js","pages/CEO_Dashboard/CEODashboardComponents/DataManagement.js"],"sourcesContent":["// Lightweight notification service stub for development\r\n// Stores outbound notifications in localStorage under `conseqx_notifications_outbox`\r\n\r\nconst OUTBOX_KEY = 'conseqx_notifications_outbox_v1';\r\n\r\nfunction readOutbox() {\r\n  try { const raw = localStorage.getItem(OUTBOX_KEY); return raw ? JSON.parse(raw) : []; } catch { return []; }\r\n}\r\n\r\nfunction writeOutbox(arr) {\r\n  try { localStorage.setItem(OUTBOX_KEY, JSON.stringify(arr)); } catch (e) {}\r\n}\r\n\r\nfunction sendEmail({ to, subject, body }) {\r\n  const out = readOutbox();\r\n  out.unshift({ id: `O-${Date.now().toString(36)}`, channel: 'email', to, subject, body, ts: Date.now() });\r\n  writeOutbox(out);\r\n  // emit event for UI\r\n  try { window.dispatchEvent(new CustomEvent('conseqx:notifications:outbox', { detail: { channel: 'email', to, subject } })); } catch (e) {}\r\n  return Promise.resolve({ ok: true });\r\n}\r\n\r\nfunction sendSMS({ to, body }) {\r\n  const out = readOutbox();\r\n  out.unshift({ id: `O-${Date.now().toString(36)}`, channel: 'sms', to, body, ts: Date.now() });\r\n  writeOutbox(out);\r\n  try { window.dispatchEvent(new CustomEvent('conseqx:notifications:outbox', { detail: { channel: 'sms', to } })); } catch (e) {}\r\n  return Promise.resolve({ ok: true });\r\n}\r\n\r\nfunction listOutbox() { return readOutbox(); }\r\n\r\nexport default { sendEmail, sendSMS, listOutbox };\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useOutletContext } from \"react-router-dom\";\r\nimport { FaUpload, FaFileCsv, FaFileAlt, FaSearch, FaTrash } from \"react-icons/fa\";\r\nimport * as svc from \"../services/serviceSelector\";\r\nimport notifier from \"../services/notificationService\";\r\n\r\nconst STORAGE_UPLOADS = \"conseqx_uploads_v1\";\r\nconst BINARY_EXTS = [\"docx\",\"pdf\",\"xlsx\",\"xls\",\"png\",\"jpg\",\"jpeg\",\"gif\",\"zip\",\"pptx\",\"ppt\"];\r\n\r\nconst STORAGE_REMINDERS = \"conseqx_reports_reminders_v3\";\r\n\r\nfunction readUploads() {\r\n  try {\r\n    const raw = localStorage.getItem(STORAGE_UPLOADS);\r\n    return raw ? JSON.parse(raw) : [];\r\n  } catch {\r\n    return [];\r\n  }\r\n}\r\n\r\nfunction writeUploads(arr) {\r\n  try {\r\n    const safe = (arr || []).map((u) => {\r\n      const copy = { ...u };\r\n      try { delete copy.objectUrl; } catch {}\r\n      return copy;\r\n    });\r\n    localStorage.setItem(STORAGE_UPLOADS, JSON.stringify(safe));\r\n  } catch {}\r\n}\r\n\r\nfunction readReminders() {\r\n  try {\r\n    const raw = localStorage.getItem(STORAGE_REMINDERS);\r\n    return raw ? JSON.parse(raw) : [];\r\n  } catch {\r\n    return [];\r\n  }\r\n}\r\n\r\nfunction writeReminders(arr) {\r\n  try {\r\n    localStorage.setItem(STORAGE_REMINDERS, JSON.stringify(arr));\r\n  } catch {}\r\n}\r\n\r\n/* tiny CSV fallback */\r\nfunction parseCSV(text) {\r\n  const lines = text.split(/\\r?\\n/).filter(Boolean);\r\n  if (lines.length === 0) return [];\r\n  const headers = lines[0].split(\",\").map((h) => h.trim());\r\n  return lines.slice(1).map((line) => {\r\n    const cols = line.split(\",\");\r\n    const obj = {};\r\n    headers.forEach((h, i) => (obj[h] = cols[i] ? cols[i].trim() : \"\"));\r\n    return obj;\r\n  });\r\n}\r\n\r\nexport default function DataManagement() {\r\n  const { org = null } = useOutletContext();\r\n  const orgId = org?.id || \"anon\";\r\n\r\n  const [uploads, setUploads] = useState(() => readUploads());\r\n  // auto-ingest removed intentionally per your instruction\r\n  const [templateOpen, setTemplateOpen] = useState(false);\r\n  const [completionModal, setCompletionModal] = useState({ open: false, uploadId: null, name: '' });\r\n  const [modal, setModal] = useState({ open: false, title: '', body: '', onConfirm: null });\r\n  const [dragging, setDragging] = useState(false);\r\n  const [processing, setProcessing] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n  const fileRef = useRef(null);\r\n\r\n  // --- DARK MODE DETECTION (fixes the 'darkMode is not defined' error) ---\r\n  const [darkMode, setDarkMode] = useState(() => {\r\n    if (typeof window === \"undefined\" || typeof document === \"undefined\") return false;\r\n    const docHas = document.documentElement.classList.contains(\"dark\");\r\n    const mq = window.matchMedia && window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\r\n    return docHas || mq;\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (typeof window === \"undefined\" || typeof document === \"undefined\") return;\r\n\r\n    // Observe class changes on <html> so toggles of 'dark' are detected\r\n    const obs = new MutationObserver(() => {\r\n      setDarkMode(document.documentElement.classList.contains(\"dark\") || (window.matchMedia && window.matchMedia(\"(prefers-color-scheme: dark)\").matches));\r\n    });\r\n    obs.observe(document.documentElement, { attributes: true, attributeFilter: [\"class\"] });\r\n\r\n    // Also listen for system preference changes\r\n    const mq = window.matchMedia && window.matchMedia(\"(prefers-color-scheme: dark)\");\r\n    const mqListener = () => {\r\n      setDarkMode(document.documentElement.classList.contains(\"dark\") || (mq && mq.matches));\r\n    };\r\n    if (mq) {\r\n      if (typeof mq.addEventListener === \"function\") {\r\n        mq.addEventListener(\"change\", mqListener);\r\n      } else if (typeof mq.addListener === \"function\") {\r\n        mq.addListener(mqListener);\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      obs.disconnect();\r\n      if (mq) {\r\n        if (typeof mq.removeEventListener === \"function\") {\r\n          mq.removeEventListener(\"change\", mqListener);\r\n        } else if (typeof mq.removeListener === \"function\") {\r\n          mq.removeListener(mqListener);\r\n        }\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // ------------------------------------------------------------------\r\n\r\n  useEffect(() => {\r\n    writeUploads(uploads);\r\n  }, [uploads]);\r\n\r\n  // Listen for analysis-ready notifications to surface a friendly modal\r\n  useEffect(() => {\r\n    function onReady(e) {\r\n      try {\r\n        const d = e?.detail || {};\r\n        setCompletionModal({ open: true, uploadId: d.uploadId || null, name: d.name || 'upload' });\r\n        try { notifier.sendEmail({ to: (org && org.email) || 'ceo@example.com', subject: `Analysis complete: ${d.name}`, body: `Your upload ${d.name} has completed processing.` }); } catch (e) {}\r\n      } catch (err) {}\r\n    }\r\n    window.addEventListener('conseqx:notifications:updated', onReady);\r\n    return () => window.removeEventListener('conseqx:notifications:updated', onReady);\r\n  }, [org]);\r\n\r\n  async function onFiles(files) {\r\n    const f = files[0];\r\n    if (!f) return;\r\n    setProcessing(true);\r\n    setProgress(8);\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = async (ev) => {\r\n      setProgress(35);\r\n      const text = ev.target.result;\r\n      let parsed = null;\r\n      const nameLower = (f.name || \"\").toLowerCase();\r\n      const ext = nameLower.includes(\".\") ? nameLower.split(\".\").pop() : \"\";\r\n\r\n      const isBinary = BINARY_EXTS.includes(ext) || (f.type && (f.type.startsWith(\"image/\") || f.type === \"application/pdf\"));\r\n\r\n      if (isBinary) {\r\n        parsed = { type: 'binary', filename: f.name, size: f.size };\r\n      } else if (f.type === \"application/json\" || f.name.endsWith(\".json\")) {\r\n        try {\r\n          parsed = JSON.parse(text);\r\n        } catch (e) {\r\n          parsed = null;\r\n        }\r\n      } else if (f.type.includes(\"csv\") || f.name.endsWith(\".csv\") || f.name.endsWith(\".txt\")) {\r\n        try {\r\n          const Papa = await import('papaparse').then(m => m.default || m).catch(() => null);\r\n          if (Papa && typeof Papa.parse === 'function') {\r\n            const res = Papa.parse(text, { header: true, skipEmptyLines: true });\r\n            parsed = res.data;\r\n          } else {\r\n            parsed = parseCSV(text);\r\n          }\r\n        } catch (e) {\r\n          parsed = parseCSV(text);\r\n        }\r\n      } else if (ext === 'xlsx' || ext === 'xls') {\r\n        try {\r\n          const XLSX = await import('xlsx').then(m => m.default || m).catch(() => null);\r\n          if (XLSX && typeof XLSX.read === 'function') {\r\n            const wb = XLSX.read(text, { type: 'binary' });\r\n            const sheetName = wb.SheetNames[0];\r\n            const ws = wb.Sheets[sheetName];\r\n            parsed = XLSX.utils.sheet_to_json(ws, { defval: '' });\r\n          } else {\r\n            parsed = { type: 'binary', filename: f.name };\r\n          }\r\n        } catch (e) {\r\n          parsed = { type: 'binary', filename: f.name };\r\n        }\r\n      } else {\r\n        const sanitized = String(text || \"\").replace(/[^\t\\n\\r \\x20-\\x7E]/g, \" \");\r\n        parsed = { type: 'text', filename: f.name, previewText: sanitized.substring(0, 400) };\r\n      }\r\n\r\n      setProgress(65);\r\n      const valid = parsed && (Array.isArray(parsed) ? parsed.length > 0 : Object.keys(parsed).length > 0);\r\n\r\n      function categorizeFile(name = \"\", preview = \"\") {\r\n        const txt = `${name} ${typeof preview === 'string' ? preview : JSON.stringify(preview)}`.toLowerCase();\r\n        const map = [\r\n          [\"interpretation\", [\"finance\", \"revenue\", \"profit\", \"financial\", \"balance\", \"income\", \"expenses\"]],\r\n          [\"investigation\", [\"survey\", \"feedback\", \"csat\", \"comments\", \"responses\", \"sentiment\", \"log\", \"logs\", \"data\"]],\r\n          [\"interdependency\", [\"orgchart\", \"org chart\", \"organization chart\", \"hierarchy\", \"reporting\"]],\r\n          [\"iteration\", [\"cycle\", \"sprint\", \"iteration\", \"lead time\", \"throughput\"]],\r\n          [\"alignment\", [\"goal\", \"kpi\", \"objective\", \"okr\", \"alignment\"]],\r\n          [\"illustration\", [\"process\", \"flow\", \"diagram\", \"procedure\", \"manual\", \"presentation\", \"ppt\"]]\r\n        ];\r\n        const hits = [];\r\n        map.forEach(([key, kws]) => {\r\n          for (const kw of kws) {\r\n            if (txt.includes(kw)) {\r\n              hits.push(key);\r\n              break;\r\n            }\r\n          }\r\n        });\r\n        return hits.length ? Array.from(new Set(hits)) : [\"investigation\"];\r\n      }\r\n\r\n      const record = {\r\n        id: `U-${Date.now().toString(36)}`,\r\n        name: f.name,\r\n        type: f.type || \"unknown\",\r\n        timestamp: Date.now(),\r\n        valid: Boolean(valid),\r\n        preview: Array.isArray(parsed) ? parsed.slice(0, 3) : parsed,\r\n        analyzedSystems: [],\r\n        objectUrl: undefined,\r\n      };\r\n\r\n      if (parsed && parsed.type === 'binary') {\r\n        try { record.objectUrl = URL.createObjectURL(f); } catch (e) {}\r\n      }\r\n\r\n      // simulate processing time\r\n      setTimeout(() => {\r\n        setProgress(100);\r\n        setProcessing(false);\r\n        setProgress(0);\r\n\r\n        const systems = categorizeFile(f.name, JSON.stringify(record.preview || \"\"));\r\n        record.analyzedSystems = systems;\r\n        setUploads((prev) => [record, ...prev]);\r\n\r\n        // trigger service assessments (best-effort)\r\n        systems.forEach(async (sys) => {\r\n          try { await svc.runAssessment(orgId, sys); } catch (e) { try { console.warn(\"runAssessment failed:\", e); } catch {} }\r\n        });\r\n\r\n        // store diff metadata if prev exists\r\n        try {\r\n          const prev = uploads[0];\r\n          if (prev) {\r\n            const diffKey = 'conseqx_upload_diffs_v1';\r\n            const raw = localStorage.getItem(diffKey);\r\n            const diffs = raw ? JSON.parse(raw) : [];\r\n            diffs.unshift({ id: `${record.id}-vs-${prev.id}`, left: record.id, right: prev.id, ts: Date.now() });\r\n            localStorage.setItem(diffKey, JSON.stringify(diffs));\r\n          }\r\n        } catch (e) {}\r\n\r\n        // notifications for analysis-ready\r\n        try {\r\n          const makeNote = (title) => ({ id: `N-${Date.now().toString(36)}`, uploadId: record.id, read: false, title, body: `Analysis ready for ${record.name}`, ts: Date.now(), type: \"upload\" });\r\n\r\n          try {\r\n            const noteKey = \"conseqx_uploads_notifications_v1\";\r\n            const raw = localStorage.getItem(noteKey);\r\n            const notes = raw ? JSON.parse(raw) : [];\r\n            notes.unshift(makeNote(`Analysis ready: ${record.name}`));\r\n            localStorage.setItem(noteKey, JSON.stringify(notes));\r\n          } catch (e) {}\r\n\r\n          const reportKeys = [\"conseqx_reports_notifications_v3\", \"conseqx_reports_notifications_v1\"];\r\n          reportKeys.forEach((k) => {\r\n            try {\r\n              const raw = localStorage.getItem(k);\r\n              const notes = raw ? JSON.parse(raw) : [];\r\n              notes.unshift(makeNote(`Analysis ready: ${record.name}`));\r\n              localStorage.setItem(k, JSON.stringify(notes));\r\n            } catch (e) {}\r\n          });\r\n\r\n          try { window.dispatchEvent(new CustomEvent(\"conseqx:notifications:updated\", { detail: { uploadId: record.id, name: record.name } })); } catch (e) {}\r\n        } catch (e) {}\r\n      }, 700 + Math.random() * 900);\r\n    };\r\n\r\n    reader.readAsText(f);\r\n  }\r\n\r\n  function handleDrop(e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setDragging(false);\r\n    const files = e.dataTransfer.files;\r\n    onFiles(files);\r\n  }\r\n\r\n  function handlePick() {\r\n    if (fileRef.current) fileRef.current.click();\r\n  }\r\n\r\n  function removeUpload(id) {\r\n    setUploads((prev) => {\r\n      const toRemove = prev.find((u) => u.id === id);\r\n      if (toRemove && toRemove.objectUrl) {\r\n        try { URL.revokeObjectURL(toRemove.objectUrl); } catch (e) {}\r\n      }\r\n      return prev.filter((u) => u.id !== id);\r\n    });\r\n  }\r\n\r\n  function revertToUpload(id) {\r\n    setUploads((prev) => {\r\n      const found = prev.find(u => u.id === id);\r\n      if (!found) return prev;\r\n      const rest = prev.filter(u => u.id !== id);\r\n      return [ { ...found, timestamp: Date.now() }, ...rest ];\r\n    });\r\n  }\r\n\r\n  function viewDiff(leftId, rightId) {\r\n    try {\r\n      const raw = localStorage.getItem('conseqx_upload_diffs_v1');\r\n      const diffs = raw ? JSON.parse(raw) : [];\r\n      const d = diffs.find(x => x.id === `${leftId}-vs-${rightId}`) || diffs.find(x => x.left === leftId && x.right === rightId);\r\n      setModal({ open: true, title: 'Compare uploads', body: d ? `Comparison record created at ${new Date(d.ts).toLocaleString()}` : 'No precomputed diff available for these uploads.', onConfirm: null });\r\n    } catch (e) { setModal({ open: true, title: 'Compare uploads', body: 'Error reading diffs', onConfirm: null }); }\r\n  }\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      <div className=\"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2\">\r\n        <div>\r\n          <h2 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">Data Management</h2>\r\n          <div className=\"text-sm text-gray-500 dark:text-gray-400\">Manage uploads, validation and processing</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"mt-4 grid grid-cols-1 lg:grid-cols-12 gap-6\">\r\n        {/* left column */}\r\n        <div className={`lg:col-span-5`}>\r\n          <div\r\n            onDragOver={(e) => { e.preventDefault(); setDragging(true); }}\r\n            onDragLeave={() => setDragging(false)}\r\n            onDrop={handleDrop}\r\n            className={`rounded-lg p-6 border-2 border-dashed transition-colors\r\n              ${dragging ? \"border-blue-500 bg-blue-50/20 dark:bg-blue-900/20\" : \"border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-800\"}`}\r\n          >\r\n            <div className={`flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4`}>\r\n              <div className=\"flex items-center gap-3\">\r\n                <FaUpload className=\"text-3xl text-gray-600 dark:text-gray-200\" />\r\n                <div>\r\n                  <div className=\"font-medium text-gray-900 dark:text-gray-100\">Drag & drop files here</div>\r\n                  <div className=\"text-sm text-gray-500 dark:text-gray-400 mt-1\">CSV, JSON, TXT (PDFs as text) — files processed client-side and stored locally for analysis</div>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex items-center gap-2\">\r\n                <button onClick={handlePick} className=\"px-3 py-2 rounded-md bg-blue-600 text-white text-sm\">Choose file</button>\r\n\r\n                <div className=\"relative\">\r\n                  <button\r\n                    onClick={() => setTemplateOpen((s) => !s)}\r\n                    className=\"px-3 py-2 rounded-md border text-sm bg-white dark:bg-gray-700 dark:text-gray-100 border-gray-300 dark:border-gray-600\"\r\n                  >\r\n                    Download template\r\n                  </button>\r\n                  {templateOpen && (\r\n                    <div className=\"absolute right-0 mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded shadow p-2 w-56 z-40\">\r\n                      <a href=\"/sample-data/template-financials.csv\" download className=\"block px-2 py-1 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded\">Financials template</a>\r\n                      <a href=\"/sample-data/template-survey.csv\" download className=\"block px-2 py-1 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded\">Survey template</a>\r\n                      <div className=\"mt-2 text-xs text-gray-500 dark:text-gray-400\">Tip: open the CSV and fill rows before upload.</div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                <button\r\n                  onClick={() => {\r\n                    try {\r\n                      uploads.forEach((u) => { if (u && u.objectUrl) try { URL.revokeObjectURL(u.objectUrl); } catch (e) {} });\r\n                    } catch (e) {}\r\n                    setUploads([]);\r\n                    writeUploads([]);\r\n                  }}\r\n                  className=\"px-3 py-2 rounded-md border text-sm bg-white dark:bg-gray-700 dark:text-gray-100 border-gray-300 dark:border-gray-600\"\r\n                >\r\n                  Clear history\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            <input ref={fileRef} type=\"file\" className=\"hidden\" onChange={(e) => onFiles(e.target.files)} />\r\n\r\n            {processing && (\r\n              <div className=\"mt-4\">\r\n                <div className=\"text-sm text-gray-700 dark:text-gray-300\">Validation progress</div>\r\n                <div className=\"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-3 mt-2 overflow-hidden\">\r\n                  <div style={{ width: `${progress}%` }} className=\"h-full bg-yellow-500 transition-all\" />\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"mt-6\">\r\n            <h3 className=\"text-sm font-semibold text-gray-900 dark:text-gray-100\">Reminder Scheduler</h3>\r\n            <p className=\"text-xs text-gray-500 dark:text-gray-400\">Set upload reminders. Reminders persist locally and appear under Reports → Reminders.</p>\r\n            <ReminderScheduler />\r\n          </div>\r\n        </div>\r\n\r\n        {/* right column */}\r\n        <div className=\"lg:col-span-7\">\r\n          <div className=\"rounded-lg p-4 border bg-white dark:bg-gray-800 dark:border-gray-700\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"font-medium text-gray-900 dark:text-gray-100\">Upload history</h3>\r\n              <div className=\"text-sm text-gray-500 dark:text-gray-400\">{uploads.length} upload{uploads.length !== 1 ? \"s\" : \"\"}</div>\r\n            </div>\r\n\r\n            <div className=\"mt-3\">\r\n              {uploads.length === 0 && <div className=\"text-sm text-gray-500 dark:text-gray-400\">No uploads yet. Upload a CSV or JSON to get started.</div>}\r\n\r\n              {/* Desktop/tablet view */}\r\n              {uploads.length > 0 && (\r\n                <div>\r\n                  <div className=\"hidden sm:block overflow-x-auto mt-2\">\r\n                    <table className=\"w-full text-sm min-w-[700px]\">\r\n                      <thead>\r\n                        <tr className=\"text-left text-xs text-gray-500 dark:text-gray-400\">\r\n                          <th className=\"py-2\">Timestamp</th>\r\n                          <th className=\"py-2\">File</th>\r\n                          <th className=\"py-2\">Valid</th>\r\n                          <th className=\"py-2\">Preview</th>\r\n                          <th className=\"py-2\"></th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {uploads.map((u) => (\r\n                          <tr key={u.id} className=\"border-t align-top border-gray-200 dark:border-gray-700\">\r\n                            <td className=\"py-2 align-top text-xs text-gray-600 dark:text-gray-300\">{new Date(u.timestamp).toLocaleString()}</td>\r\n                            <td className=\"py-2 align-top font-medium text-gray-900 dark:text-gray-100\">{u.name}</td>\r\n                            <td className=\"py-2 align-top text-xs\">{u.valid ? <span className=\"text-green-600\">Yes</span> : <span className=\"text-red-600\">No</span>}</td>\r\n                            <td className=\"py-2 align-top\">\r\n                              {u.preview && u.preview.type === 'binary' ? (\r\n                                <div className=\"text-xs text-gray-800 dark:text-gray-200\">\r\n                                  <div className=\"font-medium\">{u.preview.filename || u.name}</div>\r\n                                  <div className=\"text-xs text-gray-500 dark:text-gray-400\">{u.preview.size ? `${u.preview.size} bytes` : 'binary file'}</div>\r\n                                  {u.objectUrl ? (\r\n                                    <a className=\"text-xs text-blue-600 dark:text-blue-400 underline mt-1 inline-block\" href={u.objectUrl} download={u.name}>Download</a>\r\n                                  ) : (\r\n                                    <div className=\"text-xs text-gray-400 dark:text-gray-500\">Download available while session is open</div>\r\n                                  )}\r\n                                </div>\r\n                              ) : Array.isArray(u.preview) ? (\r\n                                <div className=\"max-h-40 overflow-auto bg-gray-50 dark:bg-gray-700/40 p-2 rounded text-xs\">\r\n                                  <table className=\"w-full text-xs\">\r\n                                    <thead>\r\n                                      <tr>\r\n                                        {(Object.keys(u.preview[0] || {}).slice(0,6)).map((h) => (\r\n                                          <th key={h} className=\"text-left pr-2 text-gray-600 dark:text-gray-300\">{h}</th>\r\n                                        ))}\r\n                                      </tr>\r\n                                    </thead>\r\n                                    <tbody>\r\n                                      {u.preview.slice(0,3).map((row, idx) => (\r\n                                        <tr key={idx}>\r\n                                          {Object.values(row).slice(0,6).map((v, i) => (\r\n                                            <td key={i} className=\"pr-2 align-top text-gray-800 dark:text-gray-200\">{String(v)}</td>\r\n                                          ))}\r\n                                        </tr>\r\n                                      ))}\r\n                                    </tbody>\r\n                                  </table>\r\n                                </div>\r\n                              ) : (u.preview && u.preview.type === 'text') ? (\r\n                                <div className=\"max-h-40 overflow-auto break-words bg-gray-50 dark:bg-gray-700/40 p-2 rounded text-xs whitespace-pre-wrap text-gray-800 dark:text-gray-200\">{u.preview.previewText}</div>\r\n                              ) : (\r\n                                <div className=\"max-h-40 overflow-auto bg-gray-50 dark:bg-gray-700/40 p-2 rounded text-xs text-gray-800 dark:text-gray-200\">\r\n                                  <pre className=\"whitespace-pre-wrap\">{(() => {\r\n                                    try {\r\n                                      const s = typeof u.preview === 'string' ? u.preview : JSON.stringify(u.preview || {}, null, 2);\r\n                                      return s.length > 1000 ? s.slice(0, 1000) + '…' : s;\r\n                                    } catch (e) { return String(u.preview); }\r\n                                  })()}</pre>\r\n                                </div>\r\n                              )}\r\n                            </td>\r\n                            <td className=\"py-2 align-top text-right\">\r\n                              <div className=\"flex items-center justify-end gap-2\">\r\n                                <button onClick={() => viewDiff(u.id, uploads[0]?.id)} className=\"px-2 py-1 rounded-md text-xs border bg-white dark:bg-gray-700 dark:text-gray-100 border-gray-300 dark:border-gray-600\">Compare</button>\r\n                                <button onClick={() => revertToUpload(u.id)} className=\"px-2 py-1 rounded-md text-xs border bg-white dark:bg-gray-700 dark:text-gray-100 border-gray-300 dark:border-gray-600\">Revert</button>\r\n                                <button onClick={() => removeUpload(u.id)} className=\"px-2 py-1 rounded-md text-xs border text-red-600 bg-white dark:bg-gray-700 dark:text-red-400 border-gray-300 dark:border-gray-600\"><FaTrash className=\"inline mr-1\"/>Remove</button>\r\n                              </div>\r\n                            </td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n\r\n                  {/* Mobile stacked cards */}\r\n                  <div className=\"sm:hidden mt-2 space-y-3\">\r\n                    {uploads.map((u) => (\r\n                      <div key={u.id} className=\"border rounded p-3 bg-white dark:bg-gray-800 dark:border-gray-700\">\r\n                        <div className=\"flex items-start justify-between gap-2\">\r\n                          <div className=\"min-w-0\">\r\n                            <div className=\"font-medium truncate text-gray-900 dark:text-gray-100\">{u.name}</div>\r\n                            <div className=\"text-xs text-gray-500 dark:text-gray-400\">{new Date(u.timestamp).toLocaleString()}</div>\r\n                            <div className=\"text-xs mt-2\">{u.valid ? <span className=\"text-green-600\">Valid</span> : <span className=\"text-red-600\">Invalid</span>}</div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"mt-2 text-xs text-gray-800 dark:text-gray-200\">\r\n                          {u.preview && u.preview.type === 'binary' ? (\r\n                            <>\r\n                              <div className=\"font-medium\">{u.preview.filename || u.name}</div>\r\n                              <div className=\"text-xs text-gray-500 dark:text-gray-400\">{u.preview.size ? `${u.preview.size} bytes` : 'binary file'}</div>\r\n                              {u.objectUrl ? <a href={u.objectUrl} download={u.name} className=\"text-xs text-blue-600 dark:text-blue-400 underline\">Download</a> : <div className=\"text-xs text-gray-400 dark:text-gray-500\">Download available while session open</div>}\r\n                            </>\r\n                          ) : Array.isArray(u.preview) ? (\r\n                            <div className=\"max-h-28 overflow-auto bg-gray-50 dark:bg-gray-700/40 p-2 rounded text-xs\">\r\n                              <pre className=\"whitespace-pre-wrap text-gray-800 dark:text-gray-200\">{JSON.stringify(u.preview.slice(0,2), null, 2)}</pre>\r\n                            </div>\r\n                          ) : (u.preview && u.preview.type === 'text') ? (\r\n                            <div className=\"max-h-28 overflow-auto bg-gray-50 dark:bg-gray-700/40 p-2 rounded text-xs whitespace-pre-wrap text-gray-800 dark:text-gray-200\">{u.preview.previewText}</div>\r\n                          ) : (\r\n                            <div className=\"max-h-28 overflow-auto bg-gray-50 dark:bg-gray-700/40 p-2 rounded text-xs text-gray-800 dark:text-gray-200\">\r\n                              <pre className=\"whitespace-pre-wrap\">{(() => {\r\n                                try {\r\n                                  const s = typeof u.preview === 'string' ? u.preview : JSON.stringify(u.preview || {}, null, 2);\r\n                                  return s.length > 500 ? s.slice(0, 500) + '…' : s;\r\n                                } catch (e) { return String(u.preview); }\r\n                              })()}</pre>\r\n                            </div>\r\n                          )}\r\n                        </div>\r\n\r\n                        <div className=\"mt-3 flex items-center justify-end gap-2\">\r\n                          <button onClick={() => viewDiff(u.id, uploads[0]?.id)} className=\"px-2 py-1 rounded-md text-xs border bg-white dark:bg-gray-700 dark:text-gray-100 border-gray-300 dark:border-gray-600\">Compare</button>\r\n                          <button onClick={() => revertToUpload(u.id)} className=\"px-2 py-1 rounded-md text-xs border bg-white dark:bg-gray-700 dark:text-gray-100 border-gray-300 dark:border-gray-600\">Revert</button>\r\n                          <button onClick={() => removeUpload(u.id)} className=\"px-2 py-1 rounded-md text-xs border text-red-600 bg-white dark:bg-gray-700 dark:text-red-400 border-gray-300 dark:border-gray-600\"><FaTrash className=\"inline mr-1\"/>Remove</button>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* completion modal and generic modal */}\r\n          <Modal open={completionModal.open} title={completionModal.name ? 'Analysis complete' : 'Analysis ready'} onClose={() => setCompletionModal({ open: false, uploadId: null, name: '' })}>\r\n            <div className=\"text-sm text-gray-800 dark:text-gray-200\">Analysis for <strong>{completionModal.name}</strong> is complete. Would you like to view the latest upload?</div>\r\n            <div className=\"mt-4 flex justify-end gap-2\">\r\n              <button onClick={() => setCompletionModal({ open: false, uploadId: null, name: '' })} className=\"px-3 py-1 border rounded bg-white dark:bg-gray-700 dark:text-gray-100 border-gray-300 dark:border-gray-600\">Later</button>\r\n              <button onClick={() => {\r\n                const el = document.querySelector('[data-upload-history]');\r\n                if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n                setCompletionModal({ open: false, uploadId: null, name: '' });\r\n              }} className=\"px-3 py-1 bg-blue-600 text-white rounded\">View</button>\r\n            </div>\r\n          </Modal>\r\n\r\n          <Modal open={modal.open} title={modal.title} onClose={() => setModal({ open: false, title: '', body: '', onConfirm: null })}>\r\n            <div className=\"text-sm text-gray-700 dark:text-gray-200\">{modal.body}</div>\r\n            <div className=\"mt-4 flex justify-end gap-2\">\r\n              <button onClick={() => setModal({ open: false, title: '', body: '', onConfirm: null })} className=\"px-3 py-1 border rounded bg-white dark:bg-gray-700 dark:text-gray-100 border-gray-300 dark:border-gray-600\">Close</button>\r\n              {modal.onConfirm && <button onClick={() => { modal.onConfirm(); setModal({ open: false, title: '', body: '', onConfirm: null }); }} className=\"px-3 py-1 bg-red-600 text-white rounded\">Confirm</button>}\r\n            </div>\r\n          </Modal>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* --------- ReminderScheduler component (unchanged but responsive + dark-mode friendly) --------- */\r\nfunction ReminderScheduler() {\r\n  const [reminders, setReminders] = useState(() => readReminders());\r\n  const [title, setTitle] = useState(\"\");\r\n  const [when, setWhen] = useState(() => {\r\n    const d = new Date();\r\n    d.setDate(d.getDate() + 1);\r\n    d.setHours(9, 0, 0, 0);\r\n    return d.toISOString().slice(0, 16);\r\n  });\r\n\r\n  useEffect(() => writeReminders(reminders), [reminders]);\r\n\r\n  const [modal, setModal] = useState({ open: false, title: '', body: '', onConfirm: null });\r\n\r\n  function openError(msg) { setModal({ open: true, title: 'Validation', body: msg, onConfirm: null }); }\r\n\r\n  function addReminder() {\r\n    if (!title) return openError('Enter a title for the reminder');\r\n    const r = { id: `rem-${Date.now().toString(36)}`, title, when: new Date(when).toISOString(), createdAt: Date.now(), done: false };\r\n    setReminders((s) => [r, ...s]);\r\n    setTitle(\"\");\r\n  }\r\n\r\n  function toggleDone(id) { setReminders((s) => s.map(r => r.id === id ? { ...r, done: !r.done } : r)); }\r\n  function deleteReminder(id) {\r\n    setModal({ open: true, title: 'Delete reminder', body: 'Are you sure you want to delete this reminder?', onConfirm: () => {\r\n      setReminders((s) => s.filter(r => r.id !== id));\r\n      setModal({ open: false, title: '', body: '', onConfirm: null });\r\n    }});\r\n  }\r\n\r\n  const upcoming = reminders.filter(r => !r.done).length;\r\n\r\n  return (\r\n    <div className=\"mt-3\">\r\n      <div className=\"flex flex-col sm:flex-row items-center gap-2\">\r\n        <input\r\n          value={title}\r\n          onChange={(e) => setTitle(e.target.value)}\r\n          placeholder=\"Reminder title\"\r\n          className=\"flex-1 px-2 py-1 border rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-600\"\r\n        />\r\n        <input\r\n          type=\"datetime-local\"\r\n          value={when}\r\n          onChange={(e) => setWhen(e.target.value)}\r\n          className=\"px-2 py-1 border rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-600\"\r\n        />\r\n        <button onClick={addReminder} className=\"px-3 py-1 bg-blue-600 text-white rounded\">Add</button>\r\n      </div>\r\n\r\n      <div className=\"mt-3 text-sm text-gray-600 dark:text-gray-400\">Upcoming reminders: <span className=\"font-semibold text-gray-900 dark:text-gray-100\">{upcoming}</span></div>\r\n\r\n      <ul className=\"mt-2 space-y-2\">\r\n        {reminders.length === 0 && <li className=\"text-xs text-gray-500 dark:text-gray-400\">No reminders yet.</li>}\r\n        {reminders.map((r) => (\r\n          <li key={r.id} className=\"flex items-center justify-between gap-2 p-2 border rounded bg-white dark:bg-gray-800 dark:border-gray-700\">\r\n            <div>\r\n              <div className=\"font-medium text-sm text-gray-900 dark:text-gray-100\">{r.title}</div>\r\n              <div className=\"text-xs text-gray-500 dark:text-gray-400\">{new Date(r.when).toLocaleString()}</div>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <button onClick={() => toggleDone(r.id)} className={`px-2 py-1 rounded text-xs ${r.done ? 'bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-300' : 'bg-gray-100 dark:bg-gray-700 dark:text-gray-100'}`}>{r.done ? 'Done' : 'Mark done'}</button>\r\n              <button onClick={() => deleteReminder(r.id)} className=\"px-2 py-1 text-xs border rounded text-red-600 bg-white dark:bg-gray-700 dark:text-red-400 border-gray-300 dark:border-gray-600\">Delete</button>\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n\r\n      <Modal open={modal.open} title={modal.title} onClose={() => setModal({ open: false, title: '', body: '', onConfirm: null })}>\r\n        <div className=\"text-sm text-gray-700 dark:text-gray-200\">{modal.body}</div>\r\n        <div className=\"mt-4 flex justify-end gap-2\">\r\n          <button onClick={() => setModal({ open: false, title: '', body: '', onConfirm: null })} className=\"px-3 py-1 border rounded bg-white dark:bg-gray-700 dark:text-gray-100 border-gray-300 dark:border-gray-600\">Cancel</button>\r\n          {modal.onConfirm && <button onClick={modal.onConfirm} className=\"px-3 py-1 bg-red-600 text-white rounded\">Delete</button>}\r\n        </div>\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n\r\n/* Simple Modal used in component (unchanged but dark-aware) */\r\nfunction Modal({ open, title, children, onClose }) {\r\n  if (!open) return null;\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n      <div className=\"absolute inset-0 bg-black opacity-40\" onClick={onClose}></div>\r\n      <div className=\"relative z-10 w-full max-w-md bg-white dark:bg-gray-900 rounded-2xl p-5 shadow-2xl border dark:border-gray-700\">\r\n        <div className=\"flex items-start justify-between\">\r\n          <h3 className=\"text-lg font-semibold text-gray-900 dark:text-gray-100\">{title}</h3>\r\n          <button onClick={onClose} className=\"text-gray-500 dark:text-gray-300\">✕</button>\r\n        </div>\r\n        <div className=\"mt-3\">{children}</div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["OUTBOX_KEY","readOutbox","raw","localStorage","getItem","JSON","parse","_unused","writeOutbox","arr","setItem","stringify","e","sendEmail","_ref","to","subject","body","out","unshift","id","concat","Date","now","toString","channel","ts","window","dispatchEvent","CustomEvent","detail","Promise","resolve","ok","sendSMS","_ref2","listOutbox","STORAGE_UPLOADS","BINARY_EXTS","STORAGE_REMINDERS","writeUploads","safe","map","u","copy","_objectSpread","objectUrl","_unused2","_unused3","parseCSV","text","lines","split","filter","Boolean","length","headers","h","trim","slice","line","cols","obj","forEach","i","DataManagement","org","useOutletContext","orgId","uploads","setUploads","useState","readUploads","templateOpen","setTemplateOpen","completionModal","setCompletionModal","open","uploadId","name","modal","setModal","title","onConfirm","dragging","setDragging","processing","setProcessing","progress","setProgress","fileRef","useRef","darkMode","setDarkMode","document","docHas","documentElement","classList","contains","mq","matchMedia","matches","async","onFiles","files","f","reader","FileReader","onload","ev","target","result","parsed","nameLower","toLowerCase","ext","includes","pop","type","startsWith","filename","size","endsWith","Papa","then","m","default","catch","header","skipEmptyLines","data","XLSX","read","wb","sheetName","SheetNames","ws","Sheets","utils","sheet_to_json","defval","sanitized","String","replace","previewText","substring","valid","Array","isArray","Object","keys","record","timestamp","preview","analyzedSystems","undefined","URL","createObjectURL","setTimeout","systems","arguments","txt","hits","key","kws","kw","push","from","Set","categorizeFile","prev","svc","sys","console","warn","_unused6","diffKey","diffs","left","right","makeNote","noteKey","notes","k","Math","random","readAsText","removeUpload","toRemove","find","revokeObjectURL","revertToUpload","found","rest","viewDiff","leftId","rightId","d","x","toLocaleString","useEffect","obs","MutationObserver","observe","attributes","attributeFilter","mqListener","addEventListener","addListener","disconnect","removeEventListener","removeListener","onReady","notifier","email","err","_jsxs","className","children","_jsx","onDragOver","preventDefault","onDragLeave","onDrop","stopPropagation","dataTransfer","FaUpload","onClick","current","click","s","href","download","ref","onChange","style","width","ReminderScheduler","row","idx","values","v","_uploads$","FaTrash","_Fragment","_uploads$2","Modal","onClose","el","querySelector","scrollIntoView","behavior","block","reminders","setReminders","_unused4","readReminders","setTitle","when","setWhen","setDate","getDate","setHours","toISOString","_unused5","writeReminders","upcoming","r","done","value","placeholder","createdAt","toggleDone","deleteReminder"],"sourceRoot":""}