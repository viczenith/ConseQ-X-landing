"use strict";(self.webpackChunkceo_assessment_app=self.webpackChunkceo_assessment_app||[]).push([[931],{59931:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var s=n(65043),r=n(23721),a=n(70579);function c(){const[e,t]=s.useState(!1),n="conseqx_partner_dashboard_widgets_v1",[r,c]=s.useState(()=>{try{const e=localStorage.getItem(n);return e?JSON.parse(e):["overview","deep-dive","forecast","recommendations","benchmarking"]}catch(e){return["overview","deep-dive","forecast","recommendations","benchmarking"]}});return s.useEffect(()=>{try{localStorage.setItem(n,JSON.stringify(r))}catch(e){}},[r]),(0,a.jsxs)("div",{className:"",children:[(0,a.jsx)("button",{onClick:()=>t(e=>!e),className:"px-3 py-1 rounded-md border",children:"Customize"}),e&&(0,a.jsxs)("div",{className:"mt-2 p-3 rounded border bg-white shadow-md w-64 text-sm",children:[(0,a.jsx)("div",{className:"font-semibold",children:"Layout & Widgets"}),(0,a.jsx)("div",{className:"mt-2 text-xs text-gray-600",children:"Re-order the dashboard sections. Order is saved to your browser."}),(0,a.jsx)("div",{className:"mt-2 text-xs",children:"Sections:"}),(0,a.jsx)("ul",{className:"mt-1 text-xs list-inside space-y-2",children:r.map((e,t)=>(0,a.jsxs)("li",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"capitalize",children:e.replace("-"," ")}),(0,a.jsxs)("span",{className:"flex items-center gap-1",children:[(0,a.jsx)("button",{disabled:0===t,onClick:()=>{const e=[...r];[e[t-1],e[t]]=[e[t],e[t-1]],c(e)},className:"px-2 py-0.5 border rounded text-xs",children:"\u2191"}),(0,a.jsx)("button",{disabled:t===r.length-1,onClick:()=>{const e=[...r];[e[t+1],e[t]]=[e[t],e[t+1]],c(e)},className:"px-2 py-0.5 border rounded text-xs",children:"\u2193"})]})]},e))})]})]})}function o(){var e,t;const n=(0,r.KC)(),o=null!==(e=null===n||void 0===n?void 0:n.darkMode)&&void 0!==e&&e,d=s.useMemo(()=>{try{const e=localStorage.getItem("conseqx_partner_dashboard_widgets_v1");return e?JSON.parse(e):null}catch(e){return null}},[]),l=(e,t)=>{const n="/ceo/partner-dashboard/".concat(e);return(0,a.jsx)(r.k2,{to:n,className:e=>{let{isActive:t}=e;return"px-3 py-2 rounded-md text-sm ".concat(t?"bg-blue-600 text-white":o?"text-gray-200 hover:bg-gray-800/30":"text-gray-700 hover:bg-gray-100")},children:t})},{connected:i}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:4002";const t=(0,s.useRef)(null),[n,r]=(0,s.useState)(!1),a=(0,s.useRef)(1e3);return(0,s.useEffect)(()=>{let n=!0;return function s(){try{const c=new WebSocket(e);t.current=c,c.addEventListener("open",()=>{n&&(r(!0),a.current=1e3)}),c.addEventListener("message",e=>{try{const t=JSON.parse(e.data);window.dispatchEvent(new CustomEvent("conseqx:live:update",{detail:t}))}catch(t){window.dispatchEvent(new CustomEvent("conseqx:live:update",{detail:{raw:e.data}}))}}),c.addEventListener("close",()=>{n&&(r(!1),setTimeout(()=>{a.current=Math.min(3e4,1.5*a.current),s()},a.current))}),c.addEventListener("error",()=>{})}catch(c){r(!1),setTimeout(s,a.current)}}(),()=>{n=!1;try{t.current&&t.current.close()}catch(e){}}},[e]),{connected:n,send:function(e){try{t.current&&t.current.readyState===WebSocket.OPEN&&t.current.send(JSON.stringify(e))}catch(n){}},socket:t.current}}("ws://localhost:4002"),[m,u]=s.useState(!1),[x,h]=s.useState(()=>{try{const e=localStorage.getItem("conseqx_uploads_v1"),t=e?JSON.parse(e):[];return t&&t.length?t[0]:null}catch(e){return null}});return s.useEffect(()=>{function e(e){if(!e.key||"conseqx_uploads_v1"===e.key)try{const e=localStorage.getItem("conseqx_uploads_v1"),t=e?JSON.parse(e):[];h(t&&t.length?t[0]:null)}catch(t){}}window.addEventListener("storage",e);let t=null;try{t=new BroadcastChannel("conseqx_assessments"),t.addEventListener("message",t=>{var n;"assessments:update"===(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.type)&&e({key:"conseqx_uploads_v1"})})}catch(n){t=null}return()=>{if(window.removeEventListener("storage",e),t)try{t.close()}catch(n){}}},[]),(0,a.jsxs)("div",{className:"min-h-[60vh]",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h2",{className:"text-lg font-bold ".concat(o?"text-gray-100":"text-gray-900"),children:"C-Suite Partner \u2014 CEO Command Center"}),(0,a.jsx)("p",{className:"text-xs ".concat(o?"text-gray-300":"text-gray-600"),children:"Growth, risk, and performance at a glance. Use the left navigation to explore views."})]}),(0,a.jsx)("div",{children:(0,a.jsx)(c,{})})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("aside",{className:"w-56 rounded p-3 ".concat(o?"bg-gray-900 border border-gray-700":"bg-white border border-gray-100"),children:(0,a.jsx)("nav",{className:"flex flex-col gap-2",children:(d||["overview","deep-dive","forecast","recommendations","benchmarking"]).map(e=>{switch(e){case"overview":return l("overview","Overview");case"deep-dive":return l("deep-dive","System Deep Dive");case"forecast":return l("forecast","Forecast & Scenarios");case"recommendations":return l("recommendations","Recommendations & Actions");case"benchmarking":return l("benchmarking","Benchmarking & Trends");default:return null}})})}),(0,a.jsxs)("main",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"mb-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Latest upload:"}),(0,a.jsx)("div",{className:"text-sm font-medium",children:x?"".concat(x.name," \xb7 ").concat(new Date(x.timestamp).toLocaleString()):"No uploads"}),(0,a.jsx)("div",{className:"px-2 py-1 rounded text-xs ".concat(i?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"),children:i?"Live":"Offline"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["ceo"===(null===n||void 0===n||null===(t=n.user)||void 0===t?void 0:t.role)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"export.csv",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{if(!t||!t.length)return;const n=Object.keys(t[0]),s=[n.join(",")].concat(t.map(e=>n.map(t=>{var n;return JSON.stringify(null!==(n=e[t])&&void 0!==n?n:"")}).join(","))).join("\n"),r=new Blob([s],{type:"text/csv"}),a=URL.createObjectURL(r),c=document.createElement("a");c.href=a,c.download=e,document.body.appendChild(c),c.click(),c.remove(),URL.revokeObjectURL(a)}catch(n){console.warn("exportToCSV failed",n)}}("systems.csv",[{name:"placeholder"}]),className:"px-3 py-1 rounded border text-sm",children:"Export CSV"}),(0,a.jsx)("button",{onClick:()=>async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"export.pdf";try{const n=e?e.innerText||e.textContent:"Report",s=new Blob([n],{type:"text/plain"}),r=URL.createObjectURL(s),a=document.createElement("a");a.href=r,a.download=t,document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(r)}catch(n){console.warn("exportToPDF failed",n)}}(document.body,"dashboard.txt"),className:"px-3 py-1 rounded border text-sm",children:"Export PDF"}),(0,a.jsx)("button",{onClick:()=>function(e,t,n){const s="mailto:".concat(encodeURIComponent(e),"?subject=").concat(encodeURIComponent(t),"&body=").concat(encodeURIComponent(n));window.location.href=s}("ceo@example.com","Dashboard snapshot",x?"".concat(x.name," - ").concat(new Date(x.timestamp).toLocaleString()):"No upload"),className:"px-3 py-1 rounded border text-sm",children:"Share"})]}),(0,a.jsx)("button",{onClick:()=>u(e=>!e),className:"px-3 py-1 rounded bg-indigo-600 text-white text-sm",children:"AI Narration"})]})]}),(0,a.jsx)(r.sv,{})]})]})]})}}}]);
//# sourceMappingURL=931.81c83e2d.chunk.js.map