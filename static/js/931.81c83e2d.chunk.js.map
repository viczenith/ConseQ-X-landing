{"version":3,"file":"static/js/931.81c83e2d.chunk.js","mappings":"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","sources":["pages/CEO_Dashboard/CEODashboardComponents/PartnerDashboard/components/CustomizationPanel.js","pages/CEO_Dashboard/CEODashboardComponents/PartnerDashboard/index.js","pages/CEO_Dashboard/CEODashboardComponents/PartnerDashboard/useLiveUpdates.js","pages/CEO_Dashboard/CEODashboardComponents/PartnerDashboard/exportUtils.js"],"sourcesContent":["import React from 'react';\r\n\r\nexport default function CustomizationPanel() {\r\n  const [open, setOpen] = React.useState(false);\r\n  const KEY = 'conseqx_partner_dashboard_widgets_v1';\r\n  const [order, setOrder] = React.useState(() => {\r\n    try { const raw = localStorage.getItem(KEY); return raw ? JSON.parse(raw) : ['overview','deep-dive','forecast','recommendations','benchmarking']; } catch { return ['overview','deep-dive','forecast','recommendations','benchmarking']; }\r\n  });\r\n\r\n  React.useEffect(()=>{ try { localStorage.setItem(KEY, JSON.stringify(order)); } catch {} }, [order]);\r\n\r\n  return (\r\n    <div className=\"\">\r\n      <button onClick={() => setOpen(s => !s)} className=\"px-3 py-1 rounded-md border\">Customize</button>\r\n      {open && (\r\n        <div className=\"mt-2 p-3 rounded border bg-white shadow-md w-64 text-sm\">\r\n            <div className=\"font-semibold\">Layout & Widgets</div>\r\n            <div className=\"mt-2 text-xs text-gray-600\">Re-order the dashboard sections. Order is saved to your browser.</div>\r\n            <div className=\"mt-2 text-xs\">Sections:</div>\r\n            <ul className=\"mt-1 text-xs list-inside space-y-2\">\r\n              {order.map((key, idx) => (\r\n                <li key={key} className=\"flex items-center justify-between\">\r\n                  <span className=\"capitalize\">{key.replace('-', ' ')}</span>\r\n                  <span className=\"flex items-center gap-1\">\r\n                    <button disabled={idx===0} onClick={()=>{ const next = [...order]; [next[idx-1], next[idx]] = [next[idx], next[idx-1]]; setOrder(next); }} className=\"px-2 py-0.5 border rounded text-xs\">↑</button>\r\n                    <button disabled={idx===order.length-1} onClick={()=>{ const next = [...order]; [next[idx+1], next[idx]] = [next[idx], next[idx+1]]; setOrder(next); }} className=\"px-2 py-0.5 border rounded text-xs\">↓</button>\r\n                  </span>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { NavLink, Outlet, useOutletContext } from 'react-router-dom';\r\nimport CustomizationPanel from './components/CustomizationPanel';\r\nimport useLiveUpdates from './useLiveUpdates';\r\nimport AINarration from './AINarration';\r\nimport { exportToCSV, exportToPDF, shareToEmail } from './exportUtils';\r\n\r\n// Partner Dashboard shell: provides internal navigation for CEO-level views.\r\nexport default function PartnerDashboard() {\r\n  const outlet = useOutletContext();\r\n  const darkMode = outlet?.darkMode ?? false;\r\n\r\n  const KEY = 'conseqx_partner_dashboard_widgets_v1';\r\n  const savedOrder = React.useMemo(() => {\r\n    try { const raw = localStorage.getItem(KEY); return raw ? JSON.parse(raw) : null; } catch { return null; }\r\n  }, []);\r\n\r\n  const navItem = (to, label) => {\r\n    const full = `/ceo/partner-dashboard/${to}`;\r\n    return (\r\n      <NavLink to={full} className={({isActive}) => `px-3 py-2 rounded-md text-sm ${isActive ? 'bg-blue-600 text-white' : (darkMode ? 'text-gray-200 hover:bg-gray-800/30' : 'text-gray-700 hover:bg-gray-100')}`}>\r\n        {label}\r\n      </NavLink>\r\n    );\r\n  };\r\n\r\n  const { connected } = useLiveUpdates('ws://localhost:4002');\r\n  const [aiOpen, setAiOpen] = React.useState(false);\r\n  const [lastUpload, setLastUpload] = React.useState(() => {\r\n    try { const raw = localStorage.getItem('conseqx_uploads_v1'); const arr = raw ? JSON.parse(raw) : []; return arr && arr.length ? arr[0] : null; } catch { return null; }\r\n  });\r\n\r\n  React.useEffect(() => {\r\n    function onStorage(e) {\r\n      if (!e.key || e.key === 'conseqx_uploads_v1') {\r\n        try { const raw = localStorage.getItem('conseqx_uploads_v1'); const arr = raw ? JSON.parse(raw) : []; setLastUpload(arr && arr.length ? arr[0] : null); } catch {}\r\n      }\r\n    }\r\n    window.addEventListener('storage', onStorage);\r\n    let bc = null;\r\n    try {\r\n      bc = new BroadcastChannel('conseqx_assessments');\r\n      bc.addEventListener('message', (ev) => { if (ev?.data?.type === 'assessments:update') onStorage({ key: 'conseqx_uploads_v1' }); });\r\n    } catch (e) {\r\n      bc = null;\r\n    }\r\n\r\n    return () => {\r\n      window.removeEventListener('storage', onStorage);\r\n      if (bc) {\r\n        try { bc.close(); } catch (e) {}\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"min-h-[60vh]\">\r\n      <div className=\"flex items-start gap-4 mb-4\">\r\n        <div className=\"flex-1\">\r\n          <h2 className={`text-lg font-bold ${darkMode ? 'text-gray-100' : 'text-gray-900'}`}>C-Suite Partner — CEO Command Center</h2>\r\n          <p className={`text-xs ${darkMode ? 'text-gray-300' : 'text-gray-600'}`}>Growth, risk, and performance at a glance. Use the left navigation to explore views.</p>\r\n        </div>\r\n        <div>\r\n          <CustomizationPanel />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex gap-4\">\r\n        <aside className={`w-56 rounded p-3 ${darkMode ? 'bg-gray-900 border border-gray-700' : 'bg-white border border-gray-100'}`}>\r\n          <nav className=\"flex flex-col gap-2\">\r\n            {(savedOrder || ['overview','deep-dive','forecast','recommendations','benchmarking']).map((k) => {\r\n              switch(k) {\r\n                case 'overview': return navItem('overview', 'Overview');\r\n                case 'deep-dive': return navItem('deep-dive', 'System Deep Dive');\r\n                case 'forecast': return navItem('forecast', 'Forecast & Scenarios');\r\n                case 'recommendations': return navItem('recommendations', 'Recommendations & Actions');\r\n                case 'benchmarking': return navItem('benchmarking', 'Benchmarking & Trends');\r\n                default: return null;\r\n              }\r\n            })}\r\n          </nav>\r\n        </aside>\r\n\r\n        <main className=\"flex-1\">\r\n          <div className=\"mb-3 flex items-center justify-between\">\r\n            <div className=\"flex items-center gap-3\">\r\n              <div className=\"text-xs text-gray-500\">Latest upload:</div>\r\n              <div className=\"text-sm font-medium\">{lastUpload ? `${lastUpload.name} · ${new Date(lastUpload.timestamp).toLocaleString()}` : 'No uploads'}</div>\r\n              <div className={`px-2 py-1 rounded text-xs ${connected ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-600'}`}>{connected ? 'Live' : 'Offline'}</div>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-2\">\r\n              {/* Exports/sharing only visible to CEO role */}\r\n              {outlet?.user?.role === 'ceo' && (\r\n                <>\r\n                  <button onClick={() => exportToCSV('systems.csv', [{ name: 'placeholder' }])} className=\"px-3 py-1 rounded border text-sm\">Export CSV</button>\r\n                  <button onClick={() => exportToPDF(document.body, 'dashboard.txt')} className=\"px-3 py-1 rounded border text-sm\">Export PDF</button>\r\n                  <button onClick={() => shareToEmail('ceo@example.com', 'Dashboard snapshot', lastUpload ? `${lastUpload.name} - ${new Date(lastUpload.timestamp).toLocaleString()}` : 'No upload')} className=\"px-3 py-1 rounded border text-sm\">Share</button>\r\n                </>\r\n              )}\r\n              <button onClick={() => setAiOpen((s)=>!s)} className=\"px-3 py-1 rounded bg-indigo-600 text-white text-sm\">AI Narration</button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Render nested routes from App.js here */}\r\n          <Outlet />\r\n        </main>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useRef, useState } from 'react';\r\n\r\n// Simple WebSocket hook with reconnect and CustomEvent dispatching for local dev\r\nexport default function useLiveUpdates(url = 'ws://localhost:4002') {\r\n  const wsRef = useRef(null);\r\n  const [connected, setConnected] = useState(false);\r\n  const retryRef = useRef(1000);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n\r\n    function connect() {\r\n      try {\r\n        const ws = new WebSocket(url);\r\n        wsRef.current = ws;\r\n        ws.addEventListener('open', () => { if (!mounted) return; setConnected(true); retryRef.current = 1000; });\r\n        ws.addEventListener('message', (ev) => {\r\n          try {\r\n            const data = JSON.parse(ev.data);\r\n            // dispatch an app-wide event for components to consume\r\n            window.dispatchEvent(new CustomEvent('conseqx:live:update', { detail: data }));\r\n          } catch (e) {\r\n            // non-json payload\r\n            window.dispatchEvent(new CustomEvent('conseqx:live:update', { detail: { raw: ev.data } }));\r\n          }\r\n        });\r\n        ws.addEventListener('close', () => { if (!mounted) return; setConnected(false); setTimeout(() => { retryRef.current = Math.min(30000, retryRef.current * 1.5); connect(); }, retryRef.current); });\r\n        ws.addEventListener('error', () => { /* ignore - will trigger close */ });\r\n      } catch (e) { setConnected(false); setTimeout(connect, retryRef.current); }\r\n    }\r\n\r\n    connect();\r\n    return () => { mounted = false; try { if (wsRef.current) wsRef.current.close(); } catch {} };\r\n  }, [url]);\r\n\r\n  function send(payload) {\r\n    try { if (wsRef.current && wsRef.current.readyState === WebSocket.OPEN) wsRef.current.send(JSON.stringify(payload)); }\r\n    catch {}\r\n  }\r\n\r\n  return { connected, send, socket: wsRef.current };\r\n}\r\n","// Lightweight client-side export helpers (stubs for now)\r\nexport function exportToCSV(filename = 'export.csv', rows = []) {\r\n  try {\r\n    if (!rows || !rows.length) return;\r\n    const headers = Object.keys(rows[0]);\r\n    const csv = [headers.join(',')].concat(rows.map(r => headers.map(h => JSON.stringify(r[h] ?? '')).join(','))).join('\\n');\r\n    const blob = new Blob([csv], { type: 'text/csv' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a'); a.href = url; a.download = filename; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);\r\n  } catch (e) { console.warn('exportToCSV failed', e); }\r\n}\r\n\r\nexport async function exportToPDF(node, filename = 'export.pdf') {\r\n  // placeholder: requires html2canvas/jsPDF in real build; we'll attempt a minimal fallback\r\n  try {\r\n    const html = node ? node.innerText || node.textContent : 'Report';\r\n    const blob = new Blob([html], { type: 'text/plain' });\r\n    const url = URL.createObjectURL(blob);\r\n    const a = document.createElement('a'); a.href = url; a.download = filename; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);\r\n  } catch (e) { console.warn('exportToPDF failed', e); }\r\n}\r\n\r\nexport function shareToSlack(webhookUrl, payload) {\r\n  // stub: cannot perform cross-origin without server; dispatch event for dev\r\n  window.dispatchEvent(new CustomEvent('conseqx:share:slack', { detail: { webhookUrl, payload } }));\r\n}\r\n\r\nexport function shareToEmail(to, subject, body) {\r\n  const mailto = `mailto:${encodeURIComponent(to)}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;\r\n  window.location.href = mailto;\r\n}\r\n"],"names":["CustomizationPanel","open","setOpen","React","KEY","order","setOrder","raw","localStorage","getItem","JSON","parse","_unused","setItem","stringify","_unused2","_jsxs","className","children","_jsx","onClick","s","map","key","idx","replace","disabled","next","length","PartnerDashboard","_outlet$darkMode","_outlet$user","outlet","useOutletContext","darkMode","savedOrder","navItem","to","label","full","concat","NavLink","_ref","isActive","connected","url","arguments","undefined","wsRef","useRef","setConnected","useState","retryRef","useEffect","mounted","connect","ws","WebSocket","current","addEventListener","ev","data","window","dispatchEvent","CustomEvent","detail","e","setTimeout","Math","min","close","send","payload","readyState","OPEN","socket","useLiveUpdates","aiOpen","setAiOpen","lastUpload","setLastUpload","arr","onStorage","_unused3","bc","BroadcastChannel","_ev$data","type","removeEventListener","k","name","Date","timestamp","toLocaleString","user","role","_Fragment","filename","rows","headers","Object","keys","csv","join","r","h","_r$h","blob","Blob","URL","createObjectURL","a","document","createElement","href","download","body","appendChild","click","remove","revokeObjectURL","console","warn","exportToCSV","async","node","html","innerText","textContent","exportToPDF","subject","mailto","encodeURIComponent","location","shareToEmail","Outlet"],"sourceRoot":""}