"use strict";(self.webpackChunkceo_assessment_app=self.webpackChunkceo_assessment_app||[]).push([[737],{22737:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var i=n(89379),r=n(65043),o=n(41962),a=n(23721),s=n(50108),d=n(75748),l=n(52185),c=n(70760),m=n(69923),h=n(35963),y=n(33603),u=n(70579);function g(e){try{return new Date(e).toLocaleDateString(void 0,{month:"2-digit",day:"2-digit"})}catch(t){return""+e}}function p(){var e,t;const n=(0,a.KC)(),p=null!==(e=null===n||void 0===n?void 0:n.darkMode)&&void 0!==e&&e,[v,x]=(t=null===n||void 0===n?void 0:n.dashboardMode,null===n||void 0===n||n.orgId,r.useState({})),[f,k]=r.useState([]),[b,j]=r.useState({});r.useEffect(()=>{let e,t=!0;function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();const n=[];for(let i=6;i>=0;i--){const r=t-24*i*3600*1e3,o=Math.max(5,Math.min(95,e+Math.floor(6*(Math.random()-.5))));n.push({ts:r,value:o,upper:Math.min(100,o+4),lower:Math.max(0,o-4),date:new Date(r)})}return n}async function a(){try{const a=localStorage.getItem("conseqx_uploads_v1"),s=a?JSON.parse(a):[];if(s&&s.length){var e;const i=s[0],a=localStorage.getItem("conseqx_assessments_v1"),d=((a?JSON.parse(a):{})[(null===n||void 0===n||null===(e=n.org)||void 0===e?void 0:e.id)||"anon"]||[]).reduce((e,t)=>{const n=t.systemId||t.system||t.systemKey;return n&&(e[n]=t.score||e[n]||0),e},{}),l=o.CO.reduce((e,t)=>(d[t.key]?e[t.key]=Math.round(Math.max(0,Math.min(100,d[t.key]))):Array.isArray(i.analyzedSystems)&&i.analyzedSystems.includes(t.key)?e[t.key]=70:e[t.key]=45,e),{});if(!t)return;x(l);const c=Math.round(Object.values(l).reduce((e,t)=>e+t,0)/Math.max(1,Object.keys(l).length));k(r(c,i.timestamp||Date.now()));const m={};return o.CO.forEach(e=>{m[e.key]=r(l[e.key]||50,i.timestamp||Date.now())}),void j(m)}const d=await fetch("http://localhost:4001/api/overview");if(!d.ok)throw new Error("bad response");const l=await d.json();if(!t)return;k(l.overallSeries.map(e=>(0,i.A)((0,i.A)({},e),{},{date:new Date(e.ts)}))),j(Object.keys(l.perSystemSeries).reduce((e,t)=>(e[t]=l.perSystemSeries[t].map(e=>(0,i.A)((0,i.A)({},e),{},{date:new Date(e.ts)})),e),{})),x(l.scores||{})}catch(a){const e=o.CO.reduce((e,t)=>(e[t.key]=Math.floor(40+50*Math.random()),e),{});if(!t)return;x(e),k(r(62)),j(o.CO.reduce((e,t)=>(e[t.key]=r(40+Math.floor(40*Math.random())),e),{}))}}function s(e){e.key&&"conseqx_uploads_v1"!==e.key&&"conseqx_assessments_v1"!==e.key||a()}a(),window.addEventListener("storage",s);try{"undefined"!==typeof BroadcastChannel&&(e=new BroadcastChannel("conseqx_assessments"),e.addEventListener("message",e=>{var t;"assessments:update"===(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.type)&&a()}))}catch(d){}return()=>{if(t=!1,window.removeEventListener("storage",s),e)try{e.close()}catch(n){}}},[null===n||void 0===n?void 0:n.org]);const w=Math.round(Object.values(v).reduce((e,t)=>e+t,0)/(Object.keys(v).length||1));return(0,u.jsxs)("div",{children:[(0,u.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,u.jsxs)("div",{className:"rounded-2xl p-4 col-span-1 md:col-span-1 ".concat(p?"bg-gray-900 border-gray-700":"bg-white border-gray-100"),children:[(0,u.jsx)("div",{className:"text-xs text-gray-400",children:"Overall Health"}),(0,u.jsxs)("div",{className:"text-3xl font-bold mt-2",children:[w,"%"]}),(0,u.jsx)("div",{className:"mt-4 h-20",children:(0,u.jsx)(s.u,{width:"100%",height:"100%",children:(0,u.jsxs)(d.b,{data:f,margin:{top:0,right:0,left:0,bottom:0},children:[(0,u.jsx)(l.W,{dataKey:"date",tickFormatter:e=>g(e)}),(0,u.jsx)(c.h,{domain:[0,100]}),(0,u.jsx)(m.m,{formatter:e=>"".concat(e,"%"),labelFormatter:e=>e?function(e){try{return new Date(e).toLocaleString()}catch(t){return""+e}}(e):""}),(0,u.jsx)(h.Gk,{type:"monotone",dataKey:"upper",stroke:!1,fill:"#60A5FA",fillOpacity:.08}),(0,u.jsx)(h.Gk,{type:"monotone",dataKey:"lower",stroke:!1,fill:"#60A5FA",fillOpacity:.08}),(0,u.jsx)(y.N,{type:"monotone",dataKey:"value",stroke:"#60A5FA",strokeWidth:2,dot:!1})]})})})]}),(0,u.jsxs)("div",{className:"rounded-2xl p-4 col-span-2 ".concat(p?"bg-gray-900 border-gray-700":"bg-white border-gray-100"),children:[(0,u.jsx)("div",{className:"text-sm font-semibold",children:"System Score Cards"}),(0,u.jsx)("div",{className:"mt-3 grid grid-cols-2 md:grid-cols-3 gap-3",children:o.CO.map(e=>{var t;return(0,u.jsxs)("div",{className:"p-3 rounded-lg border ".concat(p?"bg-gray-800 border-gray-700":"bg-white border-gray-100"),children:[(0,u.jsxs)("div",{className:"flex items-center justify-between",children:[(0,u.jsx)("div",{className:"font-semibold",children:e.title}),(0,u.jsxs)("div",{className:"text-xl font-bold",children:[v[e.key],"%"]})]}),(0,u.jsxs)("div",{className:"text-xs text-gray-400 mt-2",children:["Quick insight: ",null===(t=e.description)||void 0===t?void 0:t.slice(0,80)]}),(0,u.jsx)("div",{className:"mt-3 h-12",children:(0,u.jsx)(s.u,{width:"100%",height:"100%",children:(0,u.jsxs)(d.b,{data:b[e.key]||[],margin:{top:0,right:0,left:0,bottom:0},children:[(0,u.jsx)(m.m,{formatter:e=>"".concat(e,"%"),labelFormatter:e=>e?g(e):""}),(0,u.jsx)(y.N,{type:"monotone",dataKey:"value",stroke:"#34D399",strokeWidth:2,dot:!1})]})})})]},e.key)})})]})]}),(0,u.jsxs)("div",{className:"rounded-2xl p-4 mb-4",children:[(0,u.jsx)("h3",{className:"font-semibold",children:"Key Alerts"}),(0,u.jsx)("div",{className:"mt-2 text-sm text-gray-500",children:"No critical alerts (placeholder). Thresholds and predictive warnings will show here."})]})]})}},41962:(e,t,n)=>{n.d(t,{CO:()=>i,Os:()=>o,y6:()=>a});const i=[{key:"interdependency",title:"Interdependency",description:"Cross-functional collaboration and dependency management",icon:"\ud83d\udd17",color:"#3B82F6",order:1},{key:"orchestration",title:"Orchestration",description:"Development cycles, sprint planning, and continuous improvement",icon:"\ud83d\udd04",color:"#10B981",order:2},{key:"investigation",title:"Investigation",description:"Data analysis, research, and discovery processes",icon:"\ud83d\udd0e",color:"#F59E0B",order:3},{key:"interpretation",title:"Interpretation",description:"Insight generation, decision-making, and strategic analysis",icon:"\ud83d\udca1",color:"#8B5CF6",order:4},{key:"illustration",title:"Illustration",description:"Communication, visualization, and knowledge sharing",icon:"\ud83d\udd04",color:"#EF4444",order:5},{key:"inlignment",title:"Inlignment",description:"Strategic coordination, goal setting, and organizational coherence",icon:"\ud83c\udfaf",color:"#06B6D4",order:6}],r={orchestration:"orchestration",inlignment:"inlignment",interdependency:"interdependency",orchestration:"orchestration",investigation:"investigation",interpretation:"interpretation",illustration:"illustration",inlignment:"inlignment",dependency:"interdependency",dependencies:"interdependency",analysis:"investigation",research:"investigation",insights:"interpretation",reporting:"illustration",visualization:"illustration",coordination:"inlignment",strategy:"inlignment"};function o(e){if(!e||"string"!==typeof e)return"investigation";const t=e.toLowerCase().trim();return r[t]||t}function a(){return i.sort((e,t)=>e.order-t.order).map(e=>({id:e.key,key:e.key,title:e.title,description:e.description,icon:e.icon,color:e.color}))}const s=Object.values({interdependency:.18,orchestration:.2,investigation:.16,interpretation:.18,illustration:.14,inlignment:.14}).reduce((e,t)=>e+t,0);Math.abs(s-1)>.001&&console.warn("[systems.js] System weights sum to ".concat(s.toFixed(3),", should be 1.0"))},75748:(e,t,n)=>{n.d(t,{b:()=>s});var i=n(65043),r=n(41603),o=n(6218),a=["axis"],s=(0,i.forwardRef)((e,t)=>i.createElement(o.P,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:a,tooltipPayloadSearcher:r.uN,categoricalChartProps:e,ref:t}))}}]);
//# sourceMappingURL=737.19bda88a.chunk.js.map