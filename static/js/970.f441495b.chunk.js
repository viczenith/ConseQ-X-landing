"use strict";(self.webpackChunkceo_assessment_app=self.webpackChunkceo_assessment_app||[]).push([[970],{23970:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var a=t(89379),r=t(65043),n=t(23721),i=t(50108),d=t(92998),c=t(52185),o=t(70760),l=t(69923),m=t(33603),h=t(70579);const x=["interdependency","iteration","investigation","interpretation","illustration","inlignment"];function u(e){let{systems:s,scores:t}=e;const a=300,r=100;return(0,h.jsxs)("svg",{width:a,height:a,className:"block mx-auto",children:[s.map((e,a)=>{const n=a/s.length*Math.PI*2-Math.PI/2,i=150+r*Math.cos(n),d=150+r*Math.sin(n);return(0,h.jsxs)("g",{transform:"translate(".concat(i,",").concat(d,")"),children:[(0,h.jsx)("circle",{r:20,fill:t[e.key]>=70?"#10B981":t[e.key]>=50?"#FBBF24":"#EF4444",stroke:"#111",strokeOpacity:.06}),(0,h.jsx)("text",{x:0,y:5,textAnchor:"middle",fontSize:9,fill:"#fff",children:e.title.slice(0,2)})]},e.key)}),s.map((e,t)=>{const a=t/s.length*Math.PI*2-Math.PI/2,n=(t+1)%s.length/s.length*Math.PI*2-Math.PI/2,i=150+r*Math.cos(a),d=150+r*Math.sin(a),c=150+r*Math.cos(n),o=150+r*Math.sin(n);return(0,h.jsx)("line",{x1:i,y1:d,x2:c,y2:o,stroke:"#94A3B8",strokeWidth:1,strokeOpacity:.6},"l".concat(t))})]})}function g(e){let{rootCauses:s}=e;const[t,n]=r.useState({});return(0,h.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,h.jsxs)("div",{children:[(0,h.jsx)("button",{onClick:()=>n(s=>(0,a.A)((0,a.A)({},s),{},{[e.id]:!s[e.id]})),className:"w-full text-left p-2 border rounded",children:(0,h.jsxs)("div",{className:"flex justify-between items-center",children:[(0,h.jsx)("div",{className:"font-medium",children:e.title}),(0,h.jsx)("div",{className:"text-xs text-gray-500",children:e.impact})]})}),t[e.id]&&(0,h.jsx)("div",{className:"ml-3 mt-1 text-sm text-gray-600",children:(0,h.jsx)("ul",{className:"list-disc list-inside",children:e.causes.map((e,s)=>(0,h.jsx)("li",{children:e},s))})})]},e.id))})}function y(){var e;const s=(0,n.KC)(),t=null!==(e=null===s||void 0===s?void 0:s.darkMode)&&void 0!==e&&e,[a,y]=r.useState(null);r.useEffect(()=>{let e,s=!0;async function t(){try{const e=localStorage.getItem("conseqx_uploads_v1"),t=e?JSON.parse(e):[];if(t&&t.length){const e=t[0],a=localStorage.getItem("conseqx_assessments_v1"),r=((a?JSON.parse(a):{}).anon||[]).reduce((e,s)=>{const t=s.systemId||s.system||s.systemKey;return t&&(e[t]=s.score||e[t]||0),e},{}),n=x.reduce((s,t)=>(r[t]?s[t]=Math.round(Math.max(0,Math.min(100,r[t]))):Array.isArray(e.analyzedSystems)&&e.analyzedSystems.includes(t)?s[t]=70:s[t]=50,s),{});if(!s)return;return void y({scores:n,perSystemSeries:x.reduce((s,t)=>(s[t]=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();const t=[];for(let a=6;a>=0;a--){const r=s-24*a*3600*1e3,n=Math.max(5,Math.min(95,e+Math.floor(6*(Math.random()-.5))));t.push({ts:r,value:n})}return t}(n[t]||50,e.timestamp||Date.now()),s),{})})}const a=await fetch("http://localhost:4001/api/overview"),r=await a.json();if(!s)return;y(r)}catch(e){}}function a(e){e.key&&"conseqx_uploads_v1"!==e.key&&"conseqx_assessments_v1"!==e.key||t()}t(),window.addEventListener("storage",a);try{"undefined"!==typeof BroadcastChannel&&(e=new BroadcastChannel("conseqx_assessments"),e.addEventListener("message",e=>{var s;"assessments:update"===(null===e||void 0===e||null===(s=e.data)||void 0===s?void 0:s.type)&&t()}))}catch(r){}return()=>{if(s=!1,window.removeEventListener("storage",a),e)try{e.close()}catch(t){}}},[]);const v=(null===a||void 0===a?void 0:a.scores)||x.reduce((e,s)=>(e[s]=50,e),{}),p=(null===a||void 0===a?void 0:a.perSystemSeries)||{},j=Object.keys(v).map((e,s)=>({id:e,title:e,impact:v[e]>=70?"low":v[e]>=50?"medium":"high",causes:["Low metric in ".concat(e),"Process gap","Ownership unclear"]})).filter(e=>e),f=(p.iteration||[]).map(e=>({date:new Date(e.ts),value:e.value}));return(0,h.jsxs)("div",{children:[(0,h.jsx)("h3",{className:"text-lg font-semibold ".concat(t?"text-gray-100":"text-gray-900"),children:"System Deep Dive"}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4",children:[(0,h.jsxs)("div",{className:"rounded-2xl p-4 ".concat(t?"bg-gray-900 border-gray-700":"bg-white border-gray-100"),children:[(0,h.jsx)("div",{className:"font-semibold",children:"Dependency Map"}),(0,h.jsx)("div",{className:"mt-3 text-xs text-gray-400",children:"Interactive network graph (simple layout). Click nodes for more details in future iterations."}),(0,h.jsx)("div",{className:"mt-4 h-64 border rounded bg-black/5 flex items-center justify-center",children:(0,h.jsx)(u,{systems:x.map(e=>({key:e,title:e})),scores:v})})]}),(0,h.jsxs)("div",{className:"rounded-2xl p-4 ".concat(t?"bg-gray-900 border-gray-700":"bg-white border-gray-100"),children:[(0,h.jsx)("div",{className:"font-semibold",children:"Iteration Trend Chart"}),(0,h.jsx)("div",{className:"mt-3 h-48 border rounded p-2",children:(0,h.jsx)(i.u,{width:"100%",height:"100%",children:(0,h.jsxs)(d.b,{data:f,margin:{top:0,right:8,left:0,bottom:0},children:[(0,h.jsx)(c.W,{dataKey:"date",tickFormatter:e=>new Date(e).toLocaleDateString()}),(0,h.jsx)(o.h,{domain:[0,100]}),(0,h.jsx)(l.m,{labelFormatter:e=>e?new Date(e).toLocaleString():"",formatter:e=>"".concat(e,"%")}),(0,h.jsx)(m.N,{type:"monotone",dataKey:"value",stroke:"#60A5FA",strokeWidth:2,dot:!1})]})})})]}),(0,h.jsxs)("div",{className:"rounded-2xl p-4 ".concat(t?"bg-gray-900 border-gray-700":"bg-white border-gray-100"),children:[(0,h.jsx)("div",{className:"font-semibold",children:"Root Cause Tree"}),(0,h.jsx)("div",{className:"mt-3 text-xs text-gray-400",children:"Expandable root cause list generated from current data."}),(0,h.jsx)("div",{className:"mt-4 h-48 border rounded p-2 overflow-auto",children:(0,h.jsx)(g,{rootCauses:j})})]})]}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,h.jsxs)("div",{className:"rounded-2xl p-4 ".concat(t?"bg-gray-900 border-gray-700":"bg-white border-gray-100"),children:[(0,h.jsx)("div",{className:"font-semibold",children:"Narrative Insights"}),(0,h.jsx)("div",{className:"mt-3 text-xs text-gray-400",children:"AI-generated summaries (synthetic):"}),(0,h.jsx)("div",{className:"mt-3 space-y-2",children:(0,h.jsxs)("div",{className:"p-3 rounded border",children:["Based on recent uploads, the highest risk areas are ",Object.keys(v).filter(e=>v[e]<50).join(", ")||"none",". Recommend targeted sprints to address ownership and measurement."]})})]}),(0,h.jsxs)("div",{className:"rounded-2xl p-4 ".concat(t?"bg-gray-900 border-gray-700":"bg-white border-gray-100"),children:[(0,h.jsx)("div",{className:"font-semibold",children:"Alignment Heatmap"}),(0,h.jsx)("div",{className:"mt-3 h-48 border rounded p-2",children:(0,h.jsx)("div",{className:"grid grid-cols-3 gap-2",children:Object.keys(v).map(e=>(0,h.jsxs)("div",{className:"p-2 rounded flex flex-col items-center",children:[(0,h.jsxs)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center text-white ".concat(v[e]>=70?"bg-green-500":v[e]>=50?"bg-yellow-500":"bg-red-500"),children:[v[e],"%"]}),(0,h.jsx)("div",{className:"text-xs mt-2",children:e})]},e))})})]})]})]})}}}]);
//# sourceMappingURL=970.f441495b.chunk.js.map