{"version":3,"file":"static/js/807.a0dd232a.chunk.js","mappings":"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","sources":["pages/CEO_Dashboard/PartnerDashboardAuto.jsx","pages/CEO_Dashboard/constants/systems.js"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { useOutletContext, useNavigate } from \"react-router-dom\";\r\nimport { FaBolt, FaPlay, FaPause, FaTimes, FaDownload, FaChartLine } from \"react-icons/fa\";\r\nimport { CANONICAL_SYSTEMS, normalizeSystemKey } from \"./constants/systems\";\r\n\r\n/* ---------------- helpers ---------------- */\r\nfunction seedForKey(key, index) {\r\n  const s = String(key || \"\");\r\n  let sum = 0;\r\n  for (let i = 0; i < s.length; i++) sum += s.charCodeAt(i);\r\n  return Math.max(30, Math.min(95, (sum % 60) + 30 + (index % 6) * 2));\r\n}\r\nfunction randBetween(min, max) { return Math.round(min + Math.random() * (max - min)); }\r\nfunction toneClassFor(pct) {\r\n  if (pct >= 80) return \"text-green-500\";\r\n  if (pct >= 60) return \"text-yellow-500\";\r\n  return \"text-red-500\";\r\n}\r\nfunction formatTime(ts) { try { return new Date(ts).toLocaleTimeString(); } catch { return \"\"; } }\r\n\r\nconst STORAGE_UPLOADS = \"conseqx_uploads_v1\";\r\nconst STORAGE_ASSESS = \"conseqx_assessments_v1\";\r\nconst STORAGE_SCENARIOS = \"conseqx_saved_scenarios_v1\";\r\n\r\nfunction readUploads() { try { const raw = localStorage.getItem(STORAGE_UPLOADS); return raw ? JSON.parse(raw) : []; } catch { return []; } }\r\nfunction readAssessmentsForOrg(orgId = \"anon\") { try { const raw = localStorage.getItem(STORAGE_ASSESS); const byOrg = raw ? JSON.parse(raw) : {}; return byOrg[orgId] || []; } catch { return []; } }\r\nfunction readSavedScenarios() { try { const raw = localStorage.getItem(STORAGE_SCENARIOS); return raw ? JSON.parse(raw) : []; } catch { return []; } }\r\nfunction writeSavedScenarios(list = []) { try { localStorage.setItem(STORAGE_SCENARIOS, JSON.stringify(list)); } catch { } }\r\n\r\n/* ---------------- external signals + correlation ---------------- */\r\nfunction generateSignals(canonical) {\r\n  const ts = Date.now();\r\n  return canonical.map((s, i) => {\r\n    const keySeed = Array.from(String(s.key || \"\")).reduce((acc, ch) => acc + ch.charCodeAt(0), 0);\r\n    const base = (keySeed % 40) + 40 + (i * 3);\r\n    const wobble = Math.round(Math.sin((ts / (5000 + i * 1000)) + (i * 0.5)) * 12);\r\n    const value = Math.max(0, Math.min(100, base + wobble - 10));\r\n    return {\r\n      id: `ext-${s.key}-${Math.floor(ts / 1000)}`,\r\n      systemKey: s.key,\r\n      type: [\"market\", \"regulatory\", \"competitor\", \"macro\"][i % 4],\r\n      value,\r\n      importance: (value > 75) ? \"high\" : (value > 55) ? \"medium\" : \"low\",\r\n      description: `${s.title} external signal snapshot`,\r\n      timestamp: ts,\r\n      source: \"external-feed\",\r\n    };\r\n  });\r\n}\r\nfunction correlate(systemScore, signals = []) {\r\n  const s = signals[0];\r\n  if (!s) return { impactLevel: \"none\", expectedDelta: 0, reason: \"No external signal\" };\r\n  const importanceFactor = s.importance === \"high\" ? 1.0 : s.importance === \"medium\" ? 0.6 : 0.3;\r\n  const diff = Math.round((s.value - 50) / 2);\r\n  const expectedDelta = Math.round(diff * importanceFactor);\r\n  const abs = Math.abs(expectedDelta);\r\n  const impactLevel = abs >= 12 ? \"high\" : abs >= 6 ? \"medium\" : (abs >= 1 ? \"low\" : \"none\");\r\n  const reason = `${s.type} (${s.source}) value ${s.value} â†’ expected ${expectedDelta >= 0 ? \"+\" : \"\"}${expectedDelta}`;\r\n  return { impactLevel, expectedDelta, reason, signal: s };\r\n}\r\n\r\n/* ---------------- Canvas Live Bars ---------------- */\r\nfunction LiveBarsCanvas({ values = [], darkMode = false, width = 120, height = 64, barCount = 18, palette = \"crypto\", tooltipRef }) {\r\n  const canvasRef = useRef(null);\r\n  const rafRef = useRef(null);\r\n  const devicePixelRatioRef = useRef(typeof window !== \"undefined\" ? (window.devicePixelRatio || 1) : 1);\r\n  const displayRef = useRef((values || []).slice(-barCount).concat([]));\r\n\r\n  if (displayRef.current.length < barCount) {\r\n    displayRef.current = Array.from({ length: barCount - displayRef.current.length }, () => 0).concat(displayRef.current);\r\n  }\r\n\r\n  useEffect(() => {\r\n    const cvs = canvasRef.current;\r\n    if (!cvs) return;\r\n    const ctx = cvs.getContext(\"2d\");\r\n    const dpr = devicePixelRatioRef.current || 1;\r\n    cvs.width = Math.round(width * dpr);\r\n    cvs.height = Math.round(height * dpr);\r\n    cvs.style.width = `${width}px`;\r\n    cvs.style.height = `${height}px`;\r\n    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);\r\n\r\n    let running = true;\r\n    function drawFrame() {\r\n      if (!running) return;\r\n      const tail = (values || []).slice(-barCount);\r\n      const target = Array.from({ length: Math.max(0, barCount - tail.length) }, () => 0).concat(tail.map((v) => Number(v || 0)));\r\n      for (let i = 0; i < barCount; i++) {\r\n        const a = displayRef.current[i] == null ? 0 : displayRef.current[i];\r\n        const b = target[i] == null ? 0 : target[i];\r\n        displayRef.current[i] = a + (b - a) * 0.18;\r\n      }\r\n\r\n      // background\r\n      ctx.clearRect(0, 0, width, height);\r\n      ctx.fillStyle = darkMode ? \"#061226\" : \"#ffffff\";\r\n      ctx.fillRect(0, 0, width, height);\r\n\r\n      const spacing = width / barCount;\r\n      const barW = Math.max(3, Math.floor(spacing * 0.62));\r\n      const padX = (spacing - barW) / 2;\r\n      const maxBarH = height - 16;\r\n\r\n      const realVals = target.filter((v) => typeof v === \"number\");\r\n      const l2 = realVals.length >= 2 ? realVals[realVals.length - 2] : realVals[realVals.length - 1] || 0;\r\n      const l1 = realVals.length >= 1 ? realVals[realVals.length - 1] : 0;\r\n      const trend = l1 >= l2 ? \"up\" : \"down\";\r\n\r\n      let gradTop, gradMid, gradBot;\r\n      if (palette === \"crypto\") {\r\n        gradTop = trend === \"up\" ? (darkMode ? \"#34d399\" : \"#10b981\") : (darkMode ? \"#fb7185\" : \"#ef4444\");\r\n        gradMid = trend === \"up\" ? (darkMode ? \"#10b981\" : \"#059669\") : (darkMode ? \"#fb923c\" : \"#f97316\");\r\n        gradBot = darkMode ? \"#021022\" : \"#ffffff\";\r\n      } else {\r\n        gradTop = darkMode ? \"#60a5fa\" : \"#3b82f6\";\r\n        gradMid = darkMode ? \"#2563eb\" : \"#2563eb\";\r\n        gradBot = darkMode ? \"#071025\" : \"#ffffff\";\r\n      }\r\n\r\n      // draw bars left-to-right\r\n      for (let i = 0; i < barCount; i++) {\r\n        const val = Math.max(0, Math.min(100, displayRef.current[i] || 0));\r\n        const h = Math.max(2, Math.round((val / 100) * maxBarH));\r\n        const x = i * spacing + padX;\r\n        const y = height - h - 10;\r\n        const g = ctx.createLinearGradient(0, y, 0, y + h);\r\n        g.addColorStop(0, gradTop);\r\n        g.addColorStop(0.6, gradMid);\r\n        g.addColorStop(1, gradBot);\r\n\r\n        ctx.fillStyle = g;\r\n        const radius = Math.min(barW / 2, 4);\r\n        ctx.beginPath();\r\n        ctx.moveTo(x + radius, y);\r\n        ctx.lineTo(x + barW - radius, y);\r\n        ctx.quadraticCurveTo(x + barW, y, x + barW, y + radius);\r\n        ctx.lineTo(x + barW, y + h - radius);\r\n        ctx.quadraticCurveTo(x + barW, y + h, x + barW - radius, y + h);\r\n        ctx.lineTo(x + radius, y + h);\r\n        ctx.quadraticCurveTo(x, y + h, x, y + h - radius);\r\n        ctx.lineTo(x, y + radius);\r\n        ctx.quadraticCurveTo(x, y, x + radius, y);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n      }\r\n\r\n      ctx.fillStyle = darkMode ? \"rgba(255,255,255,0.06)\" : \"rgba(0,0,0,0.06)\";\r\n      ctx.fillRect(0, height - 6, width, 2);\r\n\r\n      rafRef.current = requestAnimationFrame(drawFrame);\r\n    }\r\n\r\n    rafRef.current = requestAnimationFrame(drawFrame);\r\n    return () => {\r\n      running = false;\r\n      if (rafRef.current) cancelAnimationFrame(rafRef.current);\r\n    };\r\n  }, [values, darkMode, width, height, barCount, palette]);\r\n\r\n  useEffect(() => {\r\n    const cvs = canvasRef.current;\r\n    if (!cvs) return;\r\n    function getPointerX(e) { if (e.touches && e.touches[0]) return e.touches[0].clientX; return e.clientX; }\r\n    function getPointerY(e) { if (e.touches && e.touches[0]) return e.touches[0].clientY; return e.clientY; }\r\n    function onMove(e) {\r\n      const rect = cvs.getBoundingClientRect();\r\n      const x = getPointerX(e) - rect.left;\r\n      const spacing = width / barCount;\r\n      let index = Math.floor(x / spacing);\r\n      if (index < 0) index = 0;\r\n      if (index >= barCount) index = barCount - 1;\r\n      const tail = (values || []).slice(-barCount);\r\n      const padded = Array.from({ length: Math.max(0, barCount - tail.length) }, () => 0).concat(tail.map((v) => Number(v || 0)));\r\n      const value = padded[index] || 0;\r\n      const timestamp = Date.now();\r\n      if (tooltipRef && tooltipRef.current && typeof tooltipRef.current.show === \"function\") {\r\n        tooltipRef.current.show({ index, value, timestamp, pageX: getPointerX(e), pageY: getPointerY(e) });\r\n      }\r\n    }\r\n    function onLeave() {\r\n      if (tooltipRef && tooltipRef.current && typeof tooltipRef.current.hide === \"function\") tooltipRef.current.hide();\r\n    }\r\n    cvs.addEventListener(\"mousemove\", onMove);\r\n    cvs.addEventListener(\"mouseleave\", onLeave);\r\n    cvs.addEventListener(\"touchstart\", onMove, { passive: true });\r\n    cvs.addEventListener(\"touchmove\", onMove, { passive: true });\r\n    cvs.addEventListener(\"touchend\", onLeave, { passive: true });\r\n    return () => {\r\n      cvs.removeEventListener(\"mousemove\", onMove);\r\n      cvs.removeEventListener(\"mouseleave\", onLeave);\r\n      cvs.removeEventListener(\"touchstart\", onMove);\r\n      cvs.removeEventListener(\"touchmove\", onMove);\r\n      cvs.removeEventListener(\"touchend\", onLeave);\r\n    };\r\n  }, [values, barCount, width, tooltipRef]);\r\n\r\n  return <canvas ref={canvasRef} width={width} height={height} style={{ width: `${width}px`, height: `${height}px`, borderRadius: 8 }} aria-hidden />;\r\n}\r\n\r\n/* ---------------- Tooltip (forwarded ref) ---------------- */\r\nconst Tooltip = React.forwardRef(({ darkMode = false }, ref) => {\r\n  const [state, setState] = useState({ visible: false, index: 0, value: 0, timestamp: null, left: 0, top: 0 });\r\n  React.useImperativeHandle(ref, () => ({\r\n    show: ({ index = 0, value = 0, timestamp = null, pageX = 0, pageY = 0 } = {}) => {\r\n      const offsetX = 12, offsetY = -36;\r\n      let left = pageX + offsetX;\r\n      let top = pageY + offsetY;\r\n      const vw = window.innerWidth, vh = window.innerHeight;\r\n      const estW = 160, estH = 56;\r\n      if (left + estW > vw - 8) left = Math.max(8, pageX - estW - offsetX);\r\n      if (top < 8) top = Math.min(vh - estH - 8, pageY + 12);\r\n      setState({ visible: true, index, value: Math.round(Number(value) || 0), timestamp, left, top });\r\n    },\r\n    hide: () => setState((s) => ({ ...s, visible: false })),\r\n  }), []);\r\n\r\n  if (!state.visible) return null;\r\n  const bg = darkMode ? \"rgba(2,6,23,0.9)\" : \"#fff\";\r\n  const border = darkMode ? \"rgba(255,255,255,0.06)\" : \"rgba(2,6,23,0.06)\";\r\n  const text = darkMode ? \"#E6F0FF\" : \"#071024\";\r\n\r\n  return (\r\n    <div role=\"tooltip\" aria-hidden={!state.visible} style={{\r\n      position: \"fixed\", left: state.left, top: state.top, zIndex: 9999, pointerEvents: \"none\",\r\n      minWidth: 140, maxWidth: 300, padding: \"8px 10px\", borderRadius: 8, boxShadow: \"0 8px 24px rgba(2,6,23,0.4)\",\r\n      background: bg, border: `1px solid ${border}`, color: text, fontSize: 13, lineHeight: 1.2\r\n    }}>\r\n      <div style={{ fontWeight: 700, marginBottom: 6 }}>{state.value}%</div>\r\n      <div style={{ fontSize: 12, opacity: 0.85 }}>{state.timestamp ? formatTime(state.timestamp) : \"\"}</div>\r\n    </div>\r\n  );\r\n});\r\n\r\n/* ---------------- main component ---------------- */\r\nexport default function PartnerDashboardAuto({ orgId: propOrgId = null }) {\r\n  const { darkMode, org } = useOutletContext();\r\n  const navigate = useNavigate();\r\n  const effectiveOrgId = propOrgId || (org && (org.id || org.orgId)) || \"anon\";\r\n\r\n  const canonical = useMemo(() => {\r\n    if (Array.isArray(CANONICAL_SYSTEMS) && CANONICAL_SYSTEMS.length) {\r\n      return CANONICAL_SYSTEMS.map((s, i) => ({\r\n        key: normalizeSystemKey ? normalizeSystemKey(s.key || s.id || s.system || \"\") : String(s.key || s.id || \"\").toLowerCase(),\r\n        title: s.title || s.label || s.key || `System ${i + 1}`,\r\n        desc: s.description || s.blurb || \"\",\r\n      }));\r\n    }\r\n    return [\r\n      { key: \"interdependency\", title: \"Interdependency\", desc: \"\" },\r\n      { key: \"iteration\", title: \"Iteration\", desc: \"\" },\r\n      { key: \"investigation\", title: \"Investigation\", desc: \"\" },\r\n      { key: \"interpretation\", title: \"Interpretation\", desc: \"\" },\r\n      { key: \"illustration\", title: \"Illustration\", desc: \"\" },\r\n      { key: \"inlignment\", title: \"Inlignment\", desc: \"\" },\r\n    ];\r\n  }, []);\r\n\r\n  // uploads & assessments\r\n  const [uploads, setUploads] = useState(() => readUploads());\r\n  const [assessments, setAssessments] = useState(() => readAssessmentsForOrg(effectiveOrgId));\r\n  useEffect(() => {\r\n    function refresh() { setUploads(readUploads()); setAssessments(readAssessmentsForOrg(effectiveOrgId)); }\r\n    window.addEventListener(\"storage\", refresh);\r\n    window.addEventListener(\"conseqx:notifications:updated\", refresh);\r\n    return () => { window.removeEventListener(\"storage\", refresh); window.removeEventListener(\"conseqx:notifications:updated\", refresh); };\r\n  }, [effectiveOrgId]);\r\n\r\n  // assessed keys\r\n  const assessedKeys = useMemo(() => {\r\n    const keys = new Set();\r\n    (assessments || []).forEach((a) => {\r\n      const raw = a.systemId || a.system || a.systemKey || a.meta?.systemId || \"\";\r\n      if (!raw) return;\r\n      const k = normalizeSystemKey ? normalizeSystemKey(raw) : String(raw || \"\").toLowerCase();\r\n      if (k) keys.add(k);\r\n    });\r\n    const latest = uploads && uploads.length ? uploads[0] : null;\r\n    if (latest && Array.isArray(latest.analyzedSystems)) {\r\n      latest.analyzedSystems.forEach((s) => {\r\n        const k = normalizeSystemKey ? normalizeSystemKey(s) : String(s || \"\").toLowerCase();\r\n        if (k) keys.add(k);\r\n      });\r\n    }\r\n    return keys;\r\n  }, [assessments, uploads]);\r\n\r\n  // working scores & history\r\n  const [workingScores, setWorkingScores] = useState(() => {\r\n    const o = {};\r\n    canonical.forEach((s, i) => (o[s.key] = seedForKey(s.key, i)));\r\n    return o;\r\n  });\r\n  const historyRef = useRef({});\r\n  canonical.forEach((s) => { historyRef.current[s.key] = historyRef.current[s.key] || [workingScores[s.key] || 50]; });\r\n\r\n  // what-if deltas (preview only)\r\n  const [deltas, setDeltas] = useState({});\r\n  const [whatIfOpen, setWhatIfOpen] = useState({});\r\n  function setWhatIfVal(systemKey, val) {\r\n    if (!assessedKeys.has(systemKey)) return;\r\n    setDeltas((d) => ({ ...d, [systemKey]: Number(val) }));\r\n  }\r\n  function clearWhatIf(systemKey) {\r\n    setDeltas((d) => { const n = { ...d }; delete n[systemKey]; return n; });\r\n    setWhatIfOpen((s) => ({ ...s, [systemKey]: false }));\r\n  }\r\n  function applyWhatIfToWorking(systemKey) {\r\n    if (!assessedKeys.has(systemKey)) return;\r\n    const add = Number(deltas[systemKey] || 0);\r\n    if (!add) return;\r\n    setWorkingScores((prev) => {\r\n      const next = { ...prev };\r\n      next[systemKey] = Math.max(0, Math.min(100, Math.round((next[systemKey] || 0) + add)));\r\n      historyRef.current[systemKey] = (historyRef.current[systemKey] || []).concat(next[systemKey]).slice(-36);\r\n      return next;\r\n    });\r\n    setAlerts((a) => [{ id: `S-${Date.now()}`, level: \"info\", type: \"scenario\", systemKey, title: `Scenario applied: ${systemKey}`, text: `Applied preview change ${add >= 0 ? \"+\" + add : add} to ${systemKey}`, ts: Date.now() }, ...a].slice(0, 12));\r\n    clearWhatIf(systemKey);\r\n    try { window.dispatchEvent(new CustomEvent(\"conseqx:simulation:applied\", { detail: { systemKey, delta: add, appliedAt: Date.now() } })); } catch {}\r\n  }\r\n\r\n  // preview derived\r\n  const previewScores = useMemo(() => {\r\n    const p = { ...workingScores };\r\n    Object.keys(deltas).forEach((k) => {\r\n      const add = Number(deltas[k]) || 0;\r\n      if (typeof p[k] === \"number\") p[k] = Math.max(0, Math.min(100, Math.round(p[k] + add)));\r\n    });\r\n    return p;\r\n  }, [workingScores, deltas]);\r\n\r\n  // composite preview across assessed only\r\n  const compositePreview = useMemo(() => {\r\n    const vals = canonical.filter(c => assessedKeys.has(c.key)).map(c => previewScores[c.key]).filter(v => typeof v === \"number\");\r\n    if (!vals.length) return 0;\r\n    return Math.round(vals.reduce((a, b) => a + b, 0) / vals.length);\r\n  }, [previewScores, canonical, assessedKeys]);\r\n\r\n  // alerts\r\n  const [alerts, setAlerts] = useState([]);\r\n  const [autoOn, setAutoOn] = useState(true);\r\n  const intervalRef = useRef(null);\r\n  const [externalSignals, setExternalSignals] = useState(() => generateSignals(canonical));\r\n  const [deepModal, setDeepModal] = useState({ open: false, systemKey: null });\r\n  const [palette, setPalette] = useState(\"crypto\");\r\n  const tooltipControl = useRef(null);\r\n\r\n  // scenario panel state\r\n  const [scenarioOpen, setScenarioOpen] = useState(false);\r\n  const [scenarioName, setScenarioName] = useState(\"\");\r\n  const [savedScenarios, setSavedScenarios] = useState(() => readSavedScenarios());\r\n  const [editingScenarioId, setEditingScenarioId] = useState(null);\r\n\r\n  // composite (current)\r\n  const composite = useMemo(() => {\r\n    const vals = canonical.filter(c => assessedKeys.has(c.key)).map(c => workingScores[c.key]).filter(v => typeof v === \"number\");\r\n    if (!vals.length) return 0;\r\n    return Math.round(vals.reduce((a, b) => a + b, 0) / vals.length);\r\n  }, [workingScores, canonical, assessedKeys]);\r\n\r\n  // external polling\r\n  useEffect(() => {\r\n    let extInt = null;\r\n    function pollExternal() {\r\n      const sigs = generateSignals(canonical);\r\n      setExternalSignals(sigs);\r\n      try { window.dispatchEvent(new CustomEvent(\"conseqx:external:updated\", { detail: { signals: sigs } })); } catch (e) {}\r\n    }\r\n    if (autoOn) {\r\n      pollExternal();\r\n      extInt = setInterval(pollExternal, 5000);\r\n    } else {\r\n      pollExternal();\r\n    }\r\n    return () => { if (extInt) clearInterval(extInt); };\r\n  }, [autoOn, canonical]);\r\n\r\n  // auto tick â€” only update assessed systems\r\n  useEffect(() => {\r\n    function tick() {\r\n      setWorkingScores((prev) => {\r\n        const next = { ...prev };\r\n        canonical.forEach((s) => {\r\n          if (!assessedKeys.has(s.key)) return;\r\n          const delta = randBetween(-2, 3);\r\n          next[s.key] = Math.max(10, Math.min(95, (next[s.key] || 50) + delta));\r\n          historyRef.current[s.key] = (historyRef.current[s.key] || []).concat(next[s.key]).slice(-36);\r\n        });\r\n        return next;\r\n      });\r\n    }\r\n\r\n    if (autoOn) {\r\n      tick();\r\n      intervalRef.current = setInterval(tick, 3000);\r\n    } else {\r\n      if (intervalRef.current) { clearInterval(intervalRef.current); intervalRef.current = null; }\r\n    }\r\n\r\n    return () => { if (intervalRef.current) { clearInterval(intervalRef.current); intervalRef.current = null; } };\r\n  }, [autoOn, canonical, assessedKeys]);\r\n\r\n  /* ---------------- Alert evaluator (kept from earlier) ---------------- */\r\n  const prevScoresRef = useRef({});\r\n  useEffect(() => {\r\n    function evaluateAlerts() {\r\n      const newAlerts = [];\r\n      const now = Date.now();\r\n\r\n      canonical.forEach((s) => {\r\n        if (!assessedKeys.has(s.key)) return;\r\n        const prev = prevScoresRef.current[s.key];\r\n        const cur = workingScores[s.key];\r\n        if (typeof prev === \"number\" && typeof cur === \"number\") {\r\n          const diff = cur - prev;\r\n          if (Math.abs(diff) >= 8) {\r\n            newAlerts.push({\r\n              id: `score-${s.key}-${now}`,\r\n              level: Math.abs(diff) >= 12 ? \"high\" : \"medium\",\r\n              type: \"score-shock\",\r\n              systemKey: s.key,\r\n              title: `${s.title} ${diff < 0 ? \"dropped\" : \"rose\"} ${Math.abs(diff)} pts`,\r\n              text: `${s.title} score ${diff < 0 ? \"declined\" : \"increased\"} by ${diff} points since last check.`,\r\n              ts: now,\r\n              suggestedAction: { label: \"Open deep dive\", action: () => openDeepModal(s.key) },\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n      externalSignals.forEach((sig) => {\r\n        const sKey = sig.systemKey;\r\n        const isAssessed = assessedKeys.has(sKey);\r\n        const corr = correlate((workingScores[sKey] ?? 0), [sig]);\r\n        if (isAssessed) {\r\n          if (corr.impactLevel === \"high\") {\r\n            newAlerts.push({\r\n              id: `ext-${sig.id}`,\r\n              level: \"high\",\r\n              type: \"external-impact\",\r\n              systemKey: sKey,\r\n              title: `External (${sig.type}) impact on ${(canonical.find(x => x.key === sKey) || {}).title}`,\r\n              text: `${sig.type} signal at ${sig.value} (importance ${sig.importance}) â€” expected ${corr.expectedDelta >= 0 ? \"+\" + corr.expectedDelta : corr.expectedDelta} pts.`,\r\n              ts: sig.timestamp,\r\n              signal: sig,\r\n              suggestedAction: { label: \"Open deep dive\", action: () => openDeepModal(sKey) },\r\n            });\r\n          }\r\n        } else {\r\n          if (sig.value >= 75) {\r\n            newAlerts.push({\r\n              id: `assess-missing-${sKey}-${sig.id}`,\r\n              level: \"medium\",\r\n              type: \"assessment-missing\",\r\n              systemKey: sKey,\r\n              title: `Assessment recommended: ${(canonical.find(x => x.key === sKey) || {}).title}`,\r\n              text: `High external signal (${sig.type} ${sig.value}). Consider assessing this system to enable diagnostics.`,\r\n              ts: sig.timestamp,\r\n              suggestedAction: { label: \"Take assessment\", action: () => startAssessmentFor(sKey) },\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n      setAlerts((current) => {\r\n        const byKey = new Map();\r\n        current.forEach((a) => {\r\n          const key = `${a.type || a.id}-${a.systemKey || \"\"}`;\r\n          byKey.set(key, a);\r\n        });\r\n        newAlerts.forEach((a) => {\r\n          const key = `${a.type || a.id}-${a.systemKey || \"\"}`;\r\n          byKey.set(key, a);\r\n        });\r\n        const arr = Array.from(byKey.values()).sort((A, B) => {\r\n          const score = (level) => ({ high: 3, medium: 2, low: 1, info: 0 }[level] || 0);\r\n          const s = score(B.level) - score(A.level);\r\n          if (s !== 0) return s;\r\n          return B.ts - A.ts;\r\n        });\r\n        return arr.slice(0, 24);\r\n      });\r\n\r\n      prevScoresRef.current = { ...workingScores };\r\n    }\r\n\r\n    evaluateAlerts();\r\n  }, [workingScores, externalSignals, canonical, assessedKeys]);\r\n\r\n  // actions / modal\r\n  function openDeepModal(systemKey) {\r\n    if (!assessedKeys.has(systemKey)) return;\r\n    setDeepModal({ open: true, systemKey });\r\n  }\r\n  function closeDeepModal() { setDeepModal({ open: false, systemKey: null }); }\r\n\r\n  function exportSystemJSON(systemKey) {\r\n    try {\r\n      const payload = {\r\n        systemKey,\r\n        title: (canonical.find(s => s.key === systemKey) || {}).title,\r\n        current: workingScores[systemKey],\r\n        preview: previewScores[systemKey],\r\n        history: historyRef.current[systemKey] || [],\r\n        external: (externalSignals || []).find(x => x.systemKey === systemKey) || null,\r\n        exportedAt: Date.now(),\r\n      };\r\n      const blob = new Blob([JSON.stringify(payload, null, 2)], { type: \"application/json\" });\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement(\"a\");\r\n      a.href = url;\r\n      a.download = `${(payload.title || systemKey)}_deepdive.json`;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      a.remove();\r\n      setTimeout(() => URL.revokeObjectURL(url), 1500);\r\n    } catch (e) {}\r\n  }\r\n\r\n  function printDeep(systemKey) {\r\n    const sys = canonical.find(s => s.key === systemKey) || { title: systemKey };\r\n    const hist = (historyRef.current[systemKey] || []).slice(-24);\r\n    const ext = (externalSignals || []).find(x => x.systemKey === systemKey);\r\n    const content = `<!doctype html><html><head><meta charset=\"utf-8\"/><meta name=\"viewport\" content=\"width=device-width,initial-scale=1\"/><title>${sys.title} â€” Deep Dive</title><style>\r\n      @page{margin:20mm}body{font-family:Inter,system-ui,-apple-system,\"Segoe UI\",Roboto,Arial;color:#111;margin:0;padding:0;background:#fff}\r\n      .wrap{max-width:820px;margin:18px auto;padding:18px}header{display:flex;justify-content:space-between;align-items:center;margin-bottom:18px}\r\n      header h1{font-size:20px;margin:0}.meta{color:#555;font-size:13px}.panel{border-radius:10px;padding:12px;margin-bottom:12px;background:#fff;border:1px solid #e6e6e6}\r\n      .score{font-size:34px;font-weight:700}.muted{color:#666;font-size:13px}.row{display:flex;justify-content:space-between;gap:12px;align-items:center}.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:8px}\r\n      pre{white-space:pre-wrap;word-break:break-word;font-size:12px;color:#222;background:transparent;padding:0;border:none}footer{margin-top:18px;color:#666;font-size:12px;text-align:right}\r\n      @media print{body{-webkit-print-color-adjust:exact}.wrap{box-shadow:none}}</style></head><body>\r\n      <div class=\"wrap\"><header><div><h1>${sys.title} â€” Deep Dive</h1><div class=\"meta\">${new Date().toLocaleString()}</div></div>\r\n      <div style=\"text-align:right\"><div class=\"score\">${previewScores[systemKey] ?? \"â€”\"}%</div><div class=\"muted\">Current: ${workingScores[systemKey] ?? \"â€”\"}%</div></div></header>\r\n      <div class=\"panel\"><div class=\"row\"><div><div style=\"font-weight:600\">Insights</div><div class=\"muted\">${(synthInsights(systemKey)).join(\" â€¢ \")}</div></div>\r\n      <div style=\"width:38%\"><div style=\"font-weight:600\">External signal</div><div class=\"muted\">${ext ? `${ext.type} ${ext.value} (${ext.importance}) â€” ${ext.source}` : \"None\"}</div></div></div></div>\r\n      <div class=\"panel\"><div style=\"font-weight:600;margin-bottom:8px\">Recent history (last ${hist.length} points)</div><pre>${JSON.stringify(hist,null,2)}</pre></div>\r\n      <div class=\"panel grid\"><div><div style=\"font-weight:600\">Forecast (4 weeks)</div><div class=\"muted\">${synthForecasts(systemKey)[0].text}</div></div>\r\n      <div><div style=\"font-weight:600\">Recommendations</div><div class=\"muted\">${synthRecs(systemKey)[0].items.join(\"; \")}</div></div>\r\n      <div><div style=\"font-weight:600\">Export</div><div class=\"muted\">Use browser Print -> Save as PDF to create a PDF report.</div></div></div>\r\n      <footer>Generated by Conseq-X â€¢ ${new Date().toLocaleString()}</footer></div><script>setTimeout(()=>{window.print();},500);</script></body></html>`;\r\n    const w = window.open(\"\", \"_blank\", \"noopener,noreferrer\");\r\n    if (!w) return;\r\n    w.document.open();\r\n    w.document.write(content);\r\n    w.document.close();\r\n    w.focus();\r\n  }\r\n\r\n  function synthInsights(systemKey) {\r\n    const cur = workingScores[systemKey] ?? 0;\r\n    const ext = (externalSignals || []).filter(x => x.systemKey === systemKey);\r\n    const corr = correlate(cur, ext ? ext : []);\r\n    const base = [\r\n      cur >= 75 ? \"Strong capability demonstrated â€” maintain governance and measure velocity.\" : \"Observed gaps in handoffs and ownership; prioritize short sprints.\",\r\n      cur < 60 ? \"Risk of delays under pressure; assign dedicated owners and SLAs.\" : \"Stable under current conditions; test scale scenarios.\",\r\n    ];\r\n    if (corr.impactLevel && corr.impactLevel !== \"none\") base.push(`External signal impact: ${corr.impactLevel.toUpperCase()} â€” ${corr.reason}`);\r\n    return base;\r\n  }\r\n  function synthForecasts(systemKey) {\r\n    return [\r\n      { horizon: \"4 weeks\", text: \"Small stabilization expected with focused sprints.\" },\r\n      { horizon: \"3 months\", text: \"Measurable lift if owners and KPIs are enforced.\" },\r\n      { horizon: \"12 months\", text: \"Sustained improvement requires capability uplift and playbooks.\" },\r\n    ];\r\n  }\r\n  function synthRecs(systemKey) {\r\n    return [\r\n      { title: \"Short\", items: [\"Assign triage owner for top blockers\", \"Start 2-week improvement sprint\"] },\r\n      { title: \"Mid\", items: [\"Set weekly KPIs\", \"Document common handoffs\"] },\r\n      { title: \"Long\", items: [\"Embed playbooks\", \"Run capability uplift program\"] },\r\n    ];\r\n  }\r\n\r\n  function startAssessmentFor(systemKey) {\r\n    navigate(`/ceo/assessments?focus=${encodeURIComponent(systemKey)}`);\r\n  }\r\n\r\n  function ackAlert(alertId) {\r\n    setAlerts((a) => a.filter(x => x.id !== alertId));\r\n  }\r\n\r\n  /* ---------------- Scenario Panel logic ---------------- */\r\n  function openScenarioPanel() {\r\n    setSavedScenarios(readSavedScenarios());\r\n    setScenarioOpen(true);\r\n    setEditingScenarioId(null);\r\n    setScenarioName(\"\");\r\n  }\r\n  function closeScenarioPanel() {\r\n    setScenarioOpen(false);\r\n    setEditingScenarioId(null);\r\n    setScenarioName(\"\");\r\n  }\r\n\r\n  // Build a scenario object from current deltas\r\n  function createScenarioObject(name = \"Untitled scenario\") {\r\n    const entries = Object.keys(deltas).map(k => ({ systemKey: k, delta: Number(deltas[k] || 0) }));\r\n    return {\r\n      id: `sc-${Date.now()}`,\r\n      name: name || `Scenario ${new Date().toLocaleString()}`,\r\n      createdAt: Date.now(),\r\n      items: entries,\r\n    };\r\n  }\r\n\r\n  function saveScenario(name = null) {\r\n    const finalName = name || scenarioName || `Scenario ${new Date().toLocaleString()}`;\r\n    const sc = createScenarioObject(finalName);\r\n    const list = readSavedScenarios();\r\n    list.unshift(sc);\r\n    writeSavedScenarios(list);\r\n    setSavedScenarios(list);\r\n    setScenarioName(\"\");\r\n    setEditingScenarioId(null);\r\n  }\r\n\r\n  function deleteScenario(id) {\r\n    const list = readSavedScenarios().filter(s => s.id !== id);\r\n    writeSavedScenarios(list);\r\n    setSavedScenarios(list);\r\n  }\r\n\r\n  function loadScenarioToPreview(id) {\r\n    const sc = readSavedScenarios().find(s => s.id === id);\r\n    if (!sc) return;\r\n    // set deltas to scenario items (preview only)\r\n    const next = {};\r\n    sc.items.forEach((it) => { next[it.systemKey] = it.delta; });\r\n    setDeltas(next);\r\n    // ensure drawer closed for clarity\r\n    setScenarioOpen(false);\r\n  }\r\n\r\n  function applyScenarioToWorking(id) {\r\n    const sc = readSavedScenarios().find(s => s.id === id);\r\n    if (!sc) return;\r\n    // apply each delta to workingScores\r\n    setWorkingScores((prev) => {\r\n      const next = { ...prev };\r\n      sc.items.forEach((it) => {\r\n        if (!assessedKeys.has(it.systemKey)) return;\r\n        next[it.systemKey] = Math.max(0, Math.min(100, Math.round((next[it.systemKey] || 0) + Number(it.delta || 0))));\r\n        historyRef.current[it.systemKey] = (historyRef.current[it.systemKey] || []).concat(next[it.systemKey]).slice(-36);\r\n      });\r\n      return next;\r\n    });\r\n    setAlerts((a) => [{ id: `S-${Date.now()}`, level: \"info\", type: \"scenario\", title: `Scenario applied: ${sc.name}`, text: `Applied scenario to working scores.`, ts: Date.now() }, ...a].slice(0, 12));\r\n    setScenarioOpen(false);\r\n  }\r\n\r\n  function applyCurrentPreviewScenario(name = null) {\r\n    // create a temporary scenario from current deltas and apply it (without saving)\r\n    const sc = createScenarioObject(name || (\"Preview \" + new Date().toLocaleTimeString()));\r\n    // apply items\r\n    setWorkingScores((prev) => {\r\n      const next = { ...prev };\r\n      sc.items.forEach((it) => {\r\n        if (!assessedKeys.has(it.systemKey)) return;\r\n        next[it.systemKey] = Math.max(0, Math.min(100, Math.round((next[it.systemKey] || 0) + Number(it.delta || 0))));\r\n        historyRef.current[it.systemKey] = (historyRef.current[it.systemKey] || []).concat(next[it.systemKey]).slice(-36);\r\n      });\r\n      return next;\r\n    });\r\n    setAlerts((a) => [{ id: `S-${Date.now()}`, level: \"info\", type: \"scenario\", title: `Preview scenario applied`, text: `Applied preview scenario to working scores.`, ts: Date.now() }, ...a].slice(0, 12));\r\n    // clear preview\r\n    setDeltas({});\r\n    setWhatIfOpen({});\r\n  }\r\n\r\n  /* ---------------- UI rendering ---------------- */\r\n  const modalBg = darkMode ? \"bg-gray-900\" : \"bg-white\";\r\n  const modalText = darkMode ? \"text-gray-100\" : \"text-gray-900\";\r\n  const muted = darkMode ? \"text-gray-400\" : \"text-gray-600\";\r\n\r\n  return (\r\n    <section>\r\n      <style>{`.hide-scrollbar{scrollbar-width:none;-ms-overflow-style:none}.hide-scrollbar::-webkit-scrollbar{display:none}`}</style>\r\n\r\n      <div className={`rounded-2xl p-4 ${darkMode ? \"bg-gray-900 border border-gray-700 text-gray-100\" : \"bg-white border border-gray-100 text-gray-900\"}`}>\r\n        {/* header */}\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3\">\r\n          <div>\r\n            <h2 className=\"text-xl font-semibold\">C-Suite Automatic Ingestion</h2>\r\n            <div className=\"text-xs text-gray-400 mt-1\">Live evidence feed â€” assessed systems update in real time. Use Scenarios to compose multi-system what-if changes.</div>\r\n          </div>\r\n\r\n          <div className=\"flex items-center gap-3\">\r\n            {/* <button onClick={openScenarioPanel} className=\"px-3 py-1 border rounded text-sm hidden sm:inline\">Scenario Panel</button> */}\r\n            <button\r\n              onClick={openScenarioPanel}\r\n              className={`px-3 py-1 text-sm rounded hidden sm:inline\r\n                ${darkMode ? \"bg-gray-700 text-gray-100\" : \"bg-gray-200 text-gray-900\"}`}\r\n            >\r\n              Open Scenario Panel\r\n            </button>\r\n\r\n            <div className=\"text-xs text-gray-400 hidden sm:block\">Palette</div>\r\n            {/* <select value={palette} onChange={(e) => setPalette(e.target.value)} className=\"px-2 py-1 border rounded text-sm\"> */}\r\n            <select\r\n              value={palette}\r\n              onChange={(e) => setPalette(e.target.value)}\r\n              className={`px-2 py-1 rounded text-sm\r\n                ${darkMode\r\n                  ? \"bg-gray-800 border border-gray-700 text-gray-100\"\r\n                  : \"bg-white border border-gray-100 text-gray-900\"}`}\r\n            >\r\n\r\n              <option value=\"crypto\">Crypto (green/red)</option>\r\n              <option value=\"neutral\">Neutral</option>\r\n            </select>\r\n\r\n            <div className=\"text-xs text-gray-400\">Auto</div>\r\n            <button onClick={() => setAutoOn((s) => !s)} className={`px-3 py-1 rounded-md border flex items-center gap-2 text-xs ${autoOn ? \"bg-green-600 text-white\" : \"\"}`} title={autoOn ? \"Live ingestion running\" : \"Live ingestion paused\"}>\r\n              {autoOn ? <FaPause /> : <FaPlay />} <span>{autoOn ? \"On\" : \"Off\"}</span>\r\n            </button>\r\n\r\n            <div className=\"text-xs text-gray-400 hidden sm:block\">Composite</div>\r\n            <div className={`font-semibold text-2xl ${composite >= 80 ? \"text-green-400\" : composite >= 60 ? \"text-yellow-400\" : \"text-red-400\"}`}>{composite}%</div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* systems grid */}\r\n        <div className=\"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4\">\r\n          {canonical.map((s) => {\r\n            const live = workingScores[s.key] ?? 0;\r\n            const preview = previewScores[s.key] ?? live;\r\n            const delta = Number(deltas[s.key] || 0);\r\n            const hist = (historyRef.current[s.key] || []).slice(-36);\r\n            const isAssessed = assessedKeys.has(s.key);\r\n\r\n            // only show external/impact for assessed systems\r\n            const ext = isAssessed ? (externalSignals || []).find(x => x.systemKey === s.key) : null;\r\n            const corr = isAssessed ? correlate(preview, ext ? [ext] : []) : null;\r\n\r\n            return (\r\n              <div key={s.key} className={`p-3 rounded-md border flex flex-col ${darkMode ? \"bg-gray-800 border-gray-700\" : \"bg-white border-gray-100\"}`}>\r\n                {/* title / desc */}\r\n                <div>\r\n                  <div className=\"font-semibold text-sm truncate\">{s.title}</div>\r\n                  <div className={`text-xs ${muted} mt-1 truncate`}>{s.desc || `${s.title} live score`}</div>\r\n                </div>\r\n\r\n                {/* external / impact region (assessed only) */}\r\n                {isAssessed && ext && (\r\n                  <div className={`mt-3 p-2 rounded ${darkMode ? \"bg-gray-900/40 border border-gray-700\" : \"bg-gray-50 border border-gray-100\"}`}>\r\n                    <div className=\"flex items-center justify-between\">\r\n                      <div className=\"text-xs\">\r\n                        <span className=\"font-medium\">External:</span> <span className=\"truncate\">{ext.type} {ext.value} ({ext.importance})</span>\r\n                      </div>\r\n                      <div className=\"text-xs text-yellow-400\">{corr && corr.impactLevel ? `${corr.impactLevel.toUpperCase()} â€¢ ${corr.expectedDelta >= 0 ? `+${corr.expectedDelta}` : corr.expectedDelta}` : \"No impact\"}</div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* spacer grows so chart+actions sit at bottom */}\r\n                <div className=\"flex-1 mt-3 flex flex-col justify-end\">\r\n                  {/* Chart + actions row â€” chart on left, actions at right bottom */}\r\n                  <div className=\"flex items-end justify-between gap-3\">\r\n                    <div className=\"flex-shrink-0\">\r\n                      {isAssessed ? (\r\n                        <LiveBarsCanvas values={hist} darkMode={darkMode} barCount={18} width={140} height={72} palette={palette} tooltipRef={tooltipControl} />\r\n                      ) : (\r\n                        <div className=\"w-36 h-12 flex items-center justify-center text-xs text-gray-400 rounded border border-dashed\">\r\n                          No history\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col items-end gap-2 min-w-[120px]\">\r\n                      <div className=\"text-right\">\r\n                        <div className={`text-2xl font-bold ${toneClassFor(preview)}`}>{isAssessed ? `${preview}%` : \"Not assessed\"}</div>\r\n                        <div className=\"text-xs text-gray-400\">{isAssessed ? (delta !== 0 ? `Preview â€¢ Î” ${delta >= 0 ? `+${delta}` : delta}` : \"Real-time\") : \"No assessment\"}</div>\r\n                      </div>\r\n\r\n                      <div className=\"flex items-center gap-2\">\r\n                        {isAssessed ? (\r\n                          <>\r\n                            <button onClickCapture={(e) => { e.stopPropagation(); setWhatIfOpen((prev) => ({ ...prev, [s.key]: !prev[s.key] })); }} className=\"px-2 py-1 text-xs border rounded\" title=\"Toggle what-if\">What-if</button>\r\n                            <button onClick={() => setWhatIfVal(s.key, (Number(deltas[s.key] || 0) + 5))} className=\"px-2 py-1 text-xs border rounded\" title=\"+5 preview\">+5</button>\r\n                            <button onClick={() => openDeepModal(s.key)} className=\"px-3 py-1 text-xs bg-indigo-600 text-white rounded\">Deep dive</button>\r\n                          </>\r\n                        ) : (\r\n                          <button onClick={() => startAssessmentFor(s.key)} className=\"px-3 py-1 text-xs bg-indigo-600 text-white rounded\">Take assessment</button>\r\n                        )}\r\n                      </div>\r\n\r\n                      {/* inline what-if slider */}\r\n                      {isAssessed && whatIfOpen[s.key] && (\r\n                        <div className=\"mt-2 w-full bg-transparent\">\r\n                          <div className=\"text-xs text-gray-400 mb-1\">Adjust scenario (%)</div>\r\n                          <div className=\"flex items-center gap-2\">\r\n                            <input\r\n                              type=\"range\"\r\n                              min={-20}\r\n                              max={20}\r\n                              step={1}\r\n                              value={Number(deltas[s.key] || 0)}\r\n                              onChange={(e) => setWhatIfVal(s.key, Number(e.target.value))}\r\n                              className=\"w-full\"\r\n                            />\r\n                            <div className=\"text-xs w-12 text-right\">{(deltas[s.key] || 0) >= 0 ? `+${deltas[s.key] || 0}` : (deltas[s.key] || 0)}</div>\r\n                          </div>\r\n                          <div className=\"mt-2 flex gap-2 justify-end\">\r\n                            <button onClick={() => clearWhatIf(s.key)} className=\"px-2 py-1 text-xs border rounded\">Reset</button>\r\n                            <button onClick={() => applyWhatIfToWorking(s.key)} className=\"px-2 py-1 text-xs bg-green-600 text-white rounded\">Apply</button>\r\n                          </div>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n\r\n        {/* alerts / notes */}\r\n        <div className=\"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n          <div className={`p-4 rounded-md border ${darkMode ? \"bg-gray-800 border-gray-700\" : \"bg-white border-gray-100\"}`}>\r\n            <div className=\"flex items-center justify-between\">\r\n              <div className=\"font-semibold flex items-center gap-2\"><FaBolt /> Alerts</div>\r\n              <div className=\"text-xs text-gray-400\">Prioritized</div>\r\n            </div>\r\n\r\n            <ul className=\"mt-3 text-sm space-y-2\">\r\n              {alerts.length === 0 && <li className=\"text-xs text-gray-500\">No alerts</li>}\r\n              {alerts.map((a) => (\r\n                <li key={a.id} className={`p-2 rounded ${a.level === \"high\" ? \"bg-red-900/10 border border-red-700\" : a.level === \"medium\" ? \"bg-yellow-900/10 border border-yellow-700\" : \"bg-gray-100/10 border border-gray-200\"}`}>\r\n                  <div className=\"flex items-start justify-between gap-3\">\r\n                    <div className=\"min-w-0\">\r\n                      <div className=\"font-medium truncate\">{a.title || a.text}</div>\r\n                      <div className=\"text-xs text-gray-400 mt-1 truncate\">{a.text}</div>\r\n                      <div className=\"text-xs text-gray-400 mt-1\">Type: {a.type || \"info\"} â€¢ {a.systemKey || \"system\"}</div>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col items-end gap-2\">\r\n                      <div className=\"text-xs text-gray-400\">{formatTime(a.ts)}</div>\r\n                      <div className=\"flex gap-2\">\r\n                        {a.suggestedAction && a.suggestedAction.action ? (\r\n                          <button onClick={() => a.suggestedAction.action()} className=\"px-2 py-1 text-xs border rounded\">{a.suggestedAction.label}</button>\r\n                        ) : null}\r\n                        <button onClick={() => ackAlert(a.id)} className=\"px-2 py-1 text-xs border rounded\">Acknowledge</button>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n\r\n          <div className={`p-4 rounded-md border ${darkMode ? \"bg-gray-800 border-gray-700\" : \"bg-white border-gray-100\"}`}>\r\n            <div className=\"font-semibold\">Notes</div>\r\n            <div className=\"text-xs text-gray-400 mt-2\">\r\n              Live updates and external correlation are shown only for systems that have a recorded assessment (Assessment results â†’ Diagnose vs external signals). Use the Assessments tab to add missing system data.\r\n            </div>\r\n            <div className=\"text-xs text-gray-400 mt-3\">Composite (preview): <span className=\"font-semibold\">{compositePreview}%</span></div>\r\n            <div className=\"mt-3 flex gap-2\">\r\n              <button onClick={() => { setDeltas({}); setWhatIfOpen({}); }} className=\"px-3 py-1 border rounded text-xs\">Clear Preview</button>\r\n              <button onClick={() => applyCurrentPreviewScenario()} className=\"px-3 py-1 bg-indigo-600 text-white rounded text-xs\">Apply Preview</button>\r\n              {/* <button onClick={openScenarioPanel} className=\"px-3 py-1 bg-gray-200 text-sm rounded hidden sm:inline\">Open Scenario Panel</button> */}\r\n              <button\r\n                onClick={openScenarioPanel}\r\n                className={`px-3 py-1 rounded text-sm hidden sm:inline\r\n                  ${darkMode\r\n                    ? \"bg-gray-800 border border-gray-700 text-gray-100\"\r\n                    : \"bg-white border border-gray-100 text-gray-900\"}`}\r\n              >\r\n                Scenario Panel\r\n              </button>\r\n\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Scenario Panel Drawer */}\r\n      {scenarioOpen && (\r\n        <div className=\"fixed inset-0 z-60 flex items-end md:items-center justify-center p-4\">\r\n          <div className=\"absolute inset-0\" style={{ backgroundColor: darkMode ? \"rgba(2,6,23,0.6)\" : \"rgba(0,0,0,0.45)\" }} onClick={closeScenarioPanel} />\r\n          <div className={`relative z-10 w-full max-w-4xl max-h-[90vh] overflow-auto rounded-t-xl md:rounded-2xl p-4 ${modalBg} ${modalText} border shadow-lg hide-scrollbar`} role=\"dialog\" aria-modal=\"true\">\r\n            <div className=\"flex items-center justify-between gap-3\">\r\n              <div>\r\n                <h3 className=\"text-lg font-semibold\">Scenario Panel</h3>\r\n                <div className=\"text-xs text-gray-400\">Compose multi-system scenarios, preview, save, and apply.</div>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <button onClick={closeScenarioPanel} className=\"px-3 py-1 rounded-md border text-sm\"><FaTimes /></button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mt-4 grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n              <div className={`p-3 rounded-md border ${darkMode ? \"bg-gray-800 border-gray-700\" : \"bg-white border-gray-100\"}`}>\r\n                <div className=\"text-sm font-semibold\">Current scenario (preview)</div>\r\n                <div className=\"text-xs text-gray-400 mt-1\">Adjust sliders for assessed systems to compose a scenario. Use Save to store it, Apply to commit to this session.</div>\r\n\r\n                <div className=\"mt-3 space-y-3\">\r\n                  {canonical.filter(c => assessedKeys.has(c.key)).map((c) => (\r\n                    <div key={c.key} className=\"flex items-center gap-3\">\r\n                      <div className=\"w-28 text-sm truncate\">{c.title}</div>\r\n                      <input\r\n                        type=\"range\"\r\n                        min={-30}\r\n                        max={30}\r\n                        step={1}\r\n                        value={Number(deltas[c.key] || 0)}\r\n                        onChange={(e) => setWhatIfVal(c.key, Number(e.target.value))}\r\n                        className=\"flex-1\"\r\n                      />\r\n                      <div className=\"w-12 text-right text-xs\">{(deltas[c.key] || 0) >= 0 ? `+${deltas[c.key] || 0}` : (deltas[c.key] || 0)}</div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                <div className=\"mt-4 flex items-center gap-2\">\r\n                  {/* <input placeholder=\"Scenario name\" value={scenarioName} onChange={(e) => setScenarioName(e.target.value)} className=\"px-2 py-1 border rounded text-sm w-full\" /> */}\r\n                  <input\r\n                    placeholder=\"Scenario name\"\r\n                    value={scenarioName}\r\n                    onChange={(e) => setScenarioName(e.target.value)}\r\n                    className={`px-2 py-1 rounded text-sm w-full\r\n                      ${darkMode\r\n                        ? \"bg-gray-800 border border-gray-700 text-gray-100 placeholder-gray-400\"\r\n                        : \"bg-white border border-gray-100 text-gray-900 placeholder-gray-500\"}`}\r\n                  />\r\n\r\n                  <button onClick={() => saveScenario()} className=\"px-3 py-1 bg-indigo-600 text-white rounded text-sm\">Save</button>\r\n                  <button onClick={() => { setDeltas({}); setWhatIfOpen({}); }} className=\"px-3 py-1 border rounded text-sm\">Reset</button>\r\n                  <button onClick={() => applyCurrentPreviewScenario()} className=\"px-3 py-1 bg-green-600 text-white rounded text-sm\">Apply</button>\r\n                </div>\r\n\r\n                <div className=\"mt-3 text-xs text-gray-400\">Preview composite: <span className=\"font-semibold\">{compositePreview}%</span></div>\r\n              </div>\r\n\r\n              <div className={`p-3 rounded-md border ${darkMode ? \"bg-gray-800 border-gray-700\" : \"bg-white border-gray-100\"}`}>\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"text-sm font-semibold\">Saved scenarios</div>\r\n                </div>\r\n\r\n                <div className=\"mt-3 space-y-2 max-h-64 overflow-auto\">\r\n                  {savedScenarios.length === 0 && <div className=\"text-xs text-gray-400\">No saved scenarios</div>}\r\n                  {savedScenarios.map((sc) => (\r\n                    <div key={sc.id} className=\"p-2 rounded border flex items-center justify-between\">\r\n                      <div className=\"min-w-0\">\r\n                        <div className=\"font-medium truncate\">{sc.name}</div>\r\n                        <div className=\"text-xs text-gray-400 truncate\">{new Date(sc.createdAt).toLocaleString()} â€¢ {sc.items.length} systems</div>\r\n                      </div>\r\n                      <div className=\"flex items-center gap-2\">\r\n                        <button onClick={() => loadScenarioToPreview(sc.id)} className=\"px-2 py-1 text-xs border rounded\">Load</button>\r\n                        <button onClick={() => applyScenarioToWorking(sc.id)} className=\"px-2 py-1 text-xs bg-green-600 text-white rounded\">Apply</button>\r\n                        <button onClick={() => deleteScenario(sc.id)} className=\"px-2 py-1 text-xs border rounded\">Delete</button>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Deep Dive Modal */}\r\n      {deepModal.open && (\r\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\r\n          <div className=\"absolute inset-0\" style={{ backgroundColor: darkMode ? \"rgba(2,6,23,0.6)\" : \"rgba(0,0,0,0.45)\" }} onClick={closeDeepModal} />\r\n          <div className={`relative z-10 w-full max-w-4xl max-h-[90vh] overflow-auto rounded-2xl p-6 ${modalBg} ${modalText} border shadow-2xl hide-scrollbar`}>\r\n            <div className=\"flex items-start justify-between gap-3 sticky top-0 bg-transparent\">\r\n              <div className=\"flex items-center gap-3\">\r\n                <div className=\"w-12 h-12 rounded-lg bg-gradient-to-br from-indigo-600 to-blue-500 flex items-center justify-center text-white text-xl font-bold\"><FaChartLine /></div>\r\n                <div>\r\n                  <h3 className=\"text-xl font-bold\">{(canonical.find(s => s.key === deepModal.systemKey) || {}).title} â€” Deep Dive</h3>\r\n                  <div className={`text-sm ${muted}`}>In-place analysis and recommendations for this system</div>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <button onClick={() => exportSystemJSON(deepModal.systemKey)} className=\"px-3 py-1 rounded-md border text-sm\" title=\"Export JSON\"><FaDownload className=\"inline mr-2\" />Export</button>\r\n                <button onClick={() => printDeep(deepModal.systemKey)} className=\"px-3 py-1 rounded-md border text-sm\">Print</button>\r\n                <button onClick={closeDeepModal} className=\"p-2 rounded-md text-gray-400\" aria-label=\"Close deep dive\"><FaTimes /></button>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"mt-4 space-y-5\">\r\n              <div className={`rounded-xl p-4 ${darkMode ? \"bg-gray-800 border border-gray-700\" : \"bg-gray-50 border border-gray-100\"}`}>\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div>\r\n                    <div className=\"text-xs text-gray-400\">Overall score</div>\r\n                    <div className={`text-3xl font-bold ${toneClassFor(workingScores[deepModal.systemKey])}`}>{workingScores[deepModal.systemKey] ?? \"â€”\"}%</div>\r\n                    <div className=\"text-xs text-gray-400 mt-1\">Current</div>\r\n                  </div>\r\n                  <div className=\"w-56\">\r\n                    <div className=\"text-xs text-gray-400 mb-2\">Recent history</div>\r\n                    <div style={{ height: 48 }}>\r\n                      <LiveBarsCanvas values={(historyRef.current[deepModal.systemKey] || []).slice(-36)} darkMode={darkMode} barCount={24} width={196} height={56} palette={palette} tooltipRef={tooltipControl} />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <h4 className=\"font-semibold\">External Signals</h4>\r\n                <div className=\"mt-2 space-y-2\">\r\n                  {(() => {\r\n                    const ext = (externalSignals || []).filter(x => x.systemKey === deepModal.systemKey);\r\n                    if (!ext || ext.length === 0) return <div className={`p-3 rounded-md ${darkMode ? \"bg-gray-800 border border-gray-700\" : \"bg-gray-50 border border-gray-100\"}`}>No external signals available</div>;\r\n                    return ext.map((e) => (\r\n                      <div key={e.id} className={`p-3 rounded-md ${darkMode ? \"bg-gray-800 border border-gray-700\" : \"bg-gray-50 border border-gray-100\"}`}>\r\n                        <div className=\"flex items-center justify-between\">\r\n                          <div>\r\n                            <div className=\"font-medium\">{e.type} â€¢ {e.source}</div>\r\n                            <div className=\"text-sm text-gray-500 mt-1\">{e.description}</div>\r\n                          </div>\r\n                          <div className=\"text-right\">\r\n                            <div className={`font-semibold ${e.value >= 75 ? \"text-red-500\" : e.value >= 55 ? \"text-yellow-500\" : \"text-green-500\"}`}>{e.value}</div>\r\n                            <div className=\"text-xs text-gray-400\">{e.importance}</div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ));\r\n                  })()}\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <h4 className=\"font-semibold\">Insights</h4>\r\n                <div className=\"mt-2 space-y-2\">\r\n                  {synthInsights(deepModal.systemKey).map((ins, i) => (\r\n                    <div key={i} className={`p-3 rounded-md ${darkMode ? \"bg-gray-800 border border-gray-700\" : \"bg-gray-50 border border-gray-100\"}`}>\r\n                      <div className=\"text-sm\">{ins}</div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <h4 className=\"font-semibold\">Forecasts</h4>\r\n                <div className=\"mt-2 grid grid-cols-1 sm:grid-cols-3 gap-2\">\r\n                  {synthForecasts(deepModal.systemKey).map((f, i) => (\r\n                    <div key={i} className={`p-3 rounded-md ${darkMode ? \"bg-gray-800 border border-gray-700\" : \"bg-gray-50 border border-gray-100\"}`}>\r\n                      <div className=\"font-medium\">{f.horizon}</div>\r\n                      <div className=\"text-sm text-gray-500 mt-1\">{f.text}</div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <div>\r\n                <h4 className=\"font-semibold\">Recommendations</h4>\r\n                <div className=\"mt-2 space-y-2\">\r\n                  {synthRecs(deepModal.systemKey).map((r, i) => (\r\n                    <div key={i} className={`p-3 rounded-md ${darkMode ? \"bg-blue-900/6 border border-blue-800\" : \"bg-blue-50 border border-blue-100\"}`}>\r\n                      <div className=\"font-medium\">{r.title}</div>\r\n                      <ul className=\"list-disc pl-5 mt-2 text-sm\">{r.items.map((it, j) => <li key={j}>{it}</li>)}</ul>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"flex flex-col sm:flex-row sm:justify-between items-start gap-2\">\r\n                <div className=\"text-xs text-gray-400\">Use Retake to begin a new assessment (assessment flow will open). Use the Assessments tab to include unassessed systems.</div>\r\n                <div className=\"flex items-center gap-2 mt-2 sm:mt-0\">\r\n                  <button onClick={() => { try { window.dispatchEvent(new CustomEvent(\"conseqx:assessment:start\", { detail: { systemId: deepModal.systemKey, orgId: effectiveOrgId } })); } catch {} navigate(`/ceo/assessments?focus=${encodeURIComponent(deepModal.systemKey)}`); }} className=\"px-3 py-2 rounded-md border text-sm\">Retake</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Tooltip overlay */}\r\n      <div style={{ position: \"fixed\", left: 0, top: 0, pointerEvents: \"none\", zIndex: 80 }}>\r\n        <Tooltip ref={tooltipControl} darkMode={darkMode} />\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n","/**\r\n * Canonical Systems for C-Suite Partner Dashboard\r\n * \r\n * Defines the six core systems that form the assessment framework,\r\n * display metadata, and legacy key mapping for backwards compatibility.\r\n */\r\n\r\n// Six canonical systems with display metadata\r\nexport const CANONICAL_SYSTEMS = [\r\n  {\r\n    key: 'interdependency',\r\n    title: 'Interdependency',\r\n    description: 'Cross-functional collaboration and dependency management',\r\n    icon: 'ðŸ”—',\r\n    color: '#3B82F6', // blue-500\r\n    order: 1\r\n  },\r\n  {\r\n    key: 'iteration',\r\n    title: 'Iteration',\r\n    description: 'Development cycles, sprint planning, and continuous improvement',\r\n    icon: 'ï¿½',\r\n    color: '#10B981', // emerald-500\r\n    order: 2\r\n  },\r\n  {\r\n    key: 'investigation',\r\n    title: 'Investigation',\r\n    description: 'Data analysis, research, and discovery processes',\r\n    icon: 'ï¿½',\r\n    color: '#F59E0B', // amber-500\r\n    order: 3\r\n  },\r\n  {\r\n    key: 'interpretation',\r\n    title: 'Interpretation',\r\n    description: 'Insight generation, decision-making, and strategic analysis',\r\n    icon: 'ðŸ’¡',\r\n    color: '#8B5CF6', // violet-500\r\n    order: 4\r\n  },\r\n  {\r\n    key: 'illustration',\r\n    title: 'Illustration',\r\n    description: 'Communication, visualization, and knowledge sharing',\r\n    icon: 'ï¿½',\r\n    color: '#EF4444', // red-500\r\n    order: 5\r\n  },\r\n  {\r\n    key: 'alignment',\r\n    title: 'Alignment',\r\n    description: 'Strategic coordination, goal setting, and organizational coherence',\r\n    icon: 'ðŸŽ¯',\r\n    color: '#06B6D4', // cyan-500\r\n    order: 6\r\n  }\r\n];\r\n\r\n// Legacy system keys mapping to canonical keys for backwards compatibility\r\n// TODO: Remove legacy mappings after migration period (6 months)\r\nexport const LEGACY_TO_CANONICAL = {\r\n  // Legacy keys that need normalization\r\n  'orchestration': 'alignment',\r\n  'inlignment': 'alignment', // typo in legacy data\r\n  'alignment': 'alignment',\r\n  \r\n  // Ensure canonical keys map to themselves\r\n  'interdependency': 'interdependency',\r\n  'iteration': 'iteration',\r\n  'investigation': 'investigation',\r\n  'interpretation': 'interpretation',\r\n  'illustration': 'illustration',\r\n  \r\n  // Additional legacy variations that might exist\r\n  'dependency': 'interdependency',\r\n  'dependencies': 'interdependency',\r\n  'analysis': 'investigation',\r\n  'research': 'investigation',\r\n  'insights': 'interpretation',\r\n  'reporting': 'illustration',\r\n  'visualization': 'illustration',\r\n  'coordination': 'alignment',\r\n  'strategy': 'alignment'\r\n};\r\n\r\n/**\r\n * Normalize a system key from legacy format to canonical format\r\n * @param {string} systemKey - Raw system key (possibly legacy)\r\n * @returns {string} Canonical system key\r\n */\r\nexport function normalizeSystemKey(systemKey) {\r\n  if (!systemKey || typeof systemKey !== 'string') {\r\n    return 'investigation'; // Default fallback\r\n  }\r\n  \r\n  const normalized = systemKey.toLowerCase().trim();\r\n  return LEGACY_TO_CANONICAL[normalized] || normalized;\r\n}\r\n\r\n/**\r\n * Get system metadata by canonical key\r\n * @param {string} systemKey - Canonical system key\r\n * @returns {object|null} System metadata or null if not found\r\n */\r\nexport function getSystemMetadata(systemKey) {\r\n  const canonical = normalizeSystemKey(systemKey);\r\n  return CANONICAL_SYSTEMS.find(s => s.key === canonical) || null;\r\n}\r\n\r\n/**\r\n * Get all systems formatted for UI display (sorted by order)\r\n * @returns {Array} Systems with UI metadata\r\n */\r\nexport function getSystemsForUI() {\r\n  return CANONICAL_SYSTEMS\r\n    .sort((a, b) => a.order - b.order)\r\n    .map(system => ({\r\n      id: system.key,\r\n      key: system.key,\r\n      title: system.title,\r\n      description: system.description,\r\n      icon: system.icon,\r\n      color: system.color\r\n    }));\r\n}\r\n\r\n/**\r\n * Validate if a system key is canonical\r\n * @param {string} systemKey - System key to validate\r\n * @returns {boolean} True if canonical, false otherwise\r\n */\r\nexport function isCanonicalSystem(systemKey) {\r\n  return CANONICAL_SYSTEMS.some(s => s.key === systemKey);\r\n}\r\n\r\n// Default system weights for org health calculation\r\n// TODO: Make these configurable per organization\r\nexport const DEFAULT_SYSTEM_WEIGHTS = {\r\n  'interdependency': 0.18,\r\n  'iteration': 0.20,\r\n  'investigation': 0.16,\r\n  'interpretation': 0.18,\r\n  'illustration': 0.14,\r\n  'alignment': 0.14\r\n};\r\n\r\n// Ensure weights sum to 1.0\r\nconst weightSum = Object.values(DEFAULT_SYSTEM_WEIGHTS).reduce((sum, w) => sum + w, 0);\r\nif (Math.abs(weightSum - 1.0) > 0.001) {\r\n  console.warn(`[systems.js] System weights sum to ${weightSum.toFixed(3)}, should be 1.0`);\r\n}\r\n\r\n// Organizational Health Framework Metadata\r\n// This positions our tool as an \"organizational doctor\" that provides\r\n// automated diagnosis beyond what ERP/BI platforms offer\r\nexport const FRAMEWORK_METADATA = {\r\n  name: 'ConseQ-X Organizational Health Assessment',\r\n  version: '1.0',\r\n  description: 'Automated organizational health analysis across six holistic systems',\r\n  differentiators: [\r\n    'Holistic organizational diagnosis beyond operational metrics',\r\n    'Automated analysis and recommendations vs manual BI configuration', \r\n    'Predictive and prescriptive insights vs descriptive reporting',\r\n    'Cultural and behavioral factors integrated with operational data',\r\n    'Purpose-built for organizational effectiveness vs generic analytics'\r\n  ],\r\n  targetGap: 'Bridges the space between operational ERP/BI data and strategic consulting insights',\r\n  useCases: [\r\n    'Post-merger integration assessment',\r\n    'Organizational transformation tracking',\r\n    'Performance turnaround monitoring',\r\n    'Continuous health monitoring for SMEs',\r\n    'Government agency effectiveness measurement'\r\n  ]\r\n};\r\n\r\n// Value proposition vs traditional platforms\r\nexport const COMPETITIVE_ADVANTAGES = {\r\n  vsERP: [\r\n    'Analyzes intangible dynamics like culture and collaboration',\r\n    'Provides narrative insights beyond transactional data',\r\n    'Ready-made organizational health model vs complex customization'\r\n  ],\r\n  vsBI: [\r\n    'Purpose-built framework vs empty canvas requiring expertise',\r\n    'Automated interpretation and recommendations vs manual analysis',\r\n    'Integrated organizational model vs piecemeal dashboard building'\r\n  ],\r\n  vsConsulting: [\r\n    'Continuous monitoring vs one-off assessments',\r\n    'Affordable software vs expensive consulting engagements',\r\n    'Real-time insights vs periodic reports'\r\n  ]\r\n};\r\n"],"names":["toneClassFor","pct","formatTime","ts","Date","toLocaleTimeString","_unused","STORAGE_UPLOADS","STORAGE_ASSESS","STORAGE_SCENARIOS","readUploads","raw","localStorage","getItem","JSON","parse","_unused2","readAssessmentsForOrg","orgId","arguments","length","undefined","_unused3","readSavedScenarios","_unused4","writeSavedScenarios","list","setItem","stringify","_unused5","generateSignals","canonical","now","map","s","i","base","Array","from","String","key","reduce","acc","ch","charCodeAt","wobble","Math","round","sin","value","max","min","id","concat","floor","systemKey","type","importance","description","title","timestamp","source","correlate","systemScore","impactLevel","expectedDelta","reason","importanceFactor","diff","abs","signal","LiveBarsCanvas","_ref","values","darkMode","width","height","barCount","palette","tooltipRef","canvasRef","useRef","rafRef","devicePixelRatioRef","window","devicePixelRatio","displayRef","slice","current","useEffect","cvs","ctx","getContext","dpr","style","setTransform","running","requestAnimationFrame","drawFrame","tail","target","v","Number","a","b","clearRect","fillStyle","fillRect","spacing","barW","padX","maxBarH","realVals","filter","l2","trend","gradTop","gradMid","gradBot","val","h","x","y","g","createLinearGradient","addColorStop","radius","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","fill","cancelAnimationFrame","addEventListener","onMove","onLeave","passive","removeEventListener","getPointerX","e","touches","clientX","getPointerY","clientY","rect","getBoundingClientRect","left","index","show","pageX","pageY","hide","_jsx","ref","borderRadius","Tooltip","React","_ref2","state","setState","useState","visible","top","vw","innerWidth","vh","innerHeight","_objectSpread","bg","border","text","_jsxs","role","position","zIndex","pointerEvents","minWidth","maxWidth","padding","boxShadow","background","color","fontSize","lineHeight","children","fontWeight","marginBottom","opacity","PartnerDashboardAuto","_ref3","_workingScores$deepMo","propOrgId","org","useOutletContext","navigate","useNavigate","effectiveOrgId","useMemo","isArray","CANONICAL_SYSTEMS","normalizeSystemKey","system","toLowerCase","label","desc","blurb","uploads","setUploads","assessments","setAssessments","refresh","assessedKeys","keys","Set","forEach","_a$meta","systemId","meta","k","add","latest","analyzedSystems","workingScores","setWorkingScores","o","sum","seedForKey","historyRef","deltas","setDeltas","whatIfOpen","setWhatIfOpen","setWhatIfVal","has","d","clearWhatIf","n","previewScores","p","Object","compositePreview","vals","c","alerts","setAlerts","autoOn","setAutoOn","intervalRef","externalSignals","setExternalSignals","deepModal","setDeepModal","open","setPalette","tooltipControl","scenarioOpen","setScenarioOpen","scenarioName","setScenarioName","savedScenarios","setSavedScenarios","editingScenarioId","setEditingScenarioId","composite","extInt","pollExternal","sigs","dispatchEvent","CustomEvent","detail","signals","setInterval","clearInterval","tick","prev","next","delta","random","prevScoresRef","openDeepModal","closeDeepModal","synthInsights","_workingScores$system2","cur","ext","corr","push","toUpperCase","startAssessmentFor","encodeURIComponent","openScenarioPanel","closeScenarioPanel","createScenarioObject","name","entries","toLocaleString","createdAt","items","applyCurrentPreviewScenario","sc","it","level","newAlerts","suggestedAction","action","sig","_workingScores$sKey","sKey","isAssessed","find","byKey","Map","set","sort","A","B","score","high","medium","low","info","evaluateAlerts","modalBg","modalText","muted","className","onClick","onChange","FaPause","FaPlay","_workingScores$s$key","_previewScores$s$key","live","preview","hist","_Fragment","onClickCapture","stopPropagation","step","appliedAt","_unused6","applyWhatIfToWorking","FaBolt","ackAlert","alertId","backgroundColor","FaTimes","placeholder","unshift","saveScenario","loadScenarioToPreview","applyScenarioToWorking","deleteScenario","FaChartLine","payload","history","external","exportedAt","blob","Blob","url","URL","createObjectURL","document","createElement","href","download","body","appendChild","click","remove","setTimeout","revokeObjectURL","exportSystemJSON","FaDownload","_previewScores$system","_workingScores$system","sys","content","join","w","write","close","focus","printDeep","ins","horizon","f","r","j","_unused7","icon","order","LEGACY_TO_CANONICAL","normalized","trim","getSystemsForUI","weightSum","console","warn","toFixed"],"sourceRoot":""}