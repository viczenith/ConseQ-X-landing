"use strict";(self.webpackChunkceo_assessment_app=self.webpackChunkceo_assessment_app||[]).push([[961],{43961:(e,t,r)=>{r.r(t),r.d(t,{default:()=>b});var a=r(89379),s=r(65043),n=r(23721),i=r(13204),d=r(55255);const o="conseqx_notifications_outbox_v1";function l(){try{const e=localStorage.getItem(o);return e?JSON.parse(e):[]}catch(e){return[]}}function c(e){try{localStorage.setItem(o,JSON.stringify(e))}catch(t){}}const x={sendEmail:function(e){let{to:t,subject:r,body:a}=e;const s=l();s.unshift({id:"O-".concat(Date.now().toString(36)),channel:"email",to:t,subject:r,body:a,ts:Date.now()}),c(s);try{window.dispatchEvent(new CustomEvent("conseqx:notifications:outbox",{detail:{channel:"email",to:t,subject:r}}))}catch(n){}return Promise.resolve({ok:!0})},sendSMS:function(e){let{to:t,body:r}=e;const a=l();a.unshift({id:"O-".concat(Date.now().toString(36)),channel:"sms",to:t,body:r,ts:Date.now()}),c(a);try{window.dispatchEvent(new CustomEvent("conseqx:notifications:outbox",{detail:{channel:"sms",to:t}}))}catch(s){}return Promise.resolve({ok:!0})},listOutbox:function(){return l()}};var m=r(70579);const g="conseqx_uploads_v1",y=["docx","pdf","xlsx","xls","png","jpg","jpeg","gif","zip","pptx","ppt"],p="conseqx_reports_reminders_v3";function u(e){try{const t=(e||[]).map(e=>{const t=(0,a.A)({},e);try{delete t.objectUrl}catch(r){}return t});localStorage.setItem(g,JSON.stringify(t))}catch(t){}}function h(e){const t=e.split(/\r?\n/).filter(Boolean);if(0===t.length)return[];const r=t[0].split(",").map(e=>e.trim());return t.slice(1).map(e=>{const t=e.split(","),a={};return r.forEach((e,r)=>a[e]=t[r]?t[r].trim():""),a})}function b(){const{org:e=null}=(0,n.KC)(),t=(null===e||void 0===e?void 0:e.id)||"anon",[o,l]=(0,s.useState)(()=>function(){try{const e=localStorage.getItem(g);return e?JSON.parse(e):[]}catch(e){return[]}}()),[c,p]=(0,s.useState)(!1),[b,j]=(0,s.useState)({open:!1,uploadId:null,name:""}),[w,k]=(0,s.useState)({open:!1,title:"",body:"",onConfirm:null}),[N,S]=(0,s.useState)(!1),[C,D]=(0,s.useState)(!1),[O,E]=(0,s.useState)(0),_=(0,s.useRef)(null),[L,A]=(0,s.useState)(()=>{if("undefined"===typeof window||"undefined"===typeof document)return!1;const e=document.documentElement.classList.contains("dark"),t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;return e||t});async function I(e){const a=e[0];if(!a)return;D(!0),E(8);const s=new FileReader;s.onload=async e=>{E(35);const s=e.target.result;let n=null;const i=(a.name||"").toLowerCase(),c=i.includes(".")?i.split(".").pop():"";if(y.includes(c)||a.type&&(a.type.startsWith("image/")||"application/pdf"===a.type))n={type:"binary",filename:a.name,size:a.size};else if("application/json"===a.type||a.name.endsWith(".json"))try{n=JSON.parse(s)}catch(g){n=null}else if(a.type.includes("csv")||a.name.endsWith(".csv")||a.name.endsWith(".txt"))try{const e=await r.e(766).then(r.t.bind(r,5766,23)).then(e=>e.default||e).catch(()=>null);if(e&&"function"===typeof e.parse){n=e.parse(s,{header:!0,skipEmptyLines:!0}).data}else n=h(s)}catch(g){n=h(s)}else if("xlsx"===c||"xls"===c)try{const e=await r.e(238).then(r.bind(r,11238)).then(e=>e.default||e).catch(()=>null);if(e&&"function"===typeof e.read){const t=e.read(s,{type:"binary"}),r=t.SheetNames[0],a=t.Sheets[r];n=e.utils.sheet_to_json(a,{defval:""})}else n={type:"binary",filename:a.name}}catch(g){n={type:"binary",filename:a.name}}else{const e=String(s||"").replace(/[^\x09\n\r \x20-\x7E]/g," ");n={type:"text",filename:a.name,previewText:e.substring(0,400)}}E(65);const x=n&&(Array.isArray(n)?n.length>0:Object.keys(n).length>0);const m={id:"U-".concat(Date.now().toString(36)),name:a.name,type:a.type||"unknown",timestamp:Date.now(),valid:Boolean(x),preview:Array.isArray(n)?n.slice(0,3):n,analyzedSystems:[],objectUrl:void 0};if(n&&"binary"===n.type)try{m.objectUrl=URL.createObjectURL(a)}catch(g){}setTimeout(()=>{E(100),D(!1),E(0);const e=function(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const t="".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:""," ").concat("string"===typeof e?e:JSON.stringify(e)).toLowerCase(),r=[];return[["interpretation",["finance","revenue","profit","financial","balance","income","expenses"]],["investigation",["survey","feedback","csat","comments","responses","sentiment","log","logs","data"]],["interdependency",["orgchart","org chart","organization chart","hierarchy","reporting"]],["iteration",["cycle","sprint","iteration","lead time","throughput"]],["alignment",["goal","kpi","objective","okr","alignment"]],["illustration",["process","flow","diagram","procedure","manual","presentation","ppt"]]].forEach(e=>{let[a,s]=e;for(const n of s)if(t.includes(n)){r.push(a);break}}),r.length?Array.from(new Set(r)):["investigation"]}(a.name,JSON.stringify(m.preview||""));m.analyzedSystems=e,l(e=>[m,...e]),e.forEach(async e=>{try{await d.Kk(t,e)}catch(g){try{console.warn("runAssessment failed:",g)}catch(r){}}});try{const e=o[0];if(e){const t="conseqx_upload_diffs_v1",r=localStorage.getItem(t),a=r?JSON.parse(r):[];a.unshift({id:"".concat(m.id,"-vs-").concat(e.id),left:m.id,right:e.id,ts:Date.now()}),localStorage.setItem(t,JSON.stringify(a))}}catch(g){}try{const e=e=>({id:"N-".concat(Date.now().toString(36)),uploadId:m.id,read:!1,title:e,body:"Analysis ready for ".concat(m.name),ts:Date.now(),type:"upload"});try{const t="conseqx_uploads_notifications_v1",r=localStorage.getItem(t),a=r?JSON.parse(r):[];a.unshift(e("Analysis ready: ".concat(m.name))),localStorage.setItem(t,JSON.stringify(a))}catch(g){}["conseqx_reports_notifications_v3","conseqx_reports_notifications_v1"].forEach(t=>{try{const r=localStorage.getItem(t),a=r?JSON.parse(r):[];a.unshift(e("Analysis ready: ".concat(m.name))),localStorage.setItem(t,JSON.stringify(a))}catch(g){}});try{window.dispatchEvent(new CustomEvent("conseqx:notifications:updated",{detail:{uploadId:m.id,name:m.name}}))}catch(g){}}catch(g){}},700+900*Math.random())},s.readAsText(a)}function J(e){l(t=>{const r=t.find(t=>t.id===e);if(r&&r.objectUrl)try{URL.revokeObjectURL(r.objectUrl)}catch(a){}return t.filter(t=>t.id!==e)})}function U(e){l(t=>{const r=t.find(t=>t.id===e);if(!r)return t;const s=t.filter(t=>t.id!==e);return[(0,a.A)((0,a.A)({},r),{},{timestamp:Date.now()}),...s]})}function R(e,t){try{const r=localStorage.getItem("conseqx_upload_diffs_v1"),a=r?JSON.parse(r):[],s=a.find(r=>r.id==="".concat(e,"-vs-").concat(t))||a.find(r=>r.left===e&&r.right===t);k({open:!0,title:"Compare uploads",body:s?"Comparison record created at ".concat(new Date(s.ts).toLocaleString()):"No precomputed diff available for these uploads.",onConfirm:null})}catch(r){k({open:!0,title:"Compare uploads",body:"Error reading diffs",onConfirm:null})}}return(0,s.useEffect)(()=>{if("undefined"===typeof window||"undefined"===typeof document)return;const e=new MutationObserver(()=>{A(document.documentElement.classList.contains("dark")||window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)});e.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]});const t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)"),r=()=>{A(document.documentElement.classList.contains("dark")||t&&t.matches)};return t&&("function"===typeof t.addEventListener?t.addEventListener("change",r):"function"===typeof t.addListener&&t.addListener(r)),()=>{e.disconnect(),t&&("function"===typeof t.removeEventListener?t.removeEventListener("change",r):"function"===typeof t.removeListener&&t.removeListener(r))}},[]),(0,s.useEffect)(()=>{u(o)},[o]),(0,s.useEffect)(()=>{function t(t){try{const r=(null===t||void 0===t?void 0:t.detail)||{};j({open:!0,uploadId:r.uploadId||null,name:r.name||"upload"});try{x.sendEmail({to:e&&e.email||"ceo@example.com",subject:"Analysis complete: ".concat(r.name),body:"Your upload ".concat(r.name," has completed processing.")})}catch(t){}}catch(r){}}return window.addEventListener("conseqx:notifications:updated",t),()=>window.removeEventListener("conseqx:notifications:updated",t)},[e]),(0,m.jsxs)("div",{className:"w-full",children:[(0,m.jsx)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2",children:(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:"Data Management"}),(0,m.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage uploads, validation and processing"})]})}),(0,m.jsxs)("div",{className:"mt-4 grid grid-cols-1 lg:grid-cols-12 gap-6",children:[(0,m.jsxs)("div",{className:"lg:col-span-5",children:[(0,m.jsxs)("div",{onDragOver:e=>{e.preventDefault(),S(!0)},onDragLeave:()=>S(!1),onDrop:function(e){e.preventDefault(),e.stopPropagation(),S(!1),I(e.dataTransfer.files)},className:"rounded-lg p-6 border-2 border-dashed transition-colors\n              ".concat(N?"border-blue-500 bg-blue-50/20 dark:bg-blue-900/20":"border-gray-200 bg-white dark:border-gray-700 dark:bg-gray-800"),children:[(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,m.jsxs)("div",{className:"flex items-center gap-3",children:[(0,m.jsx)(i.HVe,{className:"text-3xl text-gray-600 dark:text-gray-200"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Drag & drop files here"}),(0,m.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"CSV, JSON, TXT (PDFs as text) \u2014 files processed client-side and stored locally for analysis"})]})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsx)("button",{onClick:function(){_.current&&_.current.click()},className:"px-3 py-2 rounded-md bg-blue-600 text-white text-sm",children:"Choose file"}),(0,m.jsxs)("div",{className:"relative",children:[(0,m.jsx)("button",{onClick:()=>p(e=>!e),className:"px-3 py-2 rounded-md border text-sm bg-white dark:bg-gray-700 dark:text-gray-100 border-gray-300 dark:border-gray-600",children:"Download template"}),c&&(0,m.jsxs)("div",{className:"absolute right-0 mt-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded shadow p-2 w-56 z-40",children:[(0,m.jsx)("a",{href:"/sample-data/template-financials.csv",download:!0,className:"block px-2 py-1 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:"Financials template"}),(0,m.jsx)("a",{href:"/sample-data/template-survey.csv",download:!0,className:"block px-2 py-1 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 rounded",children:"Survey template"}),(0,m.jsx)("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Tip: open the CSV and fill rows before upload."})]})]}),(0,m.jsx)("button",{onClick:()=>{try{o.forEach(e=>{if(e&&e.objectUrl)try{URL.revokeObjectURL(e.objectUrl)}catch(t){}})}catch(e){}l([]),u([])},className:"px-3 py-2 rounded-md border text-sm bg-white dark:bg-gray-700 dark:text-gray-100 border-gray-300 dark:border-gray-600",children:"Clear history"})]})]}),(0,m.jsx)("input",{ref:_,type:"file",className:"hidden",onChange:e=>I(e.target.files)}),C&&(0,m.jsxs)("div",{className:"mt-4",children:[(0,m.jsx)("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Validation progress"}),(0,m.jsx)("div",{className:"w-full bg-gray-100 dark:bg-gray-700 rounded-full h-3 mt-2 overflow-hidden",children:(0,m.jsx)("div",{style:{width:"".concat(O,"%")},className:"h-full bg-yellow-500 transition-all"})})]})]}),(0,m.jsxs)("div",{className:"mt-6",children:[(0,m.jsx)("h3",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:"Reminder Scheduler"}),(0,m.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Set upload reminders. Reminders persist locally and appear under Reports \u2192 Reminders."}),(0,m.jsx)(f,{})]})]}),(0,m.jsxs)("div",{className:"lg:col-span-7",children:[(0,m.jsxs)("div",{className:"rounded-lg p-4 border bg-white dark:bg-gray-800 dark:border-gray-700",children:[(0,m.jsxs)("div",{className:"flex items-center justify-between",children:[(0,m.jsx)("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:"Upload history"}),(0,m.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[o.length," upload",1!==o.length?"s":""]})]}),(0,m.jsxs)("div",{className:"mt-3",children:[0===o.length&&(0,m.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No uploads yet. Upload a CSV or JSON to get started."}),o.length>0&&(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:"hidden sm:block overflow-x-auto mt-2",children:(0,m.jsxs)("table",{className:"w-full text-sm min-w-[700px]",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{className:"text-left text-xs text-gray-500 dark:text-gray-400",children:[(0,m.jsx)("th",{className:"py-2",children:"Timestamp"}),(0,m.jsx)("th",{className:"py-2",children:"File"}),(0,m.jsx)("th",{className:"py-2",children:"Valid"}),(0,m.jsx)("th",{className:"py-2",children:"Preview"}),(0,m.jsx)("th",{className:"py-2"})]})}),(0,m.jsx)("tbody",{children:o.map(e=>(0,m.jsxs)("tr",{className:"border-t align-top border-gray-200 dark:border-gray-700",children:[(0,m.jsx)("td",{className:"py-2 align-top text-xs text-gray-600 dark:text-gray-300",children:new Date(e.timestamp).toLocaleString()}),(0,m.jsx)("td",{className:"py-2 align-top font-medium text-gray-900 dark:text-gray-100",children:e.name}),(0,m.jsx)("td",{className:"py-2 align-top text-xs",children:e.valid?(0,m.jsx)("span",{className:"text-green-600",children:"Yes"}):(0,m.jsx)("span",{className:"text-red-600",children:"No"})}),(0,m.jsx)("td",{className:"py-2 align-top",children:e.preview&&"binary"===e.preview.type?(0,m.jsxs)("div",{className:"text-xs text-gray-800 dark:text-gray-200",children:[(0,m.jsx)("div",{className:"font-medium",children:e.preview.filename||e.name}),(0,m.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.preview.size?"".concat(e.preview.size," bytes"):"binary file"}),e.objectUrl?(0,m.jsx)("a",{className:"text-xs text-blue-600 dark:text-blue-400 underline mt-1 inline-block",href:e.objectUrl,download:e.name,children:"Download"}):(0,m.jsx)("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Download available while session is open"})]}):Array.isArray(e.preview)?(0,m.jsx)("div",{className:"max-h-40 overflow-auto bg-gray-50 dark:bg-gray-700/40 p-2 rounded text-xs",children:(0,m.jsxs)("table",{className:"w-full text-xs",children:[(0,m.jsx)("thead",{children:(0,m.jsx)("tr",{children:Object.keys(e.preview[0]||{}).slice(0,6).map(e=>(0,m.jsx)("th",{className:"text-left pr-2 text-gray-600 dark:text-gray-300",children:e},e))})}),(0,m.jsx)("tbody",{children:e.preview.slice(0,3).map((e,t)=>(0,m.jsx)("tr",{children:Object.values(e).slice(0,6).map((e,t)=>(0,m.jsx)("td",{className:"pr-2 align-top text-gray-800 dark:text-gray-200",children:String(e)},t))},t))})]})}):e.preview&&"text"===e.preview.type?(0,m.jsx)("div",{className:"max-h-40 overflow-auto break-words bg-gray-50 dark:bg-gray-700/40 p-2 rounded text-xs whitespace-pre-wrap text-gray-800 dark:text-gray-200",children:e.preview.previewText}):(0,m.jsx)("div",{className:"max-h-40 overflow-auto bg-gray-50 dark:bg-gray-700/40 p-2 rounded text-xs text-gray-800 dark:text-gray-200",children:(0,m.jsx)("pre",{className:"whitespace-pre-wrap",children:(()=>{try{const t="string"===typeof e.preview?e.preview:JSON.stringify(e.preview||{},null,2);return t.length>1e3?t.slice(0,1e3)+"\u2026":t}catch(t){return String(e.preview)}})()})})}),(0,m.jsx)("td",{className:"py-2 align-top text-right",children:(0,m.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,m.jsx)("button",{onClick:()=>{var t;return R(e.id,null===(t=o[0])||void 0===t?void 0:t.id)},className:"px-2 py-1 rounded-md text-xs border bg-white dark:bg-gray-700 dark:text-gray-100 border-gray-300 dark:border-gray-600",children:"Compare"}),(0,m.jsx)("button",{onClick:()=>U(e.id),className:"px-2 py-1 rounded-md text-xs border bg-white dark:bg-gray-700 dark:text-gray-100 border-gray-300 dark:border-gray-600",children:"Revert"}),(0,m.jsxs)("button",{onClick:()=>J(e.id),className:"px-2 py-1 rounded-md text-xs border text-red-600 bg-white dark:bg-gray-700 dark:text-red-400 border-gray-300 dark:border-gray-600",children:[(0,m.jsx)(i.qbC,{className:"inline mr-1"}),"Remove"]})]})})]},e.id))})]})}),(0,m.jsx)("div",{className:"sm:hidden mt-2 space-y-3",children:o.map(e=>(0,m.jsxs)("div",{className:"border rounded p-3 bg-white dark:bg-gray-800 dark:border-gray-700",children:[(0,m.jsx)("div",{className:"flex items-start justify-between gap-2",children:(0,m.jsxs)("div",{className:"min-w-0",children:[(0,m.jsx)("div",{className:"font-medium truncate text-gray-900 dark:text-gray-100",children:e.name}),(0,m.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(e.timestamp).toLocaleString()}),(0,m.jsx)("div",{className:"text-xs mt-2",children:e.valid?(0,m.jsx)("span",{className:"text-green-600",children:"Valid"}):(0,m.jsx)("span",{className:"text-red-600",children:"Invalid"})})]})}),(0,m.jsx)("div",{className:"mt-2 text-xs text-gray-800 dark:text-gray-200",children:e.preview&&"binary"===e.preview.type?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"font-medium",children:e.preview.filename||e.name}),(0,m.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.preview.size?"".concat(e.preview.size," bytes"):"binary file"}),e.objectUrl?(0,m.jsx)("a",{href:e.objectUrl,download:e.name,className:"text-xs text-blue-600 dark:text-blue-400 underline",children:"Download"}):(0,m.jsx)("div",{className:"text-xs text-gray-400 dark:text-gray-500",children:"Download available while session open"})]}):Array.isArray(e.preview)?(0,m.jsx)("div",{className:"max-h-28 overflow-auto bg-gray-50 dark:bg-gray-700/40 p-2 rounded text-xs",children:(0,m.jsx)("pre",{className:"whitespace-pre-wrap text-gray-800 dark:text-gray-200",children:JSON.stringify(e.preview.slice(0,2),null,2)})}):e.preview&&"text"===e.preview.type?(0,m.jsx)("div",{className:"max-h-28 overflow-auto bg-gray-50 dark:bg-gray-700/40 p-2 rounded text-xs whitespace-pre-wrap text-gray-800 dark:text-gray-200",children:e.preview.previewText}):(0,m.jsx)("div",{className:"max-h-28 overflow-auto bg-gray-50 dark:bg-gray-700/40 p-2 rounded text-xs text-gray-800 dark:text-gray-200",children:(0,m.jsx)("pre",{className:"whitespace-pre-wrap",children:(()=>{try{const t="string"===typeof e.preview?e.preview:JSON.stringify(e.preview||{},null,2);return t.length>500?t.slice(0,500)+"\u2026":t}catch(t){return String(e.preview)}})()})})}),(0,m.jsxs)("div",{className:"mt-3 flex items-center justify-end gap-2",children:[(0,m.jsx)("button",{onClick:()=>{var t;return R(e.id,null===(t=o[0])||void 0===t?void 0:t.id)},className:"px-2 py-1 rounded-md text-xs border bg-white dark:bg-gray-700 dark:text-gray-100 border-gray-300 dark:border-gray-600",children:"Compare"}),(0,m.jsx)("button",{onClick:()=>U(e.id),className:"px-2 py-1 rounded-md text-xs border bg-white dark:bg-gray-700 dark:text-gray-100 border-gray-300 dark:border-gray-600",children:"Revert"}),(0,m.jsxs)("button",{onClick:()=>J(e.id),className:"px-2 py-1 rounded-md text-xs border text-red-600 bg-white dark:bg-gray-700 dark:text-red-400 border-gray-300 dark:border-gray-600",children:[(0,m.jsx)(i.qbC,{className:"inline mr-1"}),"Remove"]})]})]},e.id))})]})]})]}),(0,m.jsxs)(v,{open:b.open,title:b.name?"Analysis complete":"Analysis ready",onClose:()=>j({open:!1,uploadId:null,name:""}),children:[(0,m.jsxs)("div",{className:"text-sm text-gray-800 dark:text-gray-200",children:["Analysis for ",(0,m.jsx)("strong",{children:b.name})," is complete. Would you like to view the latest upload?"]}),(0,m.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,m.jsx)("button",{onClick:()=>j({open:!1,uploadId:null,name:""}),className:"px-3 py-1 border rounded bg-white dark:bg-gray-700 dark:text-gray-100 border-gray-300 dark:border-gray-600",children:"Later"}),(0,m.jsx)("button",{onClick:()=>{const e=document.querySelector("[data-upload-history]");e&&e.scrollIntoView({behavior:"smooth",block:"start"}),j({open:!1,uploadId:null,name:""})},className:"px-3 py-1 bg-blue-600 text-white rounded",children:"View"})]})]}),(0,m.jsxs)(v,{open:w.open,title:w.title,onClose:()=>k({open:!1,title:"",body:"",onConfirm:null}),children:[(0,m.jsx)("div",{className:"text-sm text-gray-700 dark:text-gray-200",children:w.body}),(0,m.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,m.jsx)("button",{onClick:()=>k({open:!1,title:"",body:"",onConfirm:null}),className:"px-3 py-1 border rounded bg-white dark:bg-gray-700 dark:text-gray-100 border-gray-300 dark:border-gray-600",children:"Close"}),w.onConfirm&&(0,m.jsx)("button",{onClick:()=>{w.onConfirm(),k({open:!1,title:"",body:"",onConfirm:null})},className:"px-3 py-1 bg-red-600 text-white rounded",children:"Confirm"})]})]})]})]})]})}function f(){const[e,t]=(0,s.useState)(()=>function(){try{const e=localStorage.getItem(p);return e?JSON.parse(e):[]}catch(e){return[]}}()),[r,n]=(0,s.useState)(""),[i,d]=(0,s.useState)(()=>{const e=new Date;return e.setDate(e.getDate()+1),e.setHours(9,0,0,0),e.toISOString().slice(0,16)});(0,s.useEffect)(()=>function(e){try{localStorage.setItem(p,JSON.stringify(e))}catch(t){}}(e),[e]);const[o,l]=(0,s.useState)({open:!1,title:"",body:"",onConfirm:null});const c=e.filter(e=>!e.done).length;return(0,m.jsxs)("div",{className:"mt-3",children:[(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-2",children:[(0,m.jsx)("input",{value:r,onChange:e=>n(e.target.value),placeholder:"Reminder title",className:"flex-1 px-2 py-1 border rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-600"}),(0,m.jsx)("input",{type:"datetime-local",value:i,onChange:e=>d(e.target.value),className:"px-2 py-1 border rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 border-gray-300 dark:border-gray-600"}),(0,m.jsx)("button",{onClick:function(){if(!r)return void l({open:!0,title:"Validation",body:"Enter a title for the reminder",onConfirm:null});const e={id:"rem-".concat(Date.now().toString(36)),title:r,when:new Date(i).toISOString(),createdAt:Date.now(),done:!1};t(t=>[e,...t]),n("")},className:"px-3 py-1 bg-blue-600 text-white rounded",children:"Add"})]}),(0,m.jsxs)("div",{className:"mt-3 text-sm text-gray-600 dark:text-gray-400",children:["Upcoming reminders: ",(0,m.jsx)("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:c})]}),(0,m.jsxs)("ul",{className:"mt-2 space-y-2",children:[0===e.length&&(0,m.jsx)("li",{className:"text-xs text-gray-500 dark:text-gray-400",children:"No reminders yet."}),e.map(e=>(0,m.jsxs)("li",{className:"flex items-center justify-between gap-2 p-2 border rounded bg-white dark:bg-gray-800 dark:border-gray-700",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:"font-medium text-sm text-gray-900 dark:text-gray-100",children:e.title}),(0,m.jsx)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:new Date(e.when).toLocaleString()})]}),(0,m.jsxs)("div",{className:"flex items-center gap-2",children:[(0,m.jsx)("button",{onClick:()=>{return r=e.id,void t(e=>e.map(e=>e.id===r?(0,a.A)((0,a.A)({},e),{},{done:!e.done}):e));var r},className:"px-2 py-1 rounded text-xs ".concat(e.done?"bg-green-100 text-green-700 dark:bg-green-900/20 dark:text-green-300":"bg-gray-100 dark:bg-gray-700 dark:text-gray-100"),children:e.done?"Done":"Mark done"}),(0,m.jsx)("button",{onClick:()=>{return r=e.id,void l({open:!0,title:"Delete reminder",body:"Are you sure you want to delete this reminder?",onConfirm:()=>{t(e=>e.filter(e=>e.id!==r)),l({open:!1,title:"",body:"",onConfirm:null})}});var r},className:"px-2 py-1 text-xs border rounded text-red-600 bg-white dark:bg-gray-700 dark:text-red-400 border-gray-300 dark:border-gray-600",children:"Delete"})]})]},e.id))]}),(0,m.jsxs)(v,{open:o.open,title:o.title,onClose:()=>l({open:!1,title:"",body:"",onConfirm:null}),children:[(0,m.jsx)("div",{className:"text-sm text-gray-700 dark:text-gray-200",children:o.body}),(0,m.jsxs)("div",{className:"mt-4 flex justify-end gap-2",children:[(0,m.jsx)("button",{onClick:()=>l({open:!1,title:"",body:"",onConfirm:null}),className:"px-3 py-1 border rounded bg-white dark:bg-gray-700 dark:text-gray-100 border-gray-300 dark:border-gray-600",children:"Cancel"}),o.onConfirm&&(0,m.jsx)("button",{onClick:o.onConfirm,className:"px-3 py-1 bg-red-600 text-white rounded",children:"Delete"})]})]})]})}function v(e){let{open:t,title:r,children:a,onClose:s}=e;return t?(0,m.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,m.jsx)("div",{className:"absolute inset-0 bg-black opacity-40",onClick:s}),(0,m.jsxs)("div",{className:"relative z-10 w-full max-w-md bg-white dark:bg-gray-900 rounded-2xl p-5 shadow-2xl border dark:border-gray-700",children:[(0,m.jsxs)("div",{className:"flex items-start justify-between",children:[(0,m.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:r}),(0,m.jsx)("button",{onClick:s,className:"text-gray-500 dark:text-gray-300",children:"\u2715"})]}),(0,m.jsx)("div",{className:"mt-3",children:a})]})]}):null}}}]);
//# sourceMappingURL=961.c1257ea9.chunk.js.map