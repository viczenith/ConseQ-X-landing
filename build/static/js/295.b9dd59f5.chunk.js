"use strict";(self.webpackChunkceo_assessment_app=self.webpackChunkceo_assessment_app||[]).push([[295],{4295:(e,s,t)=>{t.r(s),t.d(s,{default:()=>h});var a=t(65043),n=t(23721),l=t(35016),o=t(55255),r=t(41962),c=t(59570),d=t(70579);const i="conseqx_uploads_v1";function m(e){let{title:s,value:t,hint:a,darkMode:n}=e;return(0,d.jsxs)("div",{className:"rounded-lg p-4 border ".concat(n?"bg-gray-900 border-gray-700 text-gray-100":"bg-white border-gray-200 text-gray-900"),children:[(0,d.jsx)("div",{className:"text-xs uppercase ".concat(n?"text-gray-400":"text-gray-500"," mb-2"),children:s}),(0,d.jsx)("div",{className:"text-2xl font-semibold",children:t}),a&&(0,d.jsx)("div",{className:"".concat(n?"text-gray-400":"text-gray-500"," text-xs mt-1"),children:a})]})}function x(e){let{pct:s=0,darkMode:t=!1}=e;const a=Math.max(0,Math.min(100,Math.round(s||0)));return(0,d.jsx)("div",{className:"w-full",children:(0,d.jsx)("div",{className:"w-full h-2 rounded-full ".concat(t?"bg-gray-700":"bg-gray-200"),children:(0,d.jsx)("div",{style:{width:"".concat(a,"%")},className:"h-full rounded-full bg-blue-500 transition-all duration-500"})})})}function h(){var e,s,t;const{darkMode:h,org:g}=(0,n.KC)(),u=(0,l.A)(),v=(0,n.Zp)(),[y,b]=a.useState(null),[j,f]=a.useState(null),[p,N]=a.useState({}),[w,k]=a.useState(!1),[S,C]=a.useState(null),[E,D]=a.useState(Date.now());a.useEffect(()=>{var e;let s=!0;return(null!==u&&void 0!==u&&null!==(e=u.org)&&void 0!==e&&e.id||null!==g&&void 0!==g&&g.id)&&(async()=>{try{var e;const t=await o.Zx((null===u||void 0===u||null===(e=u.org)||void 0===e?void 0:e.id)||(null===g||void 0===g?void 0:g.id));s&&b(t)}catch(t){s&&b(null)}})(),()=>{s=!1}},[null===u||void 0===u||null===(e=u.org)||void 0===e?void 0:e.id,null===g||void 0===g?void 0:g.id]),a.useEffect(()=>{function e(){try{var e;const s=localStorage.getItem(i),t=s?JSON.parse(s):[],a=t&&t.length?t[0]:null;f(a);const n=localStorage.getItem("conseqx_assessments_v1"),l=n?JSON.parse(n):{},o=(null===u||void 0===u||null===(e=u.org)||void 0===e?void 0:e.id)||(null===g||void 0===g?void 0:g.id)||"anon",c=l[o]||[];console.log("\ud83c\udfe0 DashboardHome: Loading assessments for org ".concat(o,":"),c);const d={};c.forEach(e=>{const s=(0,r.Os)(e.systemId||e.system||e.systemKey||"");s&&(!d[s]||(e.timestamp||0)>(d[s].timestamp||0))&&(d[s]=e)}),console.log("\ud83c\udfe0 DashboardHome: Processed assessments by system:",d);const m={};r.CO.forEach(e=>{const s=e.key,t=d[s];t&&"number"===typeof t.score&&null!==t.score?(m[s]=Math.max(0,Math.min(100,Math.round(t.score))),console.log("\ud83c\udfe0 DashboardHome: System ".concat(s," has assessment score: ").concat(m[s],"%"))):a&&Array.isArray(a.analyzedSystems)&&a.analyzedSystems.includes(s)?(m[s]=70,console.log("\ud83c\udfe0 DashboardHome: System ".concat(s," has upload heuristic score: 70%"))):(m[s]=null,console.log("\ud83c\udfe0 DashboardHome: System ".concat(s," not assessed")))}),console.log("\ud83c\udfe0 DashboardHome: Final system scores:",m),N(m)}catch(s){console.error("\ud83c\udfe0 DashboardHome: Error loading assessment data:",s),f(null),N({})}}function s(s){s.key&&s.key!==i&&"conseqx_assessments_v1"!==s.key||(console.log("\ud83c\udfe0 DashboardHome: Storage change detected for key: ".concat(s.key)),e())}function t(s){console.log("\ud83c\udfe0 DashboardHome: Assessment completed event:",s.detail),D(Date.now()),setTimeout(e,100)}function a(s){console.log("\ud83c\udfe0 DashboardHome: Assessment update event:",s.detail),D(Date.now()),setTimeout(e,100)}let n;e(),window.addEventListener("storage",s),window.addEventListener("conseqx:assessment:completed",t),window.addEventListener("conseqx:assessment:update",a);try{"BroadcastChannel"in window&&(n=new BroadcastChannel("conseqx_assessments"),n.addEventListener("message",s=>{var t,a;console.log("\ud83c\udfe0 DashboardHome: BroadcastChannel message:",s.data),"assessments:update"!==(null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.type)&&"assessment:completed"!==(null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.type)||e()}))}catch(o){console.warn("\ud83c\udfe0 DashboardHome: BroadcastChannel not available:",o)}const l=setInterval(e,2e3);return()=>{window.removeEventListener("storage",s),window.removeEventListener("conseqx:assessment:completed",t),window.removeEventListener("conseqx:assessment:update",a),n&&n.close(),clearInterval(l)}},[null===u||void 0===u||null===(s=u.org)||void 0===s?void 0:s.id,null===g||void 0===g?void 0:g.id,E]);const M=a.useMemo(()=>{const e=Object.values(p||{}).filter(e=>null!==e&&"undefined"!==typeof e);if(!e.length)return 0;const s=e.reduce((e,s)=>e+(Number(s)||0),0);return Math.round(s/e.length)},[p]);function A(e){try{var s;window.dispatchEvent(new CustomEvent("conseqx:assessment:start",{detail:{systemId:e,orgId:(null===u||void 0===u||null===(s=u.org)||void 0===s?void 0:s.id)||(null===g||void 0===g?void 0:g.id)}}))}catch(t){}v("/ceo/assessments?focus=".concat(encodeURIComponent(e)))}return(0,d.jsxs)("section",{children:[(0,d.jsxs)("div",{className:"mb-6",children:[(0,d.jsx)("h1",{className:"text-2xl font-semibold ".concat(h?"text-gray-100":"text-gray-900"),children:"Dashboard Home"}),(0,d.jsxs)("div",{className:"text-sm ".concat(h?"text-gray-400":"text-gray-600"," mt-1"),children:[(0,d.jsx)("span",{className:"text-blue-600",children:(null===u||void 0===u||null===(t=u.org)||void 0===t?void 0:t.name)||"ConseQ-X"})," Workspace"]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,d.jsx)(m,{title:"Revenue (TTM)",value:"\u20a6120M",darkMode:h}),(0,d.jsx)(m,{title:"EBITDA Margin",value:"18%",darkMode:h}),(0,d.jsx)(m,{title:"Team Performance",value:"87%",darkMode:h}),(0,d.jsx)(m,{title:"System Health",value:"".concat(M,"%"),darkMode:h})]}),(0,d.jsxs)("div",{className:"rounded-lg p-4 border ".concat(h?"bg-gray-900 border-gray-700 text-gray-100":"bg-white border-gray-200 text-gray-900"),children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"".concat(h?"text-gray-100":"text-gray-900"," text-lg font-semibold"),children:"Executive Reports & Insights"}),(0,d.jsx)("p",{className:"mt-1 text-sm ".concat(h?"text-gray-400":"text-gray-600"),children:"Real-time organizational intelligence and strategic recommendations"})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3 rounded-lg px-3 py-2 ".concat(h?"bg-gray-800 border border-gray-700":"bg-white border border-gray-100"),children:[(0,d.jsxs)("div",{className:"flex flex-col",children:[(0,d.jsx)("span",{className:"text-xs text-gray-500",children:"Insights"}),(0,d.jsx)("span",{className:"text-lg font-bold text-blue-500",children:Object.values(p).filter(e=>null!==e).length})]}),(0,d.jsx)("div",{className:"h-8 w-px bg-gray-200 dark:bg-gray-700"}),(0,d.jsxs)("div",{className:"flex flex-col text-right",children:[(0,d.jsx)("span",{className:"text-xs text-gray-500",children:"Actions"}),(0,d.jsx)("span",{className:"text-lg font-bold text-blue-500",children:"3"})]})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 p-4 rounded-lg ".concat(h?"bg-gray-800/50":"bg-gray-50"),children:[(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"text-2xl font-bold ".concat(h?"text-green-400":"text-green-600"),children:Object.values(p).filter(e=>null!==e).length}),(0,d.jsx)("div",{className:"text-xs ".concat(h?"text-gray-400":"text-gray-600"),children:"Systems Assessed"})]}),(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"text-2xl font-bold ".concat(h?"text-yellow-400":"text-yellow-600"),children:6-Object.values(p).filter(e=>null!==e).length}),(0,d.jsx)("div",{className:"text-xs ".concat(h?"text-gray-400":"text-gray-600"),children:"Pending Assessment"})]}),(0,d.jsxs)("div",{className:"text-center",children:[(0,d.jsx)("div",{className:"text-2xl font-bold ".concat(h?"text-blue-400":"text-blue-600"),children:M>75?"Excellent":M>50?"Good":M>25?"Fair":"Needs Attention"}),(0,d.jsx)("div",{className:"text-xs ".concat(h?"text-gray-400":"text-gray-600"),children:"Health Rating"})]})]}),(0,d.jsxs)("div",{className:"mt-6",children:[(0,d.jsx)("h4",{className:"".concat(h?"text-gray-100":"text-gray-900"," font-semibold mb-3"),children:"Recent Activity"}),(0,d.jsxs)("div",{className:"space-y-2",children:[Object.entries(p).filter(e=>{let[s,t]=e;return null!==t}).slice(0,3).map(e=>{let[s,t]=e;const a=r.CO.find(e=>e.key===s);return(0,d.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg ".concat(h?"bg-gray-800/50":"bg-gray-50"),children:[(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"w-8 h-8 rounded bg-blue-600 text-white flex items-center justify-center text-sm",children:(null===a||void 0===a?void 0:a.icon)||"\ud83d\udccb"}),(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm font-medium ".concat(h?"text-gray-100":"text-gray-900"),children:(null===a||void 0===a?void 0:a.title)||s}),(0,d.jsx)("div",{className:"text-xs ".concat(h?"text-gray-400":"text-gray-600"),children:"Assessment completed"})]})]}),(0,d.jsxs)("div",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(t>=80?"bg-green-100 text-green-700":t>=60?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"),children:[t,"%"]})]},s)}),0===Object.values(p).filter(e=>null!==e).length&&(0,d.jsxs)("div",{className:"text-center py-8 ".concat(h?"text-gray-400":"text-gray-500"),children:[(0,d.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udccb"}),(0,d.jsx)("div",{className:"text-sm",children:"No assessments completed yet"}),(0,d.jsx)("button",{onClick:()=>v("/ceo/assessments"),className:"mt-2 text-blue-600 hover:text-blue-700 text-sm underline",children:"Start your first assessment"})]})]})]})]}),(0,d.jsx)(c.N,{children:w&&S&&(0,d.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,d.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>k(!1)}),(0,d.jsxs)("div",{className:"relative z-10 w-full max-w-2xl rounded-lg p-4 ".concat(h?"bg-gray-900 border border-gray-700 text-gray-100":"bg-white border border-gray-200 text-gray-900"," shadow-xl"),children:[(0,d.jsxs)("div",{className:"flex items-start justify-between",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-semibold",children:"The System of ".concat(S.title," \u2014 Report")}),(0,d.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:S.description})]}),(0,d.jsx)("button",{onClick:()=>k(!1),className:"text-gray-400",children:"\u2715"})]}),(0,d.jsx)("div",{className:"mt-4 space-y-4",children:null!==S.score?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-xs text-gray-400",children:"Score"}),(0,d.jsxs)("div",{className:"text-2xl font-bold mt-1",children:[S.score,"%"]}),(0,d.jsx)("div",{className:"mt-2",children:(0,d.jsx)(x,{pct:S.score,darkMode:h})})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-sm font-semibold",children:"X-Ultra Recommendations (preview)"}),(0,d.jsxs)("ul",{className:"mt-2 list-disc pl-5 text-sm text-gray-500",children:[(0,d.jsx)("li",{children:"Run a focused improvement sprint (2\u20134 weeks) with explicit owners."}),(0,d.jsx)("li",{children:"Establish weekly metrics to track progress on the top 3 pain points."}),(0,d.jsx)("li",{children:"Document a playbook for common cross-team handoffs to reduce friction."})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{className:"text-sm font-semibold",children:"African case example (short)"}),(0,d.jsx)("div",{className:"text-sm text-gray-500 mt-1",children:"Dangote-style central governance + local execution produced measurable delivery improvements when cross-unit orchestration improved."})]}),(0,d.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,d.jsx)("button",{onClick:()=>{!function(e){try{window.dispatchEvent(new CustomEvent("conseqx:orghealth:open",{detail:{systemId:e}}))}catch(s){}v("/ceo/org-health")}(S.systemKey),k(!1)},className:"px-3 py-2 rounded-md bg-gradient-to-r from-indigo-600 to-blue-600 text-white",children:"Open full report"}),(0,d.jsx)("button",{onClick:()=>{A(S.systemKey),k(!1)},title:"If your organization has changed since the last assessment, retake it to refresh recommendations and improve efficiency.",className:"px-3 py-2 rounded-md bg-indigo-600 text-white",children:"Retake assessment"})]})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("div",{className:"text-sm text-gray-400",children:"Assessment not taken"}),(0,d.jsx)("div",{className:"text-lg font-semibold mt-1",children:"Take your Organizational Health Assessment now"}),(0,d.jsx)("div",{className:"text-sm text-gray-500 mt-2",children:"We don't yet have data for this system. A short assessment (~10\u201320 minutes) will populate a full report with X-Ultra recommendations, forecasts and case studies."})]}),(0,d.jsxs)("div",{className:"flex gap-2 justify-end",children:[(0,d.jsx)("button",{onClick:()=>{A(S.systemKey),k(!1)},className:"px-3 py-2 rounded-md bg-gradient-to-r from-indigo-600 to-blue-600 text-white",children:"Start assessment"}),(0,d.jsx)("button",{onClick:()=>{k(!1),v("/ceo/org-health")},className:"px-3 py-2 rounded-md border",children:"Learn about this system"})]})]})})]})]})})]})}}}]);
//# sourceMappingURL=295.b9dd59f5.chunk.js.map