"use strict";(self.webpackChunkceo_assessment_app=self.webpackChunkceo_assessment_app||[]).push([[707],{48707:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var n=s(89379),r=s(65043),o=s(23721),i=s(55805),a=s(13204),l=s(70579);function d(){return String((arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")||"").toLowerCase().replace(/\s+/g,"").replace(/[_\-]/g,"").replace(/systemof|system/g,"").trim()}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"anon";try{const t=localStorage.getItem("conseqx_assessments_v1");return(t?JSON.parse(t):{})[e]||[]}catch(t){return[]}}function m(e,t){return null===e||void 0===e?t?"text-gray-400 bg-gray-800":"text-gray-500 bg-gray-50":e>=80?t?"text-green-300 bg-green-900/20":"text-green-700 bg-green-50":e>=60?t?"text-yellow-300 bg-yellow-900/20":"text-yellow-700 bg-yellow-50":t?"text-red-300 bg-red-900/20":"text-red-700 bg-red-50"}function u(e){const t=e=>{if(null===e||void 0===e)return"";const t=String(e).replace(/\r?\n|\r/g," ");return t.includes(",")||t.includes('"')?'"'.concat(t.replace(/"/g,'""'),'"'):t};return e.map(e=>e.map(t).join(",")).join("\n")}function g(e){let{open:t,onClose:s,title:n,children:r,footer:o,darkMode:i=!1}=e;return t?(0,l.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,l.jsx)("div",{className:"absolute inset-0",style:{backgroundColor:i?"rgba(2,6,23,0.6)":"rgba(0,0,0,0.45)"},onClick:s}),(0,l.jsxs)("div",{className:"relative z-10 w-full max-w-4xl mx-auto rounded-2xl p-4 sm:p-6 ".concat(i?"bg-gray-900 border border-gray-700 text-gray-100":"bg-white border border-gray-100 text-gray-900"," shadow-2xl"),role:"dialog","aria-modal":"true","aria-label":n,children:[(0,l.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold",children:n}),(0,l.jsx)("button",{onClick:s,"aria-label":"Close",className:"".concat(i?"text-gray-300":"text-gray-600"," ml-2"),children:"\u2715"})]}),(0,l.jsx)("div",{className:"mt-4 max-h-[70vh] overflow-auto hide-scrollbar",children:r}),o&&(0,l.jsx)("div",{className:"mt-5 flex flex-col sm:flex-row sm:justify-end gap-3",children:o})]})]}):null}function x(e){var t,s,x,h,v;let{orgId:y=null}=e;const{darkMode:p,org:b}=(0,o.KC)(),f=(0,o.Zp)(),j=y||(null===b||void 0===b?void 0:b.id)||"anon",[w,N]=(0,r.useState)([]),[k,S]=(0,r.useState)(!0),[I,C]=(0,r.useState)(!1),[M,E]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=!0;async function t(){S(!0);try{const t=i.h1?(0,i.h1)(j):null,s=t instanceof Promise?await t:t;let r=Array.isArray(s)?s:[];if(r&&0!==r.length)r=r.map(e=>(0,n.A)((0,n.A)({},e),{},{original:e.original||e}));else{const e=c(j);r=e&&e.length>0?e.map(e=>{var t;return{id:e.id,systemId:e.systemId||e.system||(null===(t=e.meta)||void 0===t?void 0:t.systemId)||"general",title:e.title||e.name||e.systemId||e.system,score:"number"===typeof e.score?e.score:e.score?Number(e.score):null,timestamp:e.timestamp||Date.now(),original:e}}):[]}e&&N(r||[])}catch(t){const s=c(j);e&&N(s||[])}finally{e&&S(!1)}}function s(){t()}t();try{window.addEventListener("conseqx:orghealth:completed",s),window.addEventListener("conseqx:assessments:updated",s),window.addEventListener("storage",s)}catch(r){}return()=>{e=!1;try{window.removeEventListener("conseqx:orghealth:completed",s),window.removeEventListener("conseqx:assessments:updated",s),window.removeEventListener("storage",s)}catch(t){}}},[j]);const D=(0,r.useMemo)(()=>[{id:"interdependency",label:"Interdependency",blurb:"How well teams integrate and hand-off work across boundaries."},{id:"iteration",label:"Iteration",blurb:"Pace of learning: experiments, feedback loops, and continuous improvement."},{id:"investigation",label:"Investigation",blurb:"Root-cause discovery and data-driven problem solving."},{id:"interpretation",label:"Interpretation",blurb:"How insights are turned into shared understanding and decisions."},{id:"illustration",label:"Illustration",blurb:"Clarity in process, playbooks, and operational visualizations."},{id:"inlignment",label:"Inlignment",blurb:"Strategic alignment \u2014 how goals, incentives, and execution line up."}],[]),O=(0,r.useMemo)(()=>{const e={};return(w||[]).forEach(t=>{var s,r,o,i;const a=d(t.systemId||t.system||(null===(s=t.original)||void 0===s?void 0:s.systemId)||(null===(r=t.original)||void 0===r?void 0:r.system)||(null===(o=t.original)||void 0===o||null===(i=o.meta)||void 0===i?void 0:i.systemId)||"general"),l=t.timestamp||t.ts||Date.now();(!e[a]||(e[a].timestamp||0)<l)&&(e[a]=(0,n.A)((0,n.A)({},t),{},{normalizedSystemId:a,timestamp:l}))}),e},[w]),L=(0,r.useMemo)(()=>D.map(e=>{var t,s,n,r,o,i,a,l,c,m;const u=d(e.id),g=O[u],x=g&&("number"===typeof g.score?g.score:g.score?Number(g.score):g.original&&"number"===typeof g.original.score?g.original.score:null),h=null!==(t=null!==(s=null===g||void 0===g||null===(n=g.original)||void 0===n?void 0:n.answered)&&void 0!==s?s:null===g||void 0===g||null===(r=g.original)||void 0===r||null===(o=r.meta)||void 0===o?void 0:o.answered)&&void 0!==t?t:null,v=null!==(i=null!==(a=null===g||void 0===g||null===(l=g.original)||void 0===l?void 0:l.total)&&void 0!==a?a:null===g||void 0===g||null===(c=g.original)||void 0===c||null===(m=c.meta)||void 0===m?void 0:m.total)&&void 0!==i?i:null,y=null!=h&&null!=v&&v>0?Math.round(h/v*100):null;return{id:u,label:e.label,blurb:e.blurb,score:null==x||Number.isNaN(x)?null:Math.round(x),result:g||null,answeredPct:y}}),[D,O]),R=(0,r.useMemo)(()=>{const e=L.map(e=>null===e.score||void 0===e.score?null:e.score).filter(e=>null!==e&&void 0!==e);return 0===e.length?null:Math.round(e.reduce((e,t)=>e+t,0)/e.length)},[L]),A=(0,r.useMemo)(()=>{if(!w||0===w.length)return[];const e={};w.forEach(t=>{const s=new Date(t.timestamp||Date.now());s.setHours(0,0,0,0);const n=s.getTime();e[n]||(e[n]=[]);const r="number"===typeof t.score?t.score:t.score?Number(t.score):null;null===r||void 0===r||Number.isNaN(r)||e[n].push(r)});return Object.keys(e).map(t=>({t:Number(t),avg:Math.round(e[t].reduce((e,t)=>e+t,0)/e[t].length)})).sort((e,t)=>e.t-t.t).slice(-12).map(e=>e.avg)},[w]);function z(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{var t;const s=e||(w||[]),n=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),r=URL.createObjectURL(n),o=document.createElement("a");o.href=r,o.download="".concat(e?(null===(t=e.original)||void 0===t?void 0:t.title)||e.id||"system":b&&b.name||j,"_orghealth.json"),document.body.appendChild(o),o.click(),o.remove(),setTimeout(()=>URL.revokeObjectURL(r),2e3)}catch(s){alert("Export failed")}}function P(){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{if(e){var t,s,n,r,o,i;const a=e,l=u([["system","score","timestamp","title","notes"],[a.normalizedSystemId||a.systemId||"",null!==(t=a.score)&&void 0!==t?t:"",new Date(a.timestamp||(null===(s=a.original)||void 0===s?void 0:s.timestamp)||Date.now()).toISOString(),(null===(n=a.original)||void 0===n?void 0:n.title)||a.title||"",((null===(r=a.original)||void 0===r?void 0:r.notes)||(null===(o=a.original)||void 0===o?void 0:o.summary)||"").replace(/\n/g," ")]]),d=new Blob([l],{type:"text/csv"}),c=URL.createObjectURL(d),m=document.createElement("a");return m.href=c,m.download="".concat((null===(i=a.original)||void 0===i?void 0:i.title)||a.normalizedSystemId||a.id,"_orghealth.csv"),document.body.appendChild(m),m.click(),m.remove(),void setTimeout(()=>URL.revokeObjectURL(c),1500)}const a=[["system","score","timestamp","title"]];(w||[]).forEach(e=>{var t,s,n,r,o,i,l;const c=d(e.systemId||e.system||(null===(t=e.original)||void 0===t?void 0:t.systemId)||(null===(s=e.original)||void 0===s?void 0:s.system)||"general"),m=null!==(n=null!==(r=e.score)&&void 0!==r?r:null===(o=e.original)||void 0===o?void 0:o.score)&&void 0!==n?n:"",u=new Date(e.timestamp||(null===(i=e.original)||void 0===i?void 0:i.timestamp)||Date.now()).toISOString(),g=(null===(l=e.original)||void 0===l?void 0:l.title)||e.title||"";a.push([c,m,u,g])});const l=u(a),c=new Blob([l],{type:"text/csv"}),m=URL.createObjectURL(c),g=document.createElement("a");g.href=m,g.download="".concat(b&&b.name||j,"_orghealth.csv"),document.body.appendChild(g),g.click(),g.remove(),setTimeout(()=>URL.revokeObjectURL(m),2e3)}catch(a){alert("CSV export failed")}}function T(){var e,t;let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const n=s||{composite:R,systems:L},r='\n      <html>\n        <head>\n          <title>Org Health Report</title>\n          <meta name="viewport" content="width=device-width, initial-scale=1" />\n          <style>\n            body{font-family: Arial, Helvetica, sans-serif;padding:20px;color:#111}\n            h1{font-size:20px}\n            h2{font-size:16px;margin-top:18px}\n            .box{border:1px solid #ddd;padding:12px;margin-top:8px;border-radius:6px}\n            .muted{color:#666;font-size:12px}\n          </style>\n        </head>\n        <body>\n          <h1>Organizational Health \u2014 '.concat(b&&b.name||j,'</h1>\n          <div class="muted">Generated: ').concat((new Date).toLocaleString(),'</div>\n          <div class="box"><strong>Composite:</strong> ').concat(null!==(e=n.composite)&&void 0!==e?e:s&&null!==(t=s.score)&&void 0!==t?t:"\u2014","</div>\n          ").concat(s?"<h2>System: ".concat(s.normalizedSystemId||s.systemId||s.id,'</h2>\n            <div class="box"><pre>').concat(JSON.stringify(s,null,2),"</pre></div>"):'<h2>Systems</h2>\n            <div class="box"><pre>'.concat(JSON.stringify(L,null,2),"</pre></div>"),"\n        </body>\n      </html>\n    "),o=window.open("","_blank","noopener,noreferrer");if(!o)return alert("Popup blocked");o.document.write(r),o.document.close(),o.focus()}function U(e){let{values:t=[],height:s=36}=e;if(!t||0===t.length)return(0,l.jsx)("div",{className:"text-xs text-gray-400",children:"No history"});const n=Math.max(...t),r=Math.min(...t),o=Math.max(4,t.length),i=Math.max(120,8*o);return(0,l.jsx)("div",{className:"w-full",children:(0,l.jsx)("svg",{width:"100%",height:s,viewBox:"0 0 ".concat(i," ").concat(s),preserveAspectRatio:"xMidYMid meet",className:"rounded block",style:{display:"block"},children:t.map((e,o)=>{const a=o*(i/t.length),d=n===r?.6*s:(e-r)/(n-r||1)*(s-6)+4,c=Math.max(4,i/t.length-2);return(0,l.jsx)("rect",{x:a+1,y:s-d,width:c,height:d,rx:2,className:p?"opacity-80":"opacity-90",style:{fill:"#4f46e5"}},o)})})})}const H=["Industry Dynamics","Founding Roots","Organization","Leadership","Culture","Innovation","Strategy","Structure","Processes","Dynamic Behavior","Technology","Risk","Financials","Skills","Resources","Environment","Goals","Policy","Staff-People"];function _(e){var t,s,n,r,o,i,a,d,c,m,u;let{systemLabel:g,result:x}=e;const h=null!==(t=null!==(s=null===x||void 0===x?void 0:x.score)&&void 0!==s?s:null===x||void 0===x||null===(n=x.original)||void 0===n?void 0:n.score)&&void 0!==t?t:null,v=(null===x||void 0===x?void 0:x.timestamp)||(null===x||void 0===x||null===(r=x.original)||void 0===r?void 0:r.timestamp)||(null===x||void 0===x||null===(o=x.original)||void 0===o?void 0:o.ts)||null,y=(null===x||void 0===x?void 0:x.original)||{},b=((null===y||void 0===y?void 0:y.subProgress)||(null===y||void 0===y||null===(i=y.meta)||void 0===i||i.subProgress),(null===y||void 0===y?void 0:y.notes)||(null===y||void 0===y||null===(a=y.meta)||void 0===a?void 0:a.notes)||(null===y||void 0===y?void 0:y.summary)||""),f=(()=>{const e=L.map(e=>null===e.score||void 0===e.score?-1:e.score).filter(e=>e>=0);if(!e.length)return{rank:"\u2014",total:L.length};return{rank:e.slice().sort((e,t)=>t-e).indexOf(h)+1||"\u2014",total:e.length}})(),j=(null===y||void 0===y||null===(d=y.meta)||void 0===d?void 0:d.insights)||(null===y||void 0===y?void 0:y.insights)||["Core strength: ".concat(h>=75?"strong governance and clarity":"needs improved coordination"),"Area of concern: ".concat(h<60?"low ownership and slow handoffs":"occasional misalignment under pressure")],w=(null===y||void 0===y||null===(c=y.meta)||void 0===c?void 0:c.forecasts)||(null===y||void 0===y?void 0:y.forecasts)||[{horizon:"4 weeks",text:"Stabilize processes \u2014 small wins expected"},{horizon:"3 months",text:"Partial improvement if action plan executed"},{horizon:"12 months",text:"Sustained lift if underlying culture & KPIs fixed"}],N=(null===y||void 0===y||null===(m=y.meta)||void 0===m?void 0:m.recommendations)||[{title:"Short",items:["Assign triage owners for blocked tickets","Daily 15m unblock standup for critical flows"]},{title:"Mid",items:["Run 8-week retention test","Implement cross-team SLAs"]},{title:"Long",items:["Embed playbooks and capability uplift program","Consider partnerships to scale delivery"]}],k=(null===y||void 0===y||null===(u=y.meta)||void 0===u?void 0:u.caseStudy)||{company:"Dangote Group (Nigeria)",summary:"Improved cross-unit coordination via central playbooks and weekly triage; measured using delivery cycle time.",result:"~35% faster delivery for prioritized initiatives in 12\u201318 months."},S=(null===y||void 0===y?void 0:y.components)||null;return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["Score: ",null!==h?"".concat(h,"%"):"\u2014"," ",v&&(0,l.jsxs)("span",{className:"ml-2",children:["\xb7 Completed ",new Date(v).toLocaleString()]})]}),(0,l.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["Ranking: ",f.rank,"/",f.total]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{onClick:()=>z(!1,x),className:"px-3 py-1 rounded-md border text-sm",children:"Export JSON"}),(0,l.jsx)("button",{onClick:()=>P(!1,x),className:"px-3 py-1 rounded-md border text-sm",children:"Export CSV"}),(0,l.jsx)("button",{onClick:()=>T(x),className:"px-3 py-1 rounded-md border text-sm",children:"Print / PDF"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h5",{className:"font-semibold",children:"Components examined"}),(0,l.jsx)("div",{className:"mt-2 grid grid-cols-2 sm:grid-cols-3 gap-2",children:H.map(e=>(0,l.jsxs)("div",{className:"p-2 rounded-md text-sm ".concat(p?"bg-gray-800 border border-gray-700":"bg-gray-50 border border-gray-100"),children:[(0,l.jsx)("div",{className:"font-medium",children:e}),(0,l.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:S&&null!=S[e]?"".concat(Math.round(S[e]),"%"):"\u2014"})]},e))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h5",{className:"font-semibold",children:"1. Rankings"}),(0,l.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:["System rank: ",(0,l.jsxs)("strong",{children:[f.rank,"/",f.total]}),".",S?" Component-level ranks are shown above.":" Component-level data not available."]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h5",{className:"font-semibold",children:"2. Insights"}),(0,l.jsx)("div",{className:"mt-2 space-y-2",children:j.map((e,t)=>(0,l.jsx)("div",{className:"p-3 rounded-md ".concat(p?"bg-gray-800 border border-gray-700":"bg-gray-50 border border-gray-100"),children:e},t))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h5",{className:"font-semibold",children:"3. Case study from African business"}),(0,l.jsxs)("div",{className:"p-3 rounded-md ".concat(p?"bg-green-900/10 border border-green-800":"bg-green-50 border border-green-100"),children:[(0,l.jsx)("div",{className:"font-medium",children:k.company}),(0,l.jsx)("div",{className:"text-sm mt-1",children:k.summary}),(0,l.jsx)("div",{className:"text-sm mt-2 font-medium",children:"Outcome"}),(0,l.jsx)("div",{className:"text-sm",children:k.result})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h5",{className:"font-semibold",children:"4. Forecasts"}),(0,l.jsx)("div",{className:"mt-2 space-y-2",children:w.map((e,t)=>(0,l.jsxs)("div",{className:"p-3 rounded-md ".concat(p?"bg-gray-800 border border-gray-700":"bg-gray-50 border border-gray-100"),children:[(0,l.jsx)("div",{className:"font-medium",children:e.horizon}),(0,l.jsx)("div",{className:"text-sm text-gray-600 mt-1",children:e.text})]},t))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h5",{className:"font-semibold",children:"5. X-ULTRA Recommendations"}),(0,l.jsx)("div",{className:"mt-2 space-y-3",children:N.map((e,t)=>(0,l.jsxs)("div",{className:"p-3 rounded-md ".concat(p?"bg-blue-900/10 border border-blue-800":"bg-blue-50 border border-blue-100"),children:[(0,l.jsx)("div",{className:"font-medium",children:e.title}),(0,l.jsx)("ul",{className:"list-disc pl-5 mt-2 text-sm",children:e.items.map((e,t)=>(0,l.jsx)("li",{children:e},t))})]},t))})]}),b&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h5",{className:"font-semibold",children:"Notes & Observations"}),(0,l.jsx)("div",{className:"mt-2 text-sm text-gray-400 whitespace-pre-wrap",children:b})]})]})}function q(e){let{systemLabel:t,blurb:s}=e;return(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("h4",{className:"text-lg font-semibold",children:["No assessment found for ",t]}),(0,l.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:"We don't yet have data for this system."})]}),(0,l.jsxs)("div",{className:"p-4 rounded-md ".concat(p?"bg-gray-800 border border-gray-700":"bg-gray-50 border border-gray-100"),children:[(0,l.jsx)("div",{className:"text-sm text-gray-400",children:s}),(0,l.jsxs)("ul",{className:"list-disc pl-5 mt-3 text-sm text-gray-600",children:[(0,l.jsx)("li",{children:"Understand how this system impacts delivery, quality and growth."}),(0,l.jsx)("li",{children:"Get automated recommendations tailored to your organization."}),(0,l.jsx)("li",{children:"Export actionable meeting agendas and owners to follow up quickly."})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Ready to assess? The assessment takes ~10\u201320 minutes per system and will populate this panel with an easy-to-read report and recommended next steps."}),(0,l.jsx)("div",{className:"mt-4",children:(0,l.jsx)("button",{onClick:()=>{try{window.dispatchEvent(new CustomEvent("conseqx:assessment:start",{detail:{systemId:t,orgId:j}}))}catch(e){}f("/ceo/assessments"),C(!1)},className:"px-4 py-2 rounded-md bg-gradient-to-r from-indigo-600 to-blue-600 text-white",children:"Take Organizational Health Assessment"})})]})]})}return(0,l.jsxs)("div",{className:"rounded-2xl p-4 ".concat(p?"bg-gradient-to-br from-gray-900/80 to-gray-900/60 border border-gray-700 text-gray-100":"bg-white border border-gray-100 text-gray-900"),children:[(0,l.jsx)("style",{children:".hide-scrollbar::-webkit-scrollbar{display:none} .hide-scrollbar{ -ms-overflow-style:none; scrollbar-width:none; }"}),(0,l.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"p-2 rounded-md bg-transparent",children:(0,l.jsx)(a.qvi,{className:"text-2xl text-indigo-600 dark:text-indigo-400"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm font-semibold",children:"Organizational Health"}),(0,l.jsx)("div",{className:"text-xs ".concat(p?"text-gray-400":"text-gray-500"),children:"Composite view across core systems"})]})]}),(0,l.jsx)("div",{className:"flex items-center gap-2",children:(0,l.jsxs)("div",{className:"inline-flex items-center gap-1 rounded-md border overflow-hidden",children:[(0,l.jsx)("button",{onClick:()=>z(!0),className:"px-2 py-1 text-xs ".concat(p?"bg-gray-800 border-gray-700 text-gray-200":"bg-white border border-gray-200 text-gray-700"),title:"Export all (JSON)",children:"JSON"}),(0,l.jsx)("button",{onClick:()=>P(!0),className:"px-2 py-1 text-xs ".concat(p?"bg-gray-800 border-gray-700 text-gray-200":"bg-white border border-gray-200 text-gray-700"),title:"Export all (CSV)",children:"CSV"}),(0,l.jsx)("button",{onClick:()=>T(null),className:"px-2 py-1 text-xs ".concat(p?"bg-gray-800 border-gray-700 text-gray-200":"bg-white border border-gray-200 text-gray-700"),title:"Print / PDF",children:"Print"})]})})]}),(0,l.jsxs)("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-12 gap-4 items-center",children:[(0,l.jsx)("div",{className:"sm:col-span-8",children:(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-xs text-gray-400",children:"Composite score"}),(0,l.jsx)("div",{className:"text-2xl font-bold mt-1",children:k?"\u2026":null!==R?"".concat(R,"%"):"\u2014"}),(0,l.jsx)("div",{className:"text-sm mt-1 ".concat(p?"text-gray-400":"text-gray-500"),children:w&&w.length?"".concat(w.length," datapoints"):"No data yet"})]}),(0,l.jsx)("div",{className:"flex-1 hidden sm:block"})]})}),(0,l.jsx)("div",{className:"sm:col-span-4 flex justify-end items-center",children:(0,l.jsxs)("div",{className:"w-full max-w-[220px]",children:[(0,l.jsx)("div",{className:"text-xs mb-1 ".concat(p?"text-gray-400 text-right":"text-gray-500 text-right"),children:"Recent trend"}),(0,l.jsx)("div",{className:"w-full h-11 rounded p-1 ".concat(p?"bg-gray-800/50":"bg-gray-50"),children:(0,l.jsx)(U,{values:A,height:36})})]})})]}),(0,l.jsx)("div",{className:"mt-4 grid grid-cols-1 gap-2",children:L.map(e=>{var t;return(0,l.jsxs)("div",{className:"flex items-center justify-between gap-3 p-3 rounded ".concat(p?"bg-gray-800 border border-gray-700":"bg-gray-50 border border-gray-100"),children:[(0,l.jsxs)("div",{className:"min-w-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"px-2 py-0.5 rounded text-xs font-semibold ".concat(m(e.score,p)),children:e.label}),(0,l.jsx)("div",{className:"text-sm truncate ".concat(p?"text-gray-200":"text-gray-800"),children:null!==e.score?"".concat(e.score,"%"):(0,l.jsx)("span",{className:"text-xs text-gray-400",children:"Assessment not taken"})})]}),null!=e.answeredPct?(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsxs)("div",{className:"text-xs text-gray-400 mb-1",children:[e.answeredPct,"% answered"]}),(0,l.jsx)("div",{className:"w-full h-2 rounded-full ".concat(p?"bg-gray-700":"bg-gray-200"),children:(0,l.jsx)("div",{style:{width:"".concat(Math.max(4,Math.min(100,e.answeredPct)),"%")},className:"h-full rounded-full bg-gradient-to-r from-indigo-600 to-blue-500"})})]}):null!==e.score?(0,l.jsxs)("div",{className:"mt-2",children:[(0,l.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:"Score progress"}),(0,l.jsx)("div",{className:"w-full h-2 rounded-full ".concat(p?"bg-gray-700":"bg-gray-200"),children:(0,l.jsx)("div",{style:{width:"".concat(Math.max(4,Math.min(100,e.score)),"%")},className:"h-full rounded-full bg-gradient-to-r from-indigo-600 to-blue-500"})})]}):(0,l.jsx)("div",{className:"mt-2 text-xs text-gray-400",children:"Take your organizational health assessment to populate this system's report."})]}),(0,l.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{onClick:()=>function(e){const t={systemId:e,result:O[e]||null};E(t),C(!0)}(e.id),className:"px-3 py-1 rounded-md border text-xs ".concat(p?"bg-gray-900 border-gray-700 text-gray-200":"bg-white border border-gray-200 text-gray-700"),title:null!==e.score?"View detailed results":"No results yet \u2014 learn about this system and take the assessment","aria-label":"View ".concat(e.label),children:(0,l.jsx)(a.Ny1,{})}),null===e.score&&(0,l.jsx)("button",{onClick:()=>function(e){try{window.dispatchEvent(new CustomEvent("conseqx:assessment:start",{detail:{systemId:e,orgId:j}}))}catch(t){}f("/ceo/assessments")}(e.id),className:"px-3 py-1 rounded-md bg-indigo-600 text-white text-xs",title:"Take ".concat(e.label," assessment"),children:"Take assessment"})]}),(0,l.jsx)("div",{className:"text-xs text-gray-400",children:null!==(t=e.result)&&void 0!==t&&t.timestamp?new Date(e.result.timestamp).toLocaleDateString():null!==e.score?"Date unknown":"\u2014"})]})]},e.id)})}),(0,l.jsx)("div",{className:"mt-3 text-xs text-gray-400",children:"Tip: run assessments from the Assessments panel to populate these scores. The OrgHealth engine stores recent results and emits suggestions into Reports."}),(0,l.jsx)(g,{open:I,onClose:()=>{C(!1),E(null)},title:M?M.result?"THE SYSTEM OF ".concat(((null===(t=D.find(e=>d(e.id)===M.systemId))||void 0===t?void 0:t.label)||M.systemId).toUpperCase()," REPORT"):"THE SYSTEM OF ".concat(((null===(s=D.find(e=>d(e.id)===M.systemId))||void 0===s?void 0:s.label)||M.systemId).toUpperCase()," \u2014 GET STARTED"):"System",darkMode:p,footer:M?M.result?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:()=>z(!1,M.result),className:"px-3 py-2 rounded-md border",children:"JSON"}),(0,l.jsx)("button",{onClick:()=>P(!1,M.result),className:"px-3 py-2 rounded-md border",children:"CSV"}),(0,l.jsx)("button",{onClick:()=>T(M.result),className:"px-3 py-2 rounded-md border",children:"Print"}),(0,l.jsxs)("button",{onClick:()=>{C(!1),f("/ceo/assessments")},className:"px-3 py-2 rounded-md bg-gradient-to-r from-indigo-600 to-blue-600 text-white",children:[(0,l.jsx)(a.EQc,{className:"inline mr-2"}),"Open assessment"]})]}):(0,l.jsx)(l.Fragment,{}):null,children:M&&(M.result?(0,l.jsx)(_,{systemLabel:(null===(x=D.find(e=>d(e.id)===M.systemId))||void 0===x?void 0:x.label)||M.systemId,result:M.result}):(0,l.jsx)(q,{systemLabel:(null===(h=D.find(e=>d(e.id)===M.systemId))||void 0===h?void 0:h.label)||M.systemId,blurb:(null===(v=D.find(e=>d(e.id)===M.systemId))||void 0===v?void 0:v.blurb)||""}))})]})}},55805:(e,t,s)=>{s.d(t,{h1:()=>a,tB:()=>i});const n="conseqx_org_health_v1";function r(){try{const e=localStorage.getItem(n);return e?JSON.parse(e):{}}catch(e){return{}}}function o(e,t){e||(e="anon");const s=r(),o=s[e]||[];o.unshift(t),s[e]=o.slice(0,300),function(e){try{localStorage.setItem(n,JSON.stringify(e))}catch(t){}}(s);try{window.dispatchEvent(new CustomEvent("conseqx:orghealth:completed",{detail:{orgId:e,result:t}}))}catch(i){}}function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const s=e.orgId||"anon",n=e.systemId||e.system||"general",r=e.meta||{},i="number"===typeof r.networkDensity?Math.max(0,Math.min(1,r.networkDensity)):Number(e.score)?Math.min(1,e.score/100):.5,a="number"===typeof r.sentiment?r.sentiment:null,l=null!==a?Math.max(0,Math.min(1,(a+1)/2)):Math.min(1,(Number(e.score)||0)/100),d="number"===typeof r.operational?Math.max(0,Math.min(1,r.operational)):Math.min(1,(Number(e.score)||0)/100);let c={networkDensity:.4,sentiment:.3,operational:.3};const m={interdependency:{networkDensity:.6,sentiment:.2,operational:.2},investigation:{networkDensity:.2,sentiment:.2,operational:.6},inlignment:{networkDensity:.2,sentiment:.4,operational:.4},orchestration:{networkDensity:.3,sentiment:.2,operational:.5},illustration:{networkDensity:.2,sentiment:.5,operational:.3},interpretation:{networkDensity:.2,sentiment:.5,operational:.3}};m[n]&&(c=m[n]);const u={networkDensity:i,sentiment:l,operational:d},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=Object.keys(t);if(0===s.length){const t=Object.values(e);if(0===t.length)return 0;const s=t.reduce((e,t)=>e+(Number(t)||0),0)/t.length;return Math.round(100*s)}const n=s.reduce((e,s)=>e+(Number(t[s])||0),0)||1,r=s.reduce((s,n)=>s+(Number(e[n])||0)*(Number(t[n])||0),0)/n;return Math.round(100*Math.max(0,Math.min(1,r)))}(u,c),x={id:e.id||"oh-".concat(Date.now().toString(36)),orgId:s,systemId:n,score:g,breakdown:u,provenance:{sourceAssessmentId:e.id,algorithmVersion:"orghealth-v1",createdAt:Date.now()},timestamp:Date.now(),original:{title:e.title,owner:e.owner,meta:e.meta||{}}};o(s,x);const h={id:"rec-".concat(Date.now().toString(36)),title:"Investigate ".concat(n," - ").concat(g,"%"),summary:"System ".concat(n," received a score of ").concat(g,"%. Key drivers: ").concat(Object.entries(u).map(e=>{let[t,s]=e;return"".concat(t,"=").concat(Math.round(100*s),"%")}).join(", "),"."),impact:g<60?"High \u2014 potential risk":g<75?"Medium":"Low",severity:g<60?"warning":"improvement",predictions:{short:g<60?"Short term: Operational friction, delays.":"Short term: Stable",mid:g<60?"Mid term: Reduced throughput if unresolved.":"Mid term: Maintain improvements",long:"Long term: Monitor trends"},evidence:["Derived from assessment ".concat(e.id),...e.meta&&e.meta.notes?[e.meta.notes]:[]],comparables:[],recommendedMeeting:{title:"Cross-functional sync: ".concat(n),urgency:g<60?"Urgent":"High",attendees:["Head of Product","Head of Engineering","Ops Lead"],proposedDurationMin:45,agenda:["Review findings","Assign owners","Agree next steps"]},source:"Assessment: ".concat(n),createdAt:Date.now()};try{window.dispatchEvent(new CustomEvent("conseqx:orghealth:recommendation",{detail:{orgId:s,recommendations:[h]}}))}catch(t){}return x}catch(s){return console.error("orgHealth.ingestAssessment error",s),null}}function a(e){return r()[e]||[]}}}]);
//# sourceMappingURL=707.c4ec53c9.chunk.js.map