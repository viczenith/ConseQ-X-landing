"use strict";(self.webpackChunkceo_assessment_app=self.webpackChunkceo_assessment_app||[]).push([[515],{18515:(e,t,a)=>{a.r(t),a.d(t,{default:()=>v});var n=a(89379),i=a(65043),r=a(23721),s=a(13204),l=a(35016),o=a(70579);const d="conseqx_team_v1",c=function(){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(String(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").trim().toLowerCase())},m=()=>Date.now(),x=function(){return"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"t","-").concat(m().toString(36),"-").concat(Math.floor(9e3*Math.random()+1e3))};function u(e){let{open:t,title:a,onClose:n,children:i,actions:r,darkMode:s}=e;return t?(0,o.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,o.jsx)("div",{className:"absolute inset-0",style:{backgroundColor:s?"rgba(2,6,23,0.6)":"rgba(2,6,23,0.18)"},onClick:n}),(0,o.jsxs)("div",{className:"relative z-10 w-full max-w-lg mx-auto rounded-2xl p-5 ".concat(s?"bg-gray-900 border border-gray-700 text-gray-100 shadow-2xl":"bg-white border border-gray-100 text-gray-900 shadow-xl"),role:"dialog","aria-modal":"true","aria-label":a,children:[(0,o.jsxs)("div",{className:"flex items-start justify-between",children:[(0,o.jsx)("div",{className:"text-lg font-semibold",children:a}),(0,o.jsx)("button",{onClick:n,"aria-label":"Close modal",className:"".concat(s?"text-gray-300":"text-gray-600"," ml-2"),children:"\u2715"})]}),(0,o.jsx)("div",{className:"mt-4 max-h-[65vh] overflow-auto hide-scrollbar",children:i}),r&&(0,o.jsx)("div",{className:"mt-4 flex justify-end gap-3 flex-wrap",children:r})]})]}):null}function b(e){let{open:t,title:a,message:n,onCancel:i,onConfirm:r,darkMode:s}=e;return(0,o.jsx)(u,{open:t,title:a,onClose:i,darkMode:s,actions:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:i,className:"px-3 py-2 rounded-md border",children:"Cancel"}),(0,o.jsx)("button",{onClick:r,className:"px-3 py-2 rounded-md bg-red-600 text-white",children:"Confirm"})]}),children:(0,o.jsx)("div",{className:"text-sm ".concat(s?"text-gray-300":"text-gray-700"),children:n})})}function g(e){let{value:t,onChange:a,options:n=[],darkMode:i,className:r="",ariaLabel:l}=e;return(0,o.jsxs)("div",{className:"relative inline-block w-full ".concat(r),children:[(0,o.jsx)("select",{value:t,onChange:a,"aria-label":l,className:"appearance-none w-full pr-10 pl-3 py-2 rounded border text-sm focus:outline-none focus:ring-2 focus:ring-indigo-300 ".concat(i?"bg-gray-800 border-gray-700 text-gray-100":"bg-white border-gray-200 text-gray-800"),children:n.map(e=>(0,o.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,o.jsx)("div",{className:"pointer-events-none absolute inset-y-0 right-2 flex items-center",children:(0,o.jsx)(s.Vr3,{className:"".concat(i?"text-gray-300":"text-gray-500")})})]})}function v(){const{darkMode:e}=(0,r.KC)(),[t,a]=((0,l.A)(),(0,i.useState)(()=>function(e,t){try{const a=localStorage.getItem(e);return a?JSON.parse(a):t}catch(a){return t}}(d,{members:[],invites:[]}))),[v,h]=(0,i.useState)(""),[p,y]=(0,i.useState)("editor"),[f,j]=(0,i.useState)(!1),[N,w]=(0,i.useState)({open:!1,memberId:null}),[C,k]=(0,i.useState)(!1),[A,S]=(0,i.useState)("all"),[I,M]=(0,i.useState)({open:!1,title:"",content:null});(0,i.useEffect)(()=>{!function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(a){}}(d,t)},[t]);const R=(0,i.useMemo)(()=>{const e=t.members.length,a=t.invites.length;return{members:e,pending:a,total:e+a}},[t]);function L(e){return String(e||"").trim().toLowerCase()}async function E(e){return await new Promise(e=>setTimeout(e,350)),a(t=>{const a=t.invites.map(t=>t.id===e.id?(0,n.A)((0,n.A)({},t),{},{sentCount:(t.sentCount||0)+1,createdAt:t.createdAt||m()}):t);return(0,n.A)((0,n.A)({},t),{},{invites:a})}),!0}async function U(e){null===e||void 0===e||e.preventDefault();const i=L(v);if(!c(i))return void M({open:!0,title:"Invalid email",content:(0,o.jsx)("div",{children:"Please enter a valid email address."})});if(!p)return void M({open:!0,title:"Pick a role",content:(0,o.jsx)("div",{children:"Select a role for this invite (Admin / Editor / Viewer)"})});if(t.members.some(e=>L(e.email)===i))return void M({open:!0,title:"Already a member",content:(0,o.jsx)("div",{children:"This email is already a member of your org."})});if(t.invites.some(e=>L(e.email)===i))return void M({open:!0,title:"Invite pending",content:(0,o.jsx)("div",{children:"An invite is already pending for this address."})});j(!0);const r=x("inv"),s={id:x("i"),email:i,role:p,token:r,createdAt:m(),expiresAt:m()+12096e5,sentCount:0};a(e=>(0,n.A)((0,n.A)({},e),{},{invites:[s,...e.invites]}));try{await E(s),h(""),y("editor"),k(!1),M({open:!0,title:"Invite sent",content:(0,o.jsx)("div",{children:'Invitation created and (simulated) sent. Use "Resend" if needed.'})})}catch(l){a(e=>(0,n.A)((0,n.A)({},e),{},{invites:e.invites.filter(e=>e.id!==s.id)})),M({open:!0,title:"Send failed",content:(0,o.jsx)("div",{children:"Unable to send invite \u2014 try again."})})}finally{j(!1)}}const _={admin:"bg-yellow-400 text-black",editor:"bg-indigo-600 text-white",viewer:"bg-gray-300 text-black"},P="text-gray-900",D="text-gray-600",O="text-gray-500";return(0,o.jsxs)("section",{className:"p-4 sm:p-6 md:p-8",children:[(0,o.jsx)("style",{children:"\n    .hide-scrollbar::-webkit-scrollbar { display: none; }\n    .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }\n    .fancy-select select:focus { box-shadow: 0 0 0 4px rgba(99,102,241,0.12); }\n  "}),(0,o.jsx)(u,{open:I.open,title:I.title,onClose:()=>M({open:!1}),actions:(0,o.jsx)("button",{onClick:()=>M({open:!1}),className:"px-3 py-2 rounded-md border",children:"Close"}),darkMode:e,children:(0,o.jsx)("div",{className:"".concat(e?"text-gray-200":P),children:I.content})}),(0,o.jsx)(b,{open:N.open,title:"Remove team member",message:"Are you sure you want to remove this member from your organization? This action cannot be undone here (dev-mode).",onCancel:()=>w({open:!1,memberId:null}),onConfirm:function(){const e=N.memberId;a(t=>(0,n.A)((0,n.A)({},t),{},{members:t.members.filter(t=>t.id!==e)})),w({open:!1,memberId:null})},darkMode:e}),(0,o.jsxs)("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-4",children:[(0,o.jsxs)("div",{className:"min-w-0",children:[(0,o.jsx)("h2",{className:"text-2xl font-bold ".concat(e?"text-gray-100":P),children:"Team"}),(0,o.jsx)("p",{className:"mt-1 text-sm ".concat(e?"text-gray-300":D),children:"Invite teammates, manage roles & permissions for the workspace."})]}),(0,o.jsxs)("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[(0,o.jsxs)("div",{className:"text-xs ".concat(e?"text-gray-300":O),children:[R.members," members \xb7 ",R.pending," invites"]}),(0,o.jsxs)("button",{onClick:()=>k(!0),className:"ml-0 md:ml-2 px-3 py-2 rounded-md bg-gradient-to-r from-indigo-600 to-blue-600 text-white flex items-center gap-2 w-full md:w-auto justify-center",children:[(0,o.jsx)(s.NPy,{})," Invite"]})]})]}),(0,o.jsxs)("div",{className:"mt-5 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,o.jsxs)("div",{className:"".concat(e?"bg-gray-900 text-gray-100 border border-gray-700":"bg-white text-gray-900 border border-gray-100"," rounded-2xl p-4 lg:col-span-2"),children:[(0,o.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,o.jsx)("div",{className:"text-sm font-semibold",children:"Members"}),(0,o.jsxs)("div",{className:"flex items-center gap-2 w-full md:w-auto",children:[(0,o.jsx)("div",{className:"w-full md:w-auto fancy-select",children:(0,o.jsx)(g,{value:A,onChange:e=>S(e.target.value),darkMode:e,ariaLabel:"Filter members",options:[{value:"all",label:"All"},{value:"active",label:"Active members"},{value:"pending",label:"Pending invites"}]})}),(0,o.jsx)("button",{onClick:function(){const e=[["name","email","role","addedAt"]];t.members.forEach(t=>e.push([t.name,t.email,t.role,new Date(t.addedAt).toISOString()]));const a=e.map(e=>e.map(e=>'"'.concat(String(e).replace(/"/g,'""'),'"')).join(",")).join("\n"),n=new Blob([a],{type:"text/csv;charset=utf-8"}),i=URL.createObjectURL(n),r=document.createElement("a");r.href=i,r.download="conseqx_team_".concat((new Date).toISOString().slice(0,10),".csv"),document.body.appendChild(r),r.click(),r.remove(),setTimeout(()=>URL.revokeObjectURL(i),1e3)},title:"Export members",className:"px-2 py-1 rounded-md border ml-0 md:ml-2",children:(0,o.jsx)(s.WCW,{})})]})]}),(0,o.jsxs)("div",{className:"mt-3 space-y-4",children:[t.invites.length>0&&("all"===A||"pending"===A)&&(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"text-xs ".concat(e?"text-gray-300":O," mb-2"),children:"Pending invites"}),(0,o.jsx)("div",{className:"space-y-2 max-h-56 overflow-auto hide-scrollbar",children:t.invites.map(i=>(0,o.jsxs)("div",{className:"".concat(e?"bg-gray-800 border border-gray-700":"bg-gray-50 border border-gray-100"," p-3 rounded-md flex items-center justify-between gap-3"),children:[(0,o.jsxs)("div",{className:"min-w-0",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("div",{className:"font-medium truncate",children:i.email}),(0,o.jsx)("div",{className:"text-xs px-2 py-0.5 rounded ".concat(_[i.role]||"bg-gray-300"),children:i.role})]}),(0,o.jsxs)("div",{className:"text-xs mt-1 ".concat(e?"text-gray-400":O),children:["Sent: ",i.createdAt?new Date(i.createdAt).toLocaleString():"\u2014"]})]}),(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("button",{title:"Copy invite link",onClick:()=>function(e){const t="".concat(window.location.origin,"/invite/").concat(e.token);navigator.clipboard&&navigator.clipboard.writeText(t),M({open:!0,title:"Copied",content:(0,o.jsx)("div",{children:"Invite link copied to clipboard."})})}(i),className:"px-2 py-1 rounded-md border","aria-label":"Copy invite link for ".concat(i.email),children:(0,o.jsx)(s.eb3,{})}),(0,o.jsx)("button",{title:"Resend invite",onClick:()=>async function(e){j(!0),await E(e),j(!1),M({open:!0,title:"Resent",content:(0,o.jsxs)("div",{children:["Invite resent to ",e.email,"."]})})}(i),className:"px-2 py-1 rounded-md border","aria-label":"Resend invite to ".concat(i.email),children:(0,o.jsx)(s.maD,{})}),(0,o.jsx)("button",{title:"Cancel invite",onClick:()=>{return e=i.id,void a(t=>(0,n.A)((0,n.A)({},t),{},{invites:t.invites.filter(t=>t.id!==e)}));var e},className:"px-2 py-1 rounded-md border text-red-600","aria-label":"Cancel invite for ".concat(i.email),children:"Cancel"}),(0,o.jsx)("button",{title:"Simulate accept",onClick:()=>function(e){const n=t.invites.find(t=>t.id===e);if(!n)return;const i={id:x("m"),name:n.email.split("@")[0],email:n.email,role:n.role,addedAt:m()};a(t=>({members:[i,...t.members],invites:t.invites.filter(t=>t.id!==e)}))}(i.id),className:"px-2 py-1 rounded-md border text-green-600","aria-label":"Simulate accept for ".concat(i.email),children:"Accept"})]})]},i.id))})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"text-xs ".concat(e?"text-gray-300":O," mb-2"),children:"Active members"}),(0,o.jsx)("div",{className:"space-y-2",children:0===t.members.length?(0,o.jsx)("div",{className:"text-sm ".concat(e?"text-gray-300":O),children:"No members yet. Invite colleagues to collaborate."}):(0,o.jsx)("div",{className:"space-y-2",children:t.members.map(t=>(0,o.jsxs)("div",{className:"".concat(e?"bg-gray-800 border border-gray-700":"bg-white border border-gray-100"," p-3 rounded-md flex items-center justify-between gap-3"),children:[(0,o.jsxs)("div",{className:"min-w-0 flex items-center gap-3",children:[(0,o.jsx)("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-indigo-600 to-purple-600 flex items-center justify-center text-white font-semibold flex-shrink-0",children:String(t.name||t.email||"U").slice(0,1).toUpperCase()}),(0,o.jsxs)("div",{className:"min-w-0",children:[(0,o.jsx)("div",{className:"font-medium truncate",children:t.name||t.email}),(0,o.jsx)("div",{className:"text-xs ".concat(e?"text-gray-400":O," truncate"),children:t.email})]})]}),(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("div",{className:"w-36",children:(0,o.jsx)(g,{value:t.role,onChange:e=>{return i=t.id,r=e.target.value,void a(e=>(0,n.A)((0,n.A)({},e),{},{members:e.members.map(e=>e.id===i?(0,n.A)((0,n.A)({},e),{},{role:r}):e)}));var i,r},darkMode:e,ariaLabel:"Change role for ".concat(t.email),options:[{value:"admin",label:"Admin"},{value:"editor",label:"Editor"},{value:"viewer",label:"Viewer"}]})}),(0,o.jsx)("button",{title:"Remove",onClick:()=>{return e=t.id,void w({open:!0,memberId:e});var e},className:"px-2 py-1 rounded-md border text-red-600","aria-label":"Remove member ".concat(t.email),children:(0,o.jsx)(s.qbC,{})})]})]},t.id))})})]})]})]}),(0,o.jsxs)("aside",{className:"".concat(e?"bg-gray-900 text-gray-100 border border-gray-700":"bg-white text-gray-900 border border-gray-100"," rounded-2xl p-4"),children:[(0,o.jsx)("div",{className:"text-sm font-semibold",children:"Invite teammate"}),(0,o.jsx)("div",{className:"mt-1 text-xs ".concat(e?"text-gray-300":D),children:"Add a colleague by email and pick a role."}),(0,o.jsxs)("form",{onSubmit:U,className:"mt-3 space-y-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"text-xs ".concat(e?"text-gray-300":O),children:"Email"}),(0,o.jsx)("input",{value:v,onChange:e=>h(e.target.value),placeholder:"name@company.com",className:"w-full mt-1 px-3 py-2 rounded border text-sm focus:outline-none ".concat(e?"bg-gray-800 border-gray-700 text-gray-100":"bg-white border-gray-200 text-gray-900"),"aria-label":"Invite email"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"text-xs ".concat(e?"text-gray-300":O),children:"Role"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)(g,{value:p,onChange:e=>y(e.target.value),darkMode:e,ariaLabel:"Invite role",options:[{value:"admin",label:"Admin \u2014 full access"},{value:"editor",label:"Editor \u2014 create & edit"},{value:"viewer",label:"Viewer \u2014 read-only"}]})})]}),(0,o.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:[(0,o.jsxs)("button",{type:"submit",disabled:f,className:"px-3 py-2 rounded-md bg-gradient-to-r from-indigo-600 to-blue-600 text-white flex items-center gap-2 justify-center w-full sm:w-auto",children:[(0,o.jsx)(s.NPy,{})," ",f?"Sending...":"Send invite"]}),(0,o.jsx)("button",{type:"button",onClick:()=>{h(""),y("editor")},className:"px-3 py-2 rounded-md border w-full sm:w-auto",children:"Clear"})]})]})]})]}),(0,o.jsx)(u,{open:C,title:"Invite teammate",onClose:()=>k(!1),actions:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{onClick:()=>k(!1),className:"px-3 py-2 rounded-md border",children:"Close"}),(0,o.jsx)("button",{onClick:U,className:"px-3 py-2 rounded-md bg-gradient-to-r from-indigo-600 to-blue-600 text-white",children:"Create invite"})]}),darkMode:e,children:(0,o.jsxs)("div",{className:"space-y-3",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"text-xs ".concat(e?"text-gray-300":O),children:"Email"}),(0,o.jsx)("input",{value:v,onChange:e=>h(e.target.value),placeholder:"name@company.com",className:"w-full mt-1 px-3 py-2 rounded border text-sm ".concat(e?"bg-gray-800 border-gray-700 text-gray-100":"bg-white border-gray-200 text-gray-900")})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"text-xs ".concat(e?"text-gray-300":O),children:"Role"}),(0,o.jsx)("div",{className:"mt-1",children:(0,o.jsx)(g,{value:p,onChange:e=>y(e.target.value),darkMode:e,ariaLabel:"Invite role",options:[{value:"admin",label:"Admin \u2014 full access"},{value:"editor",label:"Editor \u2014 create & edit"},{value:"viewer",label:"Viewer \u2014 read-only"}]})})]}),(0,o.jsx)("div",{className:"text-xs ".concat(e?"text-gray-400":O),children:"Invites expire in 14 days by default. In production, use server-side expiry & audit logs."})]})})]})}}}]);
//# sourceMappingURL=515.47e21abd.chunk.js.map